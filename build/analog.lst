ARM GAS  C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"analog.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.InitADCDMA,"ax",%progbits
  20              		.align	1
  21              		.global	InitADCDMA
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	InitADCDMA:
  27              	.LFB252:
  28              		.file 1 "Main/Src/analog.c"
   1:Main/Src/analog.c **** /* 
   2:Main/Src/analog.c **** #############################
   3:Main/Src/analog.c ****     Wall Sensor & voltage
   4:Main/Src/analog.c **** #############################
   5:Main/Src/analog.c **** */
   6:Main/Src/analog.c **** 
   7:Main/Src/analog.c **** #include"analog.h"
   8:Main/Src/analog.c **** 
   9:Main/Src/analog.c **** uint16_t adcval[5];
  10:Main/Src/analog.c **** uint16_t sensval[4];
  11:Main/Src/analog.c **** 
  12:Main/Src/analog.c **** extern ADC_HandleTypeDef hadc1;
  13:Main/Src/analog.c **** static uint8_t senstype = 0;
  14:Main/Src/analog.c **** float vbat = 0;
  15:Main/Src/analog.c **** 
  16:Main/Src/analog.c **** void InitADCDMA(){
  29              		.loc 1 16 18 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
  17:Main/Src/analog.c ****   HAL_ADC_Start_DMA(&hadc1, (uint32_t*)adcval, 5);
  38              		.loc 1 17 3 view .LVU1
  39 0002 0522     		movs	r2, #5
  40 0004 0249     		ldr	r1, .L3
  41 0006 0348     		ldr	r0, .L3+4
ARM GAS  C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s 			page 2


  42 0008 FFF7FEFF 		bl	HAL_ADC_Start_DMA
  43              	.LVL0:
  18:Main/Src/analog.c **** }
  44              		.loc 1 18 1 is_stmt 0 view .LVU2
  45 000c 08BD     		pop	{r3, pc}
  46              	.L4:
  47 000e 00BF     		.align	2
  48              	.L3:
  49 0010 00000000 		.word	.LANCHOR0
  50 0014 00000000 		.word	hadc1
  51              		.cfi_endproc
  52              	.LFE252:
  54              		.section	.text.TrigWallSens,"ax",%progbits
  55              		.align	1
  56              		.global	TrigWallSens
  57              		.syntax unified
  58              		.thumb
  59              		.thumb_func
  61              	TrigWallSens:
  62              	.LFB253:
  19:Main/Src/analog.c **** 
  20:Main/Src/analog.c **** void TrigWallSens(){
  63              		.loc 1 20 20 is_stmt 1 view -0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67 0000 10B5     		push	{r4, lr}
  68              	.LCFI1:
  69              		.cfi_def_cfa_offset 8
  70              		.cfi_offset 4, -8
  71              		.cfi_offset 14, -4
  21:Main/Src/analog.c ****   if(senstype){
  72              		.loc 1 21 3 view .LVU4
  73              		.loc 1 21 6 is_stmt 0 view .LVU5
  74 0002 104B     		ldr	r3, .L9
  75 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  76              		.loc 1 21 5 view .LVU6
  77 0006 83B1     		cbz	r3, .L6
  22:Main/Src/analog.c ****     HAL_GPIO_WritePin(LED_FR_L_GPIO_Port,LED_FR_L_Pin,1);
  78              		.loc 1 22 5 is_stmt 1 view .LVU7
  79 0008 0F4C     		ldr	r4, .L9+4
  80 000a 0122     		movs	r2, #1
  81 000c 1021     		movs	r1, #16
  82 000e 2046     		mov	r0, r4
  83 0010 FFF7FEFF 		bl	HAL_GPIO_WritePin
  84              	.LVL1:
  23:Main/Src/analog.c ****     HAL_GPIO_WritePin(LED_FL_R_GPIO_Port,LED_FL_R_Pin,0);
  85              		.loc 1 23 5 view .LVU8
  86 0014 0022     		movs	r2, #0
  87 0016 2021     		movs	r1, #32
  88 0018 2046     		mov	r0, r4
  89 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
  90              	.LVL2:
  91              	.L7:
  24:Main/Src/analog.c ****   }else{
  25:Main/Src/analog.c ****     HAL_GPIO_WritePin(LED_FR_L_GPIO_Port,LED_FR_L_Pin,0);
  26:Main/Src/analog.c ****     HAL_GPIO_WritePin(LED_FL_R_GPIO_Port,LED_FL_R_Pin,1);
ARM GAS  C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s 			page 3


  27:Main/Src/analog.c ****   }
  28:Main/Src/analog.c ****   HAL_ADC_Start_DMA(&hadc1, (uint32_t*)adcval, 5);
  92              		.loc 1 28 3 view .LVU9
  93 001e 0522     		movs	r2, #5
  94 0020 0A49     		ldr	r1, .L9+8
  95 0022 0B48     		ldr	r0, .L9+12
  96 0024 FFF7FEFF 		bl	HAL_ADC_Start_DMA
  97              	.LVL3:
  29:Main/Src/analog.c **** }
  98              		.loc 1 29 1 is_stmt 0 view .LVU10
  99 0028 10BD     		pop	{r4, pc}
 100              	.L6:
  25:Main/Src/analog.c ****     HAL_GPIO_WritePin(LED_FL_R_GPIO_Port,LED_FL_R_Pin,1);
 101              		.loc 1 25 5 is_stmt 1 view .LVU11
 102 002a 074C     		ldr	r4, .L9+4
 103 002c 0022     		movs	r2, #0
 104 002e 1021     		movs	r1, #16
 105 0030 2046     		mov	r0, r4
 106 0032 FFF7FEFF 		bl	HAL_GPIO_WritePin
 107              	.LVL4:
  26:Main/Src/analog.c ****   }
 108              		.loc 1 26 5 view .LVU12
 109 0036 0122     		movs	r2, #1
 110 0038 2021     		movs	r1, #32
 111 003a 2046     		mov	r0, r4
 112 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 113              	.LVL5:
 114 0040 EDE7     		b	.L7
 115              	.L10:
 116 0042 00BF     		.align	2
 117              	.L9:
 118 0044 00000000 		.word	.LANCHOR1
 119 0048 00040240 		.word	1073873920
 120 004c 00000000 		.word	.LANCHOR0
 121 0050 00000000 		.word	hadc1
 122              		.cfi_endproc
 123              	.LFE253:
 125              		.section	.text.FetchWallSens,"ax",%progbits
 126              		.align	1
 127              		.global	FetchWallSens
 128              		.syntax unified
 129              		.thumb
 130              		.thumb_func
 132              	FetchWallSens:
 133              	.LFB254:
  30:Main/Src/analog.c **** 
  31:Main/Src/analog.c **** void FetchWallSens(){
 134              		.loc 1 31 21 view -0
 135              		.cfi_startproc
 136              		@ args = 0, pretend = 0, frame = 0
 137              		@ frame_needed = 0, uses_anonymous_args = 0
 138 0000 10B5     		push	{r4, lr}
 139              	.LCFI2:
 140              		.cfi_def_cfa_offset 8
 141              		.cfi_offset 4, -8
 142              		.cfi_offset 14, -4
  32:Main/Src/analog.c ****   if(senstype){
ARM GAS  C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s 			page 4


 143              		.loc 1 32 3 view .LVU14
 144              		.loc 1 32 6 is_stmt 0 view .LVU15
 145 0002 104B     		ldr	r3, .L15
 146 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 147              		.loc 1 32 5 view .LVU16
 148 0006 B3B1     		cbz	r3, .L12
  33:Main/Src/analog.c ****     sensval[0] = adcval[0];
 149              		.loc 1 33 5 is_stmt 1 view .LVU17
 150              		.loc 1 33 24 is_stmt 0 view .LVU18
 151 0008 0F4A     		ldr	r2, .L15+4
 152 000a 1188     		ldrh	r1, [r2]
 153              		.loc 1 33 16 view .LVU19
 154 000c 0F4B     		ldr	r3, .L15+8
 155 000e 1980     		strh	r1, [r3]	@ movhi
  34:Main/Src/analog.c ****     sensval[2] = adcval[2];
 156              		.loc 1 34 5 is_stmt 1 view .LVU20
 157              		.loc 1 34 24 is_stmt 0 view .LVU21
 158 0010 9288     		ldrh	r2, [r2, #4]
 159              		.loc 1 34 16 view .LVU22
 160 0012 9A80     		strh	r2, [r3, #4]	@ movhi
 161              	.L13:
  35:Main/Src/analog.c ****   }else{
  36:Main/Src/analog.c ****     sensval[1] = adcval[1];
  37:Main/Src/analog.c ****     sensval[3] = adcval[3];
  38:Main/Src/analog.c ****   }
  39:Main/Src/analog.c ****   HAL_GPIO_WritePin(LED_FR_L_GPIO_Port,LED_FR_L_Pin,0);
 162              		.loc 1 39 3 is_stmt 1 view .LVU23
 163 0014 0E4C     		ldr	r4, .L15+12
 164 0016 0022     		movs	r2, #0
 165 0018 1021     		movs	r1, #16
 166 001a 2046     		mov	r0, r4
 167 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
 168              	.LVL6:
  40:Main/Src/analog.c ****   HAL_GPIO_WritePin(LED_FL_R_GPIO_Port,LED_FL_R_Pin,0);
 169              		.loc 1 40 3 view .LVU24
 170 0020 0022     		movs	r2, #0
 171 0022 2021     		movs	r1, #32
 172 0024 2046     		mov	r0, r4
 173 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 174              	.LVL7:
  41:Main/Src/analog.c ****   senstype = 1-senstype;
 175              		.loc 1 41 3 view .LVU25
 176              		.loc 1 41 15 is_stmt 0 view .LVU26
 177 002a 064A     		ldr	r2, .L15
 178 002c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 179 002e C3F10103 		rsb	r3, r3, #1
 180              		.loc 1 41 12 view .LVU27
 181 0032 1370     		strb	r3, [r2]
  42:Main/Src/analog.c **** }
 182              		.loc 1 42 1 view .LVU28
 183 0034 10BD     		pop	{r4, pc}
 184              	.L12:
  36:Main/Src/analog.c ****     sensval[3] = adcval[3];
 185              		.loc 1 36 5 is_stmt 1 view .LVU29
  36:Main/Src/analog.c ****     sensval[3] = adcval[3];
 186              		.loc 1 36 24 is_stmt 0 view .LVU30
 187 0036 044A     		ldr	r2, .L15+4
ARM GAS  C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s 			page 5


 188 0038 5188     		ldrh	r1, [r2, #2]
  36:Main/Src/analog.c ****     sensval[3] = adcval[3];
 189              		.loc 1 36 16 view .LVU31
 190 003a 044B     		ldr	r3, .L15+8
 191 003c 5980     		strh	r1, [r3, #2]	@ movhi
  37:Main/Src/analog.c ****   }
 192              		.loc 1 37 5 is_stmt 1 view .LVU32
  37:Main/Src/analog.c ****   }
 193              		.loc 1 37 24 is_stmt 0 view .LVU33
 194 003e D288     		ldrh	r2, [r2, #6]
  37:Main/Src/analog.c ****   }
 195              		.loc 1 37 16 view .LVU34
 196 0040 DA80     		strh	r2, [r3, #6]	@ movhi
 197 0042 E7E7     		b	.L13
 198              	.L16:
 199              		.align	2
 200              	.L15:
 201 0044 00000000 		.word	.LANCHOR1
 202 0048 00000000 		.word	.LANCHOR0
 203 004c 00000000 		.word	.LANCHOR2
 204 0050 00040240 		.word	1073873920
 205              		.cfi_endproc
 206              	.LFE254:
 208              		.global	__aeabi_i2d
 209              		.global	__aeabi_dmul
 210              		.global	__aeabi_dadd
 211              		.global	__aeabi_d2f
 212              		.global	__aeabi_f2d
 213              		.section	.text.GetBattVoltage,"ax",%progbits
 214              		.align	1
 215              		.global	GetBattVoltage
 216              		.syntax unified
 217              		.thumb
 218              		.thumb_func
 220              	GetBattVoltage:
 221              	.LFB255:
  43:Main/Src/analog.c **** 
  44:Main/Src/analog.c **** void GetBattVoltage(){
 222              		.loc 1 44 22 is_stmt 1 view -0
 223              		.cfi_startproc
 224              		@ args = 0, pretend = 0, frame = 0
 225              		@ frame_needed = 0, uses_anonymous_args = 0
 226 0000 10B5     		push	{r4, lr}
 227              	.LCFI3:
 228              		.cfi_def_cfa_offset 8
 229              		.cfi_offset 4, -8
 230              		.cfi_offset 14, -4
  45:Main/Src/analog.c ****   vbat = 3.3 * (adcval[4] / 4096.0) * 2.;
 231              		.loc 1 45 3 view .LVU36
 232              		.loc 1 45 27 is_stmt 0 view .LVU37
 233 0002 154B     		ldr	r3, .L19+16
 234 0004 1889     		ldrh	r0, [r3, #8]
 235 0006 FFF7FEFF 		bl	__aeabi_i2d
 236              	.LVL8:
 237 000a 0022     		movs	r2, #0
 238 000c 134B     		ldr	r3, .L19+20
 239 000e FFF7FEFF 		bl	__aeabi_dmul
ARM GAS  C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s 			page 6


 240              	.LVL9:
 241              		.loc 1 45 14 view .LVU38
 242 0012 0DA3     		adr	r3, .L19
 243 0014 D3E90023 		ldrd	r2, [r3]
 244 0018 FFF7FEFF 		bl	__aeabi_dmul
 245              	.LVL10:
 246 001c 0246     		mov	r2, r0
 247 001e 0B46     		mov	r3, r1
 248              		.loc 1 45 37 view .LVU39
 249 0020 FFF7FEFF 		bl	__aeabi_dadd
 250              	.LVL11:
 251 0024 FFF7FEFF 		bl	__aeabi_d2f
 252              	.LVL12:
 253              		.loc 1 45 8 view .LVU40
 254 0028 0D4C     		ldr	r4, .L19+24
 255 002a 2060     		str	r0, [r4]	@ float
  46:Main/Src/analog.c ****   vbat += VBATREF;
 256              		.loc 1 46 3 is_stmt 1 view .LVU41
 257              		.loc 1 46 8 is_stmt 0 view .LVU42
 258 002c FFF7FEFF 		bl	__aeabi_f2d
 259              	.LVL13:
 260 0030 07A3     		adr	r3, .L19+8
 261 0032 D3E90023 		ldrd	r2, [r3]
 262 0036 FFF7FEFF 		bl	__aeabi_dadd
 263              	.LVL14:
 264 003a FFF7FEFF 		bl	__aeabi_d2f
 265              	.LVL15:
 266 003e 2060     		str	r0, [r4]	@ float
  47:Main/Src/analog.c **** }...
 267              		.loc 1 47 1 view .LVU43
 268 0040 10BD     		pop	{r4, pc}
 269              	.L20:
 270 0042 00BFAFF3 		.align	3
 270      0080
 271              	.L19:
 272 0048 66666666 		.word	1717986918
 273 004c 66660A40 		.word	1074423398
 274 0050 295C8FC2 		.word	-1030792151
 275 0054 F528BC3F 		.word	1069295861
 276 0058 00000000 		.word	.LANCHOR0
 277 005c 0000303F 		.word	1060110336
 278 0060 00000000 		.word	.LANCHOR3
 279              		.cfi_endproc
 280              	.LFE255:
 282              		.global	vbat
 283              		.global	sensval
 284              		.global	adcval
 285              		.section	.bss.adcval,"aw",%nobits
 286              		.align	2
 287              		.set	.LANCHOR0,. + 0
 290              	adcval:
 291 0000 00000000 		.space	10
 291      00000000 
 291      0000
 292              		.section	.bss.senstype,"aw",%nobits
 293              		.set	.LANCHOR1,. + 0
 296              	senstype:
ARM GAS  C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s 			page 7


 297 0000 00       		.space	1
 298              		.section	.bss.sensval,"aw",%nobits
 299              		.align	2
 300              		.set	.LANCHOR2,. + 0
 303              	sensval:
 304 0000 00000000 		.space	8
 304      00000000 
 305              		.section	.bss.vbat,"aw",%nobits
 306              		.align	2
 307              		.set	.LANCHOR3,. + 0
 310              	vbat:
 311 0000 00000000 		.space	4
 312              		.text
 313              	.Letext0:
 314              		.file 2 "c:\\tools\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_default_type
 315              		.file 3 "c:\\tools\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 316              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f412cx.h"
 317              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 318              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 319              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 320              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_adc.h"
 321              		.file 9 "Main/Inc/analog.h"
 322              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
ARM GAS  C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 analog.c
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:20     .text.InitADCDMA:00000000 $t
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:26     .text.InitADCDMA:00000000 InitADCDMA
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:49     .text.InitADCDMA:00000010 $d
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:55     .text.TrigWallSens:00000000 $t
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:61     .text.TrigWallSens:00000000 TrigWallSens
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:118    .text.TrigWallSens:00000044 $d
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:126    .text.FetchWallSens:00000000 $t
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:132    .text.FetchWallSens:00000000 FetchWallSens
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:201    .text.FetchWallSens:00000044 $d
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:214    .text.GetBattVoltage:00000000 $t
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:220    .text.GetBattVoltage:00000000 GetBattVoltage
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:272    .text.GetBattVoltage:00000048 $d
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:310    .bss.vbat:00000000 vbat
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:303    .bss.sensval:00000000 sensval
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:290    .bss.adcval:00000000 adcval
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:286    .bss.adcval:00000000 $d
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:296    .bss.senstype:00000000 senstype
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:297    .bss.senstype:00000000 $d
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:299    .bss.sensval:00000000 $d
C:\Users\hide\AppData\Local\Temp\ccMeXx2m.s:306    .bss.vbat:00000000 $d

UNDEFINED SYMBOLS
HAL_ADC_Start_DMA
hadc1
HAL_GPIO_WritePin
__aeabi_i2d
__aeabi_dmul
__aeabi_dadd
__aeabi_d2f
__aeabi_f2d
