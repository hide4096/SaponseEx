ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"as5047p.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.AS5047P_CalcParity,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	AS5047P_CalcParity:
  26              	.LVL0:
  27              	.LFB3:
  28              		.file 1 "Core/Src/as5047p.c"
   1:Core/Src/as5047p.c **** /************************************************************************************
   2:Core/Src/as5047p.c **** *
   3:Core/Src/as5047p.c **** *	File:		as5047p.c
   4:Core/Src/as5047p.c **** *	Author:		Krzysztof Sawicki
   5:Core/Src/as5047p.c **** *	Brief:		Source file for Generic AS5047P driver.
   6:Core/Src/as5047p.c **** *
   7:Core/Src/as5047p.c **** *	Description:
   8:Core/Src/as5047p.c **** *	This is a generic (platform independent) AS5047P driver. Core language is C
   9:Core/Src/as5047p.c **** *	but file 'as5047p_hal.c' is also compilable by C++ compiler.
  10:Core/Src/as5047p.c **** *	Driver needs little effort to make it working. You need to go to file
  11:Core/Src/as5047p.c **** *	'as5047p_hal.c/cpp' and implement 5 functions where you find this annotation:
  12:Core/Src/as5047p.c **** *
  13:Core/Src/as5047p.c **** * 		!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
  14:Core/Src/as5047p.c **** *	 	!!! !!! MUST BE IMPLEMENTED BY THE USER !!! !!!
  15:Core/Src/as5047p.c **** *	 	!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
  16:Core/Src/as5047p.c **** *
  17:Core/Src/as5047p.c **** *	And that's it !
  18:Core/Src/as5047p.c **** *
  19:Core/Src/as5047p.c **** *	If you want to enable DEBUG mode, you can do it by defining AS5047P_USE_DEBUG
  20:Core/Src/as5047p.c **** *	to 1 (in file 'as5047.h').
  21:Core/Src/as5047p.c **** *
  22:Core/Src/as5047p.c **** *	If you want to save some memory space, you can exclude error message texts
  23:Core/Src/as5047p.c **** *	by defining AS5047P_SAVE_SPACE to 1 (in file 'as5047.h').It allows to save
  24:Core/Src/as5047p.c **** *	approx. 11kB of space.
  25:Core/Src/as5047p.c **** *
  26:Core/Src/as5047p.c **** *************************************************************************************/
  27:Core/Src/as5047p.c **** 
  28:Core/Src/as5047p.c **** #include "as5047p_hal.h"
  29:Core/Src/as5047p.c **** #include "as5047p.h"
  30:Core/Src/as5047p.c **** 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 2


  31:Core/Src/as5047p.c **** #if AS5047P_SAVE_SPACE == 1
  32:Core/Src/as5047p.c **** //--- Variable used for error message texts when memory space needs to be saved deactivated.
  33:Core/Src/as5047p.c **** static char * saveSpaceMsg = "No txt available. Save space mode is active.";
  34:Core/Src/as5047p.c **** #endif //AS5047P_SAVE_SPACE
  35:Core/Src/as5047p.c **** 
  36:Core/Src/as5047p.c **** 
  37:Core/Src/as5047p.c **** #if AS5047P_SAVE_SPACE == 0
  38:Core/Src/as5047p.c **** /************************************************************************************
  39:Core/Src/as5047p.c ****  *
  40:Core/Src/as5047p.c ****  * 	Variable: 	char errMesage[][]
  41:Core/Src/as5047p.c ****  * 	Access:		private
  42:Core/Src/as5047p.c ****  *
  43:Core/Src/as5047p.c ****  * 	Description:
  44:Core/Src/as5047p.c ****  *	This variable stores all strings related to error messages.
  45:Core/Src/as5047p.c ****  *	The row number is also the error code number.
  46:Core/Src/as5047p.c ****  *	This is a complete list of all possible encoder's errors.
  47:Core/Src/as5047p.c ****  *
  48:Core/Src/as5047p.c ****  ************************************************************************************/
  49:Core/Src/as5047p.c **** static char errMesage [AS5047P_ERRMSG_COUNT][AS5047P_ERRMSG_MAX_LEN] =
  50:Core/Src/as5047p.c **** {
  51:Core/Src/as5047p.c ****     "No error pending",	// 	[0]
  52:Core/Src/as5047p.c ****     "Low level SPI access returned error",	// 	[1]
  53:Core/Src/as5047p.c ****     "Framing error occurred in last Tx frame",	// 	[2]
  54:Core/Src/as5047p.c ****     "Parity bit error occurred in Rx frame",	// 	[3]
  55:Core/Src/as5047p.c ****     "",	// 	[4]
  56:Core/Src/as5047p.c ****     "",	// 	[5]
  57:Core/Src/as5047p.c ****     "",	// 	[6]
  58:Core/Src/as5047p.c ****     "",	// 	[7]
  59:Core/Src/as5047p.c ****     "",	// 	[8]
  60:Core/Src/as5047p.c ****     "",	// 	[9]
  61:Core/Src/as5047p.c ****     "Register with a given address doesn\'t exist",	// 	[10]
  62:Core/Src/as5047p.c ****     "Device not accessible on SPI line",	// 	[11]
  63:Core/Src/as5047p.c ****     "",	// 	[12]
  64:Core/Src/as5047p.c ****     "",	// 	[13]
  65:Core/Src/as5047p.c ****     "",	// 	[14]
  66:Core/Src/as5047p.c ****     "",	// 	[15]
  67:Core/Src/as5047p.c ****     "",	// 	[16]
  68:Core/Src/as5047p.c ****     "",	// 	[17]
  69:Core/Src/as5047p.c ****     "",	// 	[18]
  70:Core/Src/as5047p.c ****     "",	// 	[19]
  71:Core/Src/as5047p.c ****     "Register with a given address doesn\'t have write access or doesn\'t exist",	// 	[20]
  72:Core/Src/as5047p.c ****     "Register content verification failed after write operation",	// 	[21]
  73:Core/Src/as5047p.c ****     "Device not accessible on SPI line",	// 	[22]
  74:Core/Src/as5047p.c ****     "",	// 	[23]
  75:Core/Src/as5047p.c ****     "",	// 	[24]
  76:Core/Src/as5047p.c ****     "",	// 	[25]
  77:Core/Src/as5047p.c ****     "",	// 	[26]
  78:Core/Src/as5047p.c ****     "",	// 	[27]
  79:Core/Src/as5047p.c ****     "",	// 	[28]
  80:Core/Src/as5047p.c ****     "",	// 	[29]
  81:Core/Src/as5047p.c ****     "Low level hardware (SPI) init failed",	// 	[30]
  82:Core/Src/as5047p.c ****     "Cant acknowledge the error in ERRFL register in init routine",	// 	[31]
  83:Core/Src/as5047p.c ****     "",	// 	[32]
  84:Core/Src/as5047p.c ****     "",	// 	[33]
  85:Core/Src/as5047p.c ****     "",	// 	[34]
  86:Core/Src/as5047p.c ****     "",	// 	[35]
  87:Core/Src/as5047p.c ****     "",	// 	[36]
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 3


  88:Core/Src/as5047p.c ****     "",	// 	[37]
  89:Core/Src/as5047p.c ****     "",	// 	[38]
  90:Core/Src/as5047p.c ****     "",	// 	[39]
  91:Core/Src/as5047p.c ****     "Encoder not initialized while setting factory settings attempt",	// 	[40]
  92:Core/Src/as5047p.c ****     "",	// 	[41]
  93:Core/Src/as5047p.c ****     "",	// 	[42]
  94:Core/Src/as5047p.c ****     "",	// 	[43]
  95:Core/Src/as5047p.c ****     "",	// 	[44]
  96:Core/Src/as5047p.c ****     "",	// 	[45]
  97:Core/Src/as5047p.c ****     "",	// 	[46]
  98:Core/Src/as5047p.c ****     "",	// 	[47]
  99:Core/Src/as5047p.c ****     "",	// 	[48]
 100:Core/Src/as5047p.c ****     "",	// 	[49]
 101:Core/Src/as5047p.c ****     "Cant acknowledge the error in ERRFL register in reset routine",	// 	[50]
 102:Core/Src/as5047p.c ****     "Encoder not initialized while reset attempt",	// 	[51]
 103:Core/Src/as5047p.c ****     "",	// 	[52]
 104:Core/Src/as5047p.c ****     "",	// 	[53]
 105:Core/Src/as5047p.c ****     "",	// 	[54]
 106:Core/Src/as5047p.c ****     "",	// 	[55]
 107:Core/Src/as5047p.c ****     "",	// 	[56]
 108:Core/Src/as5047p.c ****     "",	// 	[57]
 109:Core/Src/as5047p.c ****     "",	// 	[58]
 110:Core/Src/as5047p.c ****     "",	// 	[59]
 111:Core/Src/as5047p.c ****     "Encoder not initialized while set field in register attempt",	// 	[60]
 112:Core/Src/as5047p.c ****     "",	// 	[61]
 113:Core/Src/as5047p.c ****     "",	// 	[62]
 114:Core/Src/as5047p.c ****     "",	// 	[63]
 115:Core/Src/as5047p.c ****     "",	// 	[64]
 116:Core/Src/as5047p.c ****     "",	// 	[65]
 117:Core/Src/as5047p.c ****     "",	// 	[66]
 118:Core/Src/as5047p.c ****     "",	// 	[67]
 119:Core/Src/as5047p.c ****     "",	// 	[68]
 120:Core/Src/as5047p.c ****     "",	// 	[69]
 121:Core/Src/as5047p.c ****     "Device not accessible on SPI line",	// 	[70]
 122:Core/Src/as5047p.c ****     "Magnetic field strength too low",	// 	[71]
 123:Core/Src/as5047p.c ****     "Magnetic field strength too high",	// 	[72]
 124:Core/Src/as5047p.c ****     "CORDIC overflow",	// 	[73]
 125:Core/Src/as5047p.c ****     "Magnet offset compensation error",	// 	[74]
 126:Core/Src/as5047p.c ****     "Encoder not initialized while position read attempt",	// 	[75]
 127:Core/Src/as5047p.c ****     "Encoder not calibrated (zero pos not set) while position read attempt",	// 	[76]
 128:Core/Src/as5047p.c ****     "",	// 	[77]
 129:Core/Src/as5047p.c ****     "",	// 	[78]
 130:Core/Src/as5047p.c ****     "",	// 	[79]
 131:Core/Src/as5047p.c ****     "Encoder not initialized while zero position set attempt",	// 	[80]
 132:Core/Src/as5047p.c ****     "",	// 	[81]
 133:Core/Src/as5047p.c ****     "",	// 	[82]
 134:Core/Src/as5047p.c ****     "",	// 	[83]
 135:Core/Src/as5047p.c ****     "",	// 	[84]
 136:Core/Src/as5047p.c ****     "",	// 	[85]
 137:Core/Src/as5047p.c ****     "",	// 	[86]
 138:Core/Src/as5047p.c ****     "",	// 	[87]
 139:Core/Src/as5047p.c ****     "",	// 	[88]
 140:Core/Src/as5047p.c ****     "",	// 	[89]
 141:Core/Src/as5047p.c ****     "Chosen ABI resolution is not correct",	// 	[90]
 142:Core/Src/as5047p.c ****     "Encoder not initialized while ABI resolution set attempt",	// 	[91]
 143:Core/Src/as5047p.c ****     "",	// 	[92]
 144:Core/Src/as5047p.c ****     "",	// 	[93]
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 4


 145:Core/Src/as5047p.c ****     "",	// 	[94]
 146:Core/Src/as5047p.c ****     "",	// 	[95]
 147:Core/Src/as5047p.c ****     "",	// 	[96]
 148:Core/Src/as5047p.c ****     "",	// 	[97]
 149:Core/Src/as5047p.c ****     "",	// 	[98]
 150:Core/Src/as5047p.c ****     "",	// 	[99]
 151:Core/Src/as5047p.c ****     "Timeout fired while waiting for OTP burn finish",	// 	[100]
 152:Core/Src/as5047p.c ****     "Guardband test failed while OTP burn. Reprogramming not allowed",	// 	[101]
 153:Core/Src/as5047p.c ****     "Encoder not initialized while OTP burn attempt",	// 	[102]
 154:Core/Src/as5047p.c ****     "",	// 	[103]
 155:Core/Src/as5047p.c ****     "",	// 	[104]
 156:Core/Src/as5047p.c ****     "",	// 	[105]
 157:Core/Src/as5047p.c ****     "",	// 	[106]
 158:Core/Src/as5047p.c ****     "",	// 	[107]
 159:Core/Src/as5047p.c ****     "",	// 	[108]
 160:Core/Src/as5047p.c ****     "",	// 	[109]
 161:Core/Src/as5047p.c ****     "",	// 	[110]
 162:Core/Src/as5047p.c ****     "",	// 	[111]
 163:Core/Src/as5047p.c ****     "",	// 	[112]
 164:Core/Src/as5047p.c ****     "",	// 	[113]
 165:Core/Src/as5047p.c ****     "",	// 	[114]
 166:Core/Src/as5047p.c ****     "",	// 	[115]
 167:Core/Src/as5047p.c ****     "",	// 	[116]
 168:Core/Src/as5047p.c ****     "",	// 	[117]
 169:Core/Src/as5047p.c ****     "",	// 	[118]
 170:Core/Src/as5047p.c ****     "",	// 	[119]
 171:Core/Src/as5047p.c ****     "",	// 	[120]
 172:Core/Src/as5047p.c ****     "",	// 	[121]
 173:Core/Src/as5047p.c ****     "",	// 	[122]
 174:Core/Src/as5047p.c ****     "",	// 	[123]
 175:Core/Src/as5047p.c ****     "",	// 	[124]
 176:Core/Src/as5047p.c ****     "",	// 	[125]
 177:Core/Src/as5047p.c ****     "",	// 	[126]
 178:Core/Src/as5047p.c ****     "",	// 	[127]
 179:Core/Src/as5047p.c ****     "",	// 	[128]
 180:Core/Src/as5047p.c ****     "",	// 	[129]
 181:Core/Src/as5047p.c ****     "",	// 	[130]
 182:Core/Src/as5047p.c ****     "",	// 	[131]
 183:Core/Src/as5047p.c ****     "",	// 	[132]
 184:Core/Src/as5047p.c ****     "",	// 	[133]
 185:Core/Src/as5047p.c ****     "",	// 	[134]
 186:Core/Src/as5047p.c ****     "",	// 	[135]
 187:Core/Src/as5047p.c ****     "",	// 	[136]
 188:Core/Src/as5047p.c ****     "",	// 	[137]
 189:Core/Src/as5047p.c ****     "",	// 	[138]
 190:Core/Src/as5047p.c ****     "",	// 	[139]
 191:Core/Src/as5047p.c **** 
 192:Core/Src/as5047p.c **** };
 193:Core/Src/as5047p.c **** #endif //AS5047P_SAVE_SPACE
 194:Core/Src/as5047p.c **** 
 195:Core/Src/as5047p.c **** /************************************************************************************
 196:Core/Src/as5047p.c ****  *
 197:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_CalcParity(v)
 198:Core/Src/as5047p.c ****  * 	Access:		private
 199:Core/Src/as5047p.c ****  * 	Inputs:
 200:Core/Src/as5047p.c ****  * 		v: 32 bits for which parity is to be calculated.
 201:Core/Src/as5047p.c ****  *
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 5


 202:Core/Src/as5047p.c ****  * 	Returns:
 203:Core/Src/as5047p.c ****  * 		0: Calculated parity is even.
 204:Core/Src/as5047p.c ****  * 		1: Calculated parity is odd.
 205:Core/Src/as5047p.c ****  *
 206:Core/Src/as5047p.c ****  * 	Description:
 207:Core/Src/as5047p.c ****  *	Function calculates parity bit for a given input v.
 208:Core/Src/as5047p.c ****  *
 209:Core/Src/as5047p.c ****  *	Calculations according to:
 210:Core/Src/as5047p.c ****  * 	http://www.graphics.stanford.edu/~seander/bithacks.html
 211:Core/Src/as5047p.c ****  *
 212:Core/Src/as5047p.c ****  *	Generates no error.
 213:Core/Src/as5047p.c ****  *
 214:Core/Src/as5047p.c ****  ************************************************************************************/
 215:Core/Src/as5047p.c **** static uint8_t AS5047P_CalcParity(uint32_t v)
 216:Core/Src/as5047p.c **** {
  29              		.loc 1 216 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 217:Core/Src/as5047p.c ****   v ^= v >> 1;
  34              		.loc 1 217 3 view .LVU1
  35              		.loc 1 217 5 is_stmt 0 view .LVU2
  36 0000 80EA5000 		eor	r0, r0, r0, lsr #1
  37              	.LVL1:
 218:Core/Src/as5047p.c ****   v ^= v >> 2;
  38              		.loc 1 218 3 is_stmt 1 view .LVU3
  39              		.loc 1 218 5 is_stmt 0 view .LVU4
  40 0004 80EA9000 		eor	r0, r0, r0, lsr #2
  41              	.LVL2:
 219:Core/Src/as5047p.c ****   v = (v & 0x11111111U) * 0x11111111U;
  42              		.loc 1 219 3 is_stmt 1 view .LVU5
  43              		.loc 1 219 10 is_stmt 0 view .LVU6
  44 0008 00F01130 		and	r0, r0, #286331153
  45              	.LVL3:
  46              		.loc 1 219 5 view .LVU7
  47 000c 4FF01133 		mov	r3, #286331153
  48 0010 03FB00F0 		mul	r0, r3, r0
  49              	.LVL4:
 220:Core/Src/as5047p.c ****   return (v >> 28) & 1;
  50              		.loc 1 220 3 is_stmt 1 view .LVU8
 221:Core/Src/as5047p.c **** }
  51              		.loc 1 221 1 is_stmt 0 view .LVU9
  52 0014 C0F30070 		ubfx	r0, r0, #28, #1
  53              	.LVL5:
  54              		.loc 1 221 1 view .LVU10
  55 0018 7047     		bx	lr
  56              		.cfi_endproc
  57              	.LFE3:
  59              		.section	.text.AS5047P_CountTrailZeros,"ax",%progbits
  60              		.align	1
  61              		.syntax unified
  62              		.thumb
  63              		.thumb_func
  65              	AS5047P_CountTrailZeros:
  66              	.LVL6:
  67              	.LFB4:
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 6


 222:Core/Src/as5047p.c **** 
 223:Core/Src/as5047p.c **** /************************************************************************************
 224:Core/Src/as5047p.c ****  *
 225:Core/Src/as5047p.c ****  * 	Function:  	AS5047P_CountTrailZeros(v)
 226:Core/Src/as5047p.c ****  * 	Access:		private
 227:Core/Src/as5047p.c ****  * 	Inputs:
 228:Core/Src/as5047p.c ****  * 		v: 32 bits for which trailing zeros is to be calculated.
 229:Core/Src/as5047p.c ****  *
 230:Core/Src/as5047p.c ****  * 	Returns:
 231:Core/Src/as5047p.c ****  * 		Number of trailing zeros.
 232:Core/Src/as5047p.c ****  *
 233:Core/Src/as5047p.c ****  * 	Description:
 234:Core/Src/as5047p.c ****  *	Count the consecutive zero bits (trailing) on the right with modulus
 235:Core/Src/as5047p.c ****  *	division and lookup table. According to:
 236:Core/Src/as5047p.c ****  * 	http://www.graphics.stanford.edu/~seander/bithacks.html
 237:Core/Src/as5047p.c ****  *
 238:Core/Src/as5047p.c ****  *	Generates no error.
 239:Core/Src/as5047p.c ****  *
 240:Core/Src/as5047p.c ****  ************************************************************************************/
 241:Core/Src/as5047p.c **** static uint8_t AS5047P_CountTrailZeros(uint32_t v)
 242:Core/Src/as5047p.c **** {
  68              		.loc 1 242 1 is_stmt 1 view -0
  69              		.cfi_startproc
  70              		@ args = 0, pretend = 0, frame = 152
  71              		@ frame_needed = 0, uses_anonymous_args = 0
  72              		.loc 1 242 1 is_stmt 0 view .LVU12
  73 0000 10B5     		push	{r4, lr}
  74              	.LCFI0:
  75              		.cfi_def_cfa_offset 8
  76              		.cfi_offset 4, -8
  77              		.cfi_offset 14, -4
  78 0002 A6B0     		sub	sp, sp, #152
  79              	.LCFI1:
  80              		.cfi_def_cfa_offset 160
  81 0004 0446     		mov	r4, r0
 243:Core/Src/as5047p.c ****   int Mod37BitPosition[] = // map a bit value mod 37 to its position
  82              		.loc 1 243 3 is_stmt 1 view .LVU13
  83              		.loc 1 243 7 is_stmt 0 view .LVU14
  84 0006 9422     		movs	r2, #148
  85 0008 0C49     		ldr	r1, .L4
  86 000a 01A8     		add	r0, sp, #4
  87              	.LVL7:
  88              		.loc 1 243 7 view .LVU15
  89 000c FFF7FEFF 		bl	memcpy
  90              	.LVL8:
 244:Core/Src/as5047p.c ****   {
 245:Core/Src/as5047p.c ****     32, 0, 1, 26, 2, 23, 27, 0, 3, 16, 24, 30, 28, 11, 0, 13, 4,
 246:Core/Src/as5047p.c ****     7, 17, 0, 25, 22, 31, 15, 29, 10, 12, 6, 0, 21, 14, 9, 5,
 247:Core/Src/as5047p.c ****     20, 8, 19, 18
 248:Core/Src/as5047p.c ****   };
 249:Core/Src/as5047p.c **** 
 250:Core/Src/as5047p.c ****   return Mod37BitPosition[(-v & v) % 37];
  91              		.loc 1 250 3 is_stmt 1 view .LVU16
  92              		.loc 1 250 28 is_stmt 0 view .LVU17
  93 0010 6342     		rsbs	r3, r4, #0
  94              		.loc 1 250 31 view .LVU18
  95 0012 03EA0400 		and	r0, r3, r4
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 7


  96              		.loc 1 250 36 view .LVU19
  97 0016 0A4B     		ldr	r3, .L4+4
  98 0018 A3FB0023 		umull	r2, r3, r3, r0
  99 001c C21A     		subs	r2, r0, r3
 100 001e 03EB5203 		add	r3, r3, r2, lsr #1
 101 0022 5B09     		lsrs	r3, r3, #5
 102 0024 03EBC302 		add	r2, r3, r3, lsl #3
 103 0028 03EB8203 		add	r3, r3, r2, lsl #2
 104 002c C31A     		subs	r3, r0, r3
 105              		.loc 1 250 26 view .LVU20
 106 002e 26AA     		add	r2, sp, #152
 107 0030 02EB8303 		add	r3, r2, r3, lsl #2
 251:Core/Src/as5047p.c **** 
 252:Core/Src/as5047p.c **** }
 108              		.loc 1 252 1 view .LVU21
 109 0034 13F8940C 		ldrb	r0, [r3, #-148]	@ zero_extendqisi2
 110 0038 26B0     		add	sp, sp, #152
 111              	.LCFI2:
 112              		.cfi_def_cfa_offset 8
 113              		@ sp needed
 114 003a 10BD     		pop	{r4, pc}
 115              	.LVL9:
 116              	.L5:
 117              		.loc 1 252 1 view .LVU22
 118              		.align	2
 119              	.L4:
 120 003c 00000000 		.word	.LANCHOR0
 121 0040 4D91CFBA 		.word	-1160801971
 122              		.cfi_endproc
 123              	.LFE4:
 125              		.section	.text.AS5047P_SetBitsAndShiftAndMask,"ax",%progbits
 126              		.align	1
 127              		.syntax unified
 128              		.thumb
 129              		.thumb_func
 131              	AS5047P_SetBitsAndShiftAndMask:
 132              	.LVL10:
 133              	.LFB5:
 253:Core/Src/as5047p.c **** 
 254:Core/Src/as5047p.c **** /************************************************************************************
 255:Core/Src/as5047p.c ****  *
 256:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_SetBitsAndShiftAndMask(fieldMask,fieldVal)
 257:Core/Src/as5047p.c ****  * 	Access:		private
 258:Core/Src/as5047p.c ****  * 	Inputs:
 259:Core/Src/as5047p.c ****  * 		fieldMask: 	Bit mask where fieldVal is to be set.
 260:Core/Src/as5047p.c ****  * 		fieldVal:	Value to be sen on fieldMask bits.
 261:Core/Src/as5047p.c ****  *
 262:Core/Src/as5047p.c ****  * 	Returns:
 263:Core/Src/as5047p.c ****  * 		Function returns fieldVal masked with fieldMask and shifted to the
 264:Core/Src/as5047p.c ****  * 		left by number of trailing zeros in fieldMask.
 265:Core/Src/as5047p.c ****  *
 266:Core/Src/as5047p.c ****  * 	Description:
 267:Core/Src/as5047p.c ****  *	See output description.
 268:Core/Src/as5047p.c ****  *
 269:Core/Src/as5047p.c ****  *	Generates no error.
 270:Core/Src/as5047p.c ****  *
 271:Core/Src/as5047p.c ****  ************************************************************************************/
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 8


 272:Core/Src/as5047p.c **** static uint16_t AS5047P_SetBitsAndShiftAndMask(uint16_t fieldMask, uint16_t fieldVal)
 273:Core/Src/as5047p.c **** {
 134              		.loc 1 273 1 is_stmt 1 view -0
 135              		.cfi_startproc
 136              		@ args = 0, pretend = 0, frame = 0
 137              		@ frame_needed = 0, uses_anonymous_args = 0
 138              		.loc 1 273 1 is_stmt 0 view .LVU24
 139 0000 38B5     		push	{r3, r4, r5, lr}
 140              	.LCFI3:
 141              		.cfi_def_cfa_offset 16
 142              		.cfi_offset 3, -16
 143              		.cfi_offset 4, -12
 144              		.cfi_offset 5, -8
 145              		.cfi_offset 14, -4
 146 0002 0546     		mov	r5, r0
 147 0004 0C46     		mov	r4, r1
 274:Core/Src/as5047p.c ****   return (fieldVal << AS5047P_CountTrailZeros(fieldMask) ) & fieldMask;
 148              		.loc 1 274 3 is_stmt 1 view .LVU25
 149              		.loc 1 274 23 is_stmt 0 view .LVU26
 150 0006 FFF7FEFF 		bl	AS5047P_CountTrailZeros
 151              	.LVL11:
 152              		.loc 1 274 20 view .LVU27
 153 000a 04FA00F0 		lsl	r0, r4, r0
 275:Core/Src/as5047p.c **** }
 154              		.loc 1 275 1 view .LVU28
 155 000e 2840     		ands	r0, r0, r5
 156 0010 38BD     		pop	{r3, r4, r5, pc}
 157              		.cfi_endproc
 158              	.LFE5:
 160              		.section	.text.AS5047P_IsParityOk,"ax",%progbits
 161              		.align	1
 162              		.syntax unified
 163              		.thumb
 164              		.thumb_func
 166              	AS5047P_IsParityOk:
 167              	.LVL12:
 168              	.LFB6:
 276:Core/Src/as5047p.c **** 
 277:Core/Src/as5047p.c **** /************************************************************************************
 278:Core/Src/as5047p.c ****  *
 279:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_IsParityOk(frameRx)
 280:Core/Src/as5047p.c ****  * 	Access:		private
 281:Core/Src/as5047p.c ****  * 	Inputs:
 282:Core/Src/as5047p.c ****  * 		frameRx:	16-bit raw frame received from AS5047P.
 283:Core/Src/as5047p.c ****  *
 284:Core/Src/as5047p.c ****  * 	Returns:
 285:Core/Src/as5047p.c ****  * 		true:		Parity check passed.
 286:Core/Src/as5047p.c ****  * 		false:		Parity check failed.
 287:Core/Src/as5047p.c ****  *
 288:Core/Src/as5047p.c ****  * 	Description:
 289:Core/Src/as5047p.c ****  *	Function as an input received raw frame received through SPI from AS5047P,
 290:Core/Src/as5047p.c ****  *	then the parity bit is calculated for bits [0-14] and result compared to
 291:Core/Src/as5047p.c ****  *	parity bit received (bit15).
 292:Core/Src/as5047p.c ****  *
 293:Core/Src/as5047p.c ****  *	Generates no error.
 294:Core/Src/as5047p.c ****  *
 295:Core/Src/as5047p.c ****  ************************************************************************************/
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 9


 296:Core/Src/as5047p.c **** static _Bool AS5047P_IsParityOk(uint16_t frameRx)
 297:Core/Src/as5047p.c **** {
 169              		.loc 1 297 1 is_stmt 1 view -0
 170              		.cfi_startproc
 171              		@ args = 0, pretend = 0, frame = 0
 172              		@ frame_needed = 0, uses_anonymous_args = 0
 173              		.loc 1 297 1 is_stmt 0 view .LVU30
 174 0000 10B5     		push	{r4, lr}
 175              	.LCFI4:
 176              		.cfi_def_cfa_offset 8
 177              		.cfi_offset 4, -8
 178              		.cfi_offset 14, -4
 298:Core/Src/as5047p.c ****   uint32_t parityReceived;
 179              		.loc 1 298 3 is_stmt 1 view .LVU31
 299:Core/Src/as5047p.c ****   uint32_t parityCalculated;
 180              		.loc 1 299 3 view .LVU32
 300:Core/Src/as5047p.c **** 
 301:Core/Src/as5047p.c ****   //--- Calculate parity for Rx frame
 302:Core/Src/as5047p.c ****   parityReceived = (frameRx & AS5047P_FRAME_PARD) >> 15;
 181              		.loc 1 302 3 view .LVU33
 182              		.loc 1 302 51 is_stmt 0 view .LVU34
 183 0002 C40B     		lsrs	r4, r0, #15
 184              	.LVL13:
 303:Core/Src/as5047p.c ****   parityCalculated = AS5047P_CalcParity( frameRx & (AS5047P_FRAME_DATA | AS5047P_FRAME_EF) );
 185              		.loc 1 303 3 is_stmt 1 view .LVU35
 186              		.loc 1 303 22 is_stmt 0 view .LVU36
 187 0004 C0F30E00 		ubfx	r0, r0, #0, #15
 188              	.LVL14:
 189              		.loc 1 303 22 view .LVU37
 190 0008 FFF7FEFF 		bl	AS5047P_CalcParity
 191              	.LVL15:
 304:Core/Src/as5047p.c **** 
 305:Core/Src/as5047p.c ****   //--- Parity check
 306:Core/Src/as5047p.c ****   if ( parityCalculated == parityReceived )
 192              		.loc 1 306 3 is_stmt 1 view .LVU38
 193              		.loc 1 306 6 is_stmt 0 view .LVU39
 194 000c 80B2     		uxth	r0, r0
 195              	.LVL16:
 196              		.loc 1 306 6 view .LVU40
 197 000e 8442     		cmp	r4, r0
 198 0010 01D0     		beq	.L12
 307:Core/Src/as5047p.c ****     return true;
 308:Core/Src/as5047p.c ****   else
 309:Core/Src/as5047p.c ****     return false;
 199              		.loc 1 309 12 view .LVU41
 200 0012 0020     		movs	r0, #0
 201              	.L9:
 310:Core/Src/as5047p.c **** 
 311:Core/Src/as5047p.c **** }
 202              		.loc 1 311 1 view .LVU42
 203 0014 10BD     		pop	{r4, pc}
 204              	.LVL17:
 205              	.L12:
 307:Core/Src/as5047p.c ****     return true;
 206              		.loc 1 307 12 view .LVU43
 207 0016 0120     		movs	r0, #1
 208 0018 FCE7     		b	.L9
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 10


 209              		.cfi_endproc
 210              	.LFE6:
 212              		.section	.text.AS5047P_HandleError,"ax",%progbits
 213              		.align	1
 214              		.syntax unified
 215              		.thumb
 216              		.thumb_func
 218              	AS5047P_HandleError:
 219              	.LVL18:
 220              	.LFB7:
 312:Core/Src/as5047p.c **** 
 313:Core/Src/as5047p.c **** /************************************************************************************
 314:Core/Src/as5047p.c ****  *
 315:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_HandleError(instance,errCode)
 316:Core/Src/as5047p.c ****  * 	Access:		private
 317:Core/Src/as5047p.c ****  * 	Inputs:
 318:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 319:Core/Src/as5047p.c ****  * 		errCode:	Error code to be set in the encoder's structure.
 320:Core/Src/as5047p.c ****  *
 321:Core/Src/as5047p.c ****  * 	Returns:
 322:Core/Src/as5047p.c ****  * 		Nothing.
 323:Core/Src/as5047p.c ****  *
 324:Core/Src/as5047p.c ****  * 	Description:
 325:Core/Src/as5047p.c ****  *	Function sets error code into the encoder's structure and (if AS5047P_USE_DEBUG
 326:Core/Src/as5047p.c ****  *	defined) calls AS5047P_HAL_Debug() to do extra debug-related tasks (printf).
 327:Core/Src/as5047p.c ****  *
 328:Core/Src/as5047p.c ****  *	Generates no error.
 329:Core/Src/as5047p.c ****  *
 330:Core/Src/as5047p.c ****  ************************************************************************************/
 331:Core/Src/as5047p.c **** static void AS5047P_HandleError(AS5047P_Instance * instance, int16_t errCode)
 332:Core/Src/as5047p.c **** {
 221              		.loc 1 332 1 is_stmt 1 view -0
 222              		.cfi_startproc
 223              		@ args = 0, pretend = 0, frame = 0
 224              		@ frame_needed = 0, uses_anonymous_args = 0
 225              		@ link register save eliminated.
 333:Core/Src/as5047p.c ****   //--- Allow only setting errors (no clear possible)
 334:Core/Src/as5047p.c ****     if( (instance->error.errorCode == 0) && (errCode != 0) )
 226              		.loc 1 334 5 view .LVU45
 227              		.loc 1 334 25 is_stmt 0 view .LVU46
 228 0000 B0F90830 		ldrsh	r3, [r0, #8]
 229              		.loc 1 334 7 view .LVU47
 230 0004 63B9     		cbnz	r3, .L13
 231              		.loc 1 334 42 discriminator 1 view .LVU48
 232 0006 59B1     		cbz	r1, .L13
 335:Core/Src/as5047p.c ****     {
 336:Core/Src/as5047p.c **** 	instance->error.errorCode = errCode;
 233              		.loc 1 336 2 is_stmt 1 view .LVU49
 234              		.loc 1 336 28 is_stmt 0 view .LVU50
 235 0008 0181     		strh	r1, [r0, #8]	@ movhi
 337:Core/Src/as5047p.c **** 
 338:Core/Src/as5047p.c **** 
 339:Core/Src/as5047p.c **** 	if(errCode < AS5047P_ERRMSG_COUNT)
 236              		.loc 1 339 2 is_stmt 1 view .LVU51
 237              		.loc 1 339 4 is_stmt 0 view .LVU52
 238 000a 8B29     		cmp	r1, #139
 239 000c 06DC     		bgt	.L15
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 11


 340:Core/Src/as5047p.c **** 	{
 341:Core/Src/as5047p.c **** 
 342:Core/Src/as5047p.c **** #if AS5047P_SAVE_SPACE == 1
 343:Core/Src/as5047p.c **** 	    instance->error.msg = saveSpaceMsg;
 344:Core/Src/as5047p.c **** #else
 345:Core/Src/as5047p.c **** 	    instance->error.msg = errMesage[errCode];
 240              		.loc 1 345 6 is_stmt 1 view .LVU53
 241              		.loc 1 345 28 is_stmt 0 view .LVU54
 242 000e 01EB8101 		add	r1, r1, r1, lsl #2
 243              	.LVL19:
 244              		.loc 1 345 28 view .LVU55
 245 0012 044B     		ldr	r3, .L16
 246 0014 03EB0111 		add	r1, r3, r1, lsl #4
 247              		.loc 1 345 26 view .LVU56
 248 0018 C160     		str	r1, [r0, #12]
 249 001a 7047     		bx	lr
 250              	.LVL20:
 251              	.L15:
 346:Core/Src/as5047p.c **** #endif //AS5047P_SAVE_SPACE
 347:Core/Src/as5047p.c **** 
 348:Core/Src/as5047p.c **** #if AS5047P_USE_DEBUG == 1
 349:Core/Src/as5047p.c **** 	    AS5047P_HAL_Debug(instance->id,instance->error.errorCode, instance->error.msg);
 350:Core/Src/as5047p.c **** #endif //AS5047P_USE_DEBUG
 351:Core/Src/as5047p.c **** 
 352:Core/Src/as5047p.c **** 	}
 353:Core/Src/as5047p.c **** 	else
 354:Core/Src/as5047p.c **** 	{
 355:Core/Src/as5047p.c **** 	    instance->error.msg = NULL;
 252              		.loc 1 355 6 is_stmt 1 view .LVU57
 253              		.loc 1 355 26 is_stmt 0 view .LVU58
 254 001c 0023     		movs	r3, #0
 255 001e C360     		str	r3, [r0, #12]
 256              	.L13:
 356:Core/Src/as5047p.c **** 	}
 357:Core/Src/as5047p.c ****     }
 358:Core/Src/as5047p.c **** }
 257              		.loc 1 358 1 view .LVU59
 258 0020 7047     		bx	lr
 259              	.L17:
 260 0022 00BF     		.align	2
 261              	.L16:
 262 0024 00000000 		.word	errMesage
 263              		.cfi_endproc
 264              	.LFE7:
 266              		.section	.text.AS5047P_ClearError,"ax",%progbits
 267              		.align	1
 268              		.syntax unified
 269              		.thumb
 270              		.thumb_func
 272              	AS5047P_ClearError:
 273              	.LVL21:
 274              	.LFB8:
 359:Core/Src/as5047p.c **** 
 360:Core/Src/as5047p.c **** /************************************************************************************
 361:Core/Src/as5047p.c ****  *
 362:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_ClearError(instance)
 363:Core/Src/as5047p.c ****  * 	Access:		private
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 12


 364:Core/Src/as5047p.c ****  * 	Inputs:
 365:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 366:Core/Src/as5047p.c ****  *
 367:Core/Src/as5047p.c ****  * 	Returns:
 368:Core/Src/as5047p.c ****  * 		Nothing.
 369:Core/Src/as5047p.c ****  *
 370:Core/Src/as5047p.c ****  * 	Description:
 371:Core/Src/as5047p.c ****  *	Function clears error code in the encoder's structure.
 372:Core/Src/as5047p.c ****  *
 373:Core/Src/as5047p.c ****  *	Generates no error.
 374:Core/Src/as5047p.c ****  *
 375:Core/Src/as5047p.c ****  ************************************************************************************/
 376:Core/Src/as5047p.c **** static void AS5047P_ClearError(AS5047P_Instance * instance)
 377:Core/Src/as5047p.c **** {
 275              		.loc 1 377 1 is_stmt 1 view -0
 276              		.cfi_startproc
 277              		@ args = 0, pretend = 0, frame = 0
 278              		@ frame_needed = 0, uses_anonymous_args = 0
 279              		@ link register save eliminated.
 378:Core/Src/as5047p.c **** 
 379:Core/Src/as5047p.c ****   instance->error.errorCode = 0;
 280              		.loc 1 379 3 view .LVU61
 281              		.loc 1 379 29 is_stmt 0 view .LVU62
 282 0000 0023     		movs	r3, #0
 283 0002 0381     		strh	r3, [r0, #8]	@ movhi
 380:Core/Src/as5047p.c **** 
 381:Core/Src/as5047p.c **** #if AS5047P_SAVE_SPACE == 1
 382:Core/Src/as5047p.c ****   instance->error.msg = saveSpaceMsg;
 383:Core/Src/as5047p.c **** #else
 384:Core/Src/as5047p.c ****   instance->error.msg = errMesage[0];
 284              		.loc 1 384 3 is_stmt 1 view .LVU63
 285              		.loc 1 384 23 is_stmt 0 view .LVU64
 286 0004 014B     		ldr	r3, .L19
 287 0006 C360     		str	r3, [r0, #12]
 385:Core/Src/as5047p.c **** #endif //AS5047P_SAVE_SPACE
 386:Core/Src/as5047p.c **** 
 387:Core/Src/as5047p.c **** #if AS5047P_USE_DEBUG == 1
 388:Core/Src/as5047p.c ****   AS5047P_HAL_Debug(instance->id,instance->error.errorCode, instance->error.msg);
 389:Core/Src/as5047p.c **** #endif //AS5047P_USE_DEBUG
 390:Core/Src/as5047p.c **** }
 288              		.loc 1 390 1 view .LVU65
 289 0008 7047     		bx	lr
 290              	.L20:
 291 000a 00BF     		.align	2
 292              	.L19:
 293 000c 00000000 		.word	errMesage
 294              		.cfi_endproc
 295              	.LFE8:
 297              		.section	.text.AS5047P_ReadWriteRaw,"ax",%progbits
 298              		.align	1
 299              		.global	AS5047P_ReadWriteRaw
 300              		.syntax unified
 301              		.thumb
 302              		.thumb_func
 304              	AS5047P_ReadWriteRaw:
 305              	.LVL22:
 306              	.LFB9:
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 13


 391:Core/Src/as5047p.c **** 
 392:Core/Src/as5047p.c **** /************************************************************************************
 393:Core/Src/as5047p.c ****  *
 394:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_ReadWriteRaw(instance,dataTx,rw)
 395:Core/Src/as5047p.c ****  * 	Access:		public
 396:Core/Src/as5047p.c ****  * 	Inputs:
 397:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 398:Core/Src/as5047p.c ****  * 		dataTx:		Raw 14bits of data to be sent to AS5047P.
 399:Core/Src/as5047p.c ****  * 		rw:		read/write modifier needed by AS5047P.
 400:Core/Src/as5047p.c ****  *
 401:Core/Src/as5047p.c ****  * 	Returns:
 402:Core/Src/as5047p.c ****  *		Data received or -1 (execution with errors).
 403:Core/Src/as5047p.c ****  *
 404:Core/Src/as5047p.c ****  * 	Description:
 405:Core/Src/as5047p.c ****  *	Function handles Rx/Tx transaction with AS5047P. It prepares 16bit Tx frame
 406:Core/Src/as5047p.c ****  *	combining dataTx, rw and the parity bit. Then it utilizes AS5047P_HAL_SPI_Trans-
 407:Core/Src/as5047p.c ****  *	action(), low level function for SPI transaction.
 408:Core/Src/as5047p.c ****  *
 409:Core/Src/as5047p.c ****  *	Generates error codes in range: [1-9]
 410:Core/Src/as5047p.c ****  *
 411:Core/Src/as5047p.c ****  ************************************************************************************/
 412:Core/Src/as5047p.c **** AS5047P_Result AS5047P_ReadWriteRaw(AS5047P_Instance * instance, AS5047P_Result dataTx, _Bool rw)
 413:Core/Src/as5047p.c **** {
 307              		.loc 1 413 1 is_stmt 1 view -0
 308              		.cfi_startproc
 309              		@ args = 0, pretend = 0, frame = 0
 310              		@ frame_needed = 0, uses_anonymous_args = 0
 311              		.loc 1 413 1 is_stmt 0 view .LVU67
 312 0000 38B5     		push	{r3, r4, r5, lr}
 313              	.LCFI5:
 314              		.cfi_def_cfa_offset 16
 315              		.cfi_offset 3, -16
 316              		.cfi_offset 4, -12
 317              		.cfi_offset 5, -8
 318              		.cfi_offset 14, -4
 319 0002 0546     		mov	r5, r0
 414:Core/Src/as5047p.c ****   uint8_t lowLevHwErr;
 320              		.loc 1 414 3 is_stmt 1 view .LVU68
 415:Core/Src/as5047p.c ****   AS5047P_Result frameTx;
 321              		.loc 1 415 3 view .LVU69
 416:Core/Src/as5047p.c **** 
 417:Core/Src/as5047p.c ****   //--- Set RW bit and calculate parity bit
 418:Core/Src/as5047p.c ****   frameTx = dataTx & AS5047P_FRAME_DATA;
 322              		.loc 1 418 3 view .LVU70
 323              		.loc 1 418 11 is_stmt 0 view .LVU71
 324 0004 C1F30D01 		ubfx	r1, r1, #0, #14
 325              	.LVL23:
 419:Core/Src/as5047p.c ****   frameTx |= rw << 14;
 326              		.loc 1 419 3 is_stmt 1 view .LVU72
 327              		.loc 1 419 11 is_stmt 0 view .LVU73
 328 0008 41EA8231 		orr	r1, r1, r2, lsl #14
 329              	.LVL24:
 330              		.loc 1 419 11 view .LVU74
 331 000c 0CB2     		sxth	r4, r1
 332              	.LVL25:
 420:Core/Src/as5047p.c ****   frameTx |= AS5047P_CalcParity(frameTx) << 15;
 333              		.loc 1 420 3 is_stmt 1 view .LVU75
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 14


 334              		.loc 1 420 14 is_stmt 0 view .LVU76
 335 000e 2046     		mov	r0, r4
 336              	.LVL26:
 337              		.loc 1 420 14 view .LVU77
 338 0010 FFF7FEFF 		bl	AS5047P_CalcParity
 339              	.LVL27:
 340              		.loc 1 420 11 view .LVU78
 341 0014 44EAC034 		orr	r4, r4, r0, lsl #15
 342              	.LVL28:
 421:Core/Src/as5047p.c **** 
 422:Core/Src/as5047p.c ****   instance->buffTx = frameTx;
 343              		.loc 1 422 3 is_stmt 1 view .LVU79
 344              		.loc 1 422 20 is_stmt 0 view .LVU80
 345 0018 AC80     		strh	r4, [r5, #4]	@ movhi
 423:Core/Src/as5047p.c ****   lowLevHwErr = AS5047P_HAL_SPI_Transaction( &(instance->buffTx), &(instance->buffRx), instance->id
 346              		.loc 1 423 3 is_stmt 1 view .LVU81
 347              		.loc 1 423 17 is_stmt 0 view .LVU82
 348 001a 2946     		mov	r1, r5
 349 001c 31F8022B 		ldrh	r2, [r1], #2
 350 0020 281D     		adds	r0, r5, #4
 351 0022 FFF7FEFF 		bl	AS5047P_HAL_SPI_Transaction
 352              	.LVL29:
 424:Core/Src/as5047p.c **** 
 425:Core/Src/as5047p.c ****   //--- Low level SPI access returned error
 426:Core/Src/as5047p.c ****   if( lowLevHwErr != 0 )
 353              		.loc 1 426 3 is_stmt 1 view .LVU83
 354              		.loc 1 426 5 is_stmt 0 view .LVU84
 355 0026 50B9     		cbnz	r0, .L27
 427:Core/Src/as5047p.c ****   {
 428:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,1);
 429:Core/Src/as5047p.c ****       return -1;
 430:Core/Src/as5047p.c ****   }
 431:Core/Src/as5047p.c ****   //--- Framing error occurred in last Tx frame
 432:Core/Src/as5047p.c ****   if( (instance->buffRx) & AS5047P_FRAME_EF)
 356              		.loc 1 432 3 is_stmt 1 view .LVU85
 357              		.loc 1 432 16 is_stmt 0 view .LVU86
 358 0028 6C88     		ldrh	r4, [r5, #2]
 359              	.LVL30:
 360              		.loc 1 432 5 view .LVU87
 361 002a 14F4804F 		tst	r4, #16384
 362 002e 0DD1     		bne	.L28
 433:Core/Src/as5047p.c ****   {
 434:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,2);
 435:Core/Src/as5047p.c ****       return -1;
 436:Core/Src/as5047p.c ****   }
 437:Core/Src/as5047p.c **** 
 438:Core/Src/as5047p.c ****   //--- Parity bit error occurred in Rx frame
 439:Core/Src/as5047p.c ****   if ( !AS5047P_IsParityOk(instance->buffRx) )
 363              		.loc 1 439 3 is_stmt 1 view .LVU88
 364              		.loc 1 439 9 is_stmt 0 view .LVU89
 365 0030 2046     		mov	r0, r4
 366              	.LVL31:
 367              		.loc 1 439 9 view .LVU90
 368 0032 FFF7FEFF 		bl	AS5047P_IsParityOk
 369              	.LVL32:
 370              		.loc 1 439 6 view .LVU91
 371 0036 80B1     		cbz	r0, .L29
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 15


 440:Core/Src/as5047p.c ****   {
 441:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,3);
 442:Core/Src/as5047p.c ****       return -1;
 443:Core/Src/as5047p.c ****   }
 444:Core/Src/as5047p.c **** 
 445:Core/Src/as5047p.c ****   return ( (instance->buffRx) & AS5047P_FRAME_DATA );
 372              		.loc 1 445 3 is_stmt 1 view .LVU92
 373              		.loc 1 445 31 is_stmt 0 view .LVU93
 374 0038 C4F30D00 		ubfx	r0, r4, #0, #14
 375              	.L23:
 446:Core/Src/as5047p.c **** 
 447:Core/Src/as5047p.c **** }
 376              		.loc 1 447 1 view .LVU94
 377 003c 38BD     		pop	{r3, r4, r5, pc}
 378              	.LVL33:
 379              	.L27:
 428:Core/Src/as5047p.c ****       return -1;
 380              		.loc 1 428 7 is_stmt 1 view .LVU95
 381 003e 0121     		movs	r1, #1
 382 0040 2846     		mov	r0, r5
 383              	.LVL34:
 428:Core/Src/as5047p.c ****       return -1;
 384              		.loc 1 428 7 is_stmt 0 view .LVU96
 385 0042 FFF7FEFF 		bl	AS5047P_HandleError
 386              	.LVL35:
 429:Core/Src/as5047p.c ****   }
 387              		.loc 1 429 7 is_stmt 1 view .LVU97
 429:Core/Src/as5047p.c ****   }
 388              		.loc 1 429 14 is_stmt 0 view .LVU98
 389 0046 4FF0FF30 		mov	r0, #-1
 390 004a F7E7     		b	.L23
 391              	.LVL36:
 392              	.L28:
 434:Core/Src/as5047p.c ****       return -1;
 393              		.loc 1 434 7 is_stmt 1 view .LVU99
 394 004c 0221     		movs	r1, #2
 395 004e 2846     		mov	r0, r5
 396              	.LVL37:
 434:Core/Src/as5047p.c ****       return -1;
 397              		.loc 1 434 7 is_stmt 0 view .LVU100
 398 0050 FFF7FEFF 		bl	AS5047P_HandleError
 399              	.LVL38:
 435:Core/Src/as5047p.c ****   }
 400              		.loc 1 435 7 is_stmt 1 view .LVU101
 435:Core/Src/as5047p.c ****   }
 401              		.loc 1 435 14 is_stmt 0 view .LVU102
 402 0054 4FF0FF30 		mov	r0, #-1
 403 0058 F0E7     		b	.L23
 404              	.L29:
 441:Core/Src/as5047p.c ****       return -1;
 405              		.loc 1 441 7 is_stmt 1 view .LVU103
 406 005a 0321     		movs	r1, #3
 407 005c 2846     		mov	r0, r5
 408 005e FFF7FEFF 		bl	AS5047P_HandleError
 409              	.LVL39:
 442:Core/Src/as5047p.c ****   }
 410              		.loc 1 442 7 view .LVU104
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 16


 442:Core/Src/as5047p.c ****   }
 411              		.loc 1 442 14 is_stmt 0 view .LVU105
 412 0062 4FF0FF30 		mov	r0, #-1
 413 0066 E9E7     		b	.L23
 414              		.cfi_endproc
 415              	.LFE9:
 417              		.section	.text.AS5047P_ReadRegister,"ax",%progbits
 418              		.align	1
 419              		.global	AS5047P_ReadRegister
 420              		.syntax unified
 421              		.thumb
 422              		.thumb_func
 424              	AS5047P_ReadRegister:
 425              	.LVL40:
 426              	.LFB10:
 448:Core/Src/as5047p.c **** 
 449:Core/Src/as5047p.c **** /************************************************************************************
 450:Core/Src/as5047p.c ****  *
 451:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_ReadRegister(instance,regAddr,devReachCheck)
 452:Core/Src/as5047p.c ****  * 	Access:		public
 453:Core/Src/as5047p.c ****  * 	Inputs:
 454:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 455:Core/Src/as5047p.c ****  * 		regAddr:	Register's address to be read.
 456:Core/Src/as5047p.c ****  * 		devReachCheck:	Device reachability check activation.
 457:Core/Src/as5047p.c ****  *
 458:Core/Src/as5047p.c ****  * 	Returns:
 459:Core/Src/as5047p.c ****  *		Register content or -1 (execution with errors).
 460:Core/Src/as5047p.c ****  *
 461:Core/Src/as5047p.c ****  * 	Description:
 462:Core/Src/as5047p.c ****  *	Function reads content of register given by address in regAddr input.
 463:Core/Src/as5047p.c ****  *	It needs 2 Rx/Tx SPI transaction when devReachCheck == false or 3 Rx/Tx
 464:Core/Src/as5047p.c ****  *	transactions if devReachCheck == true.
 465:Core/Src/as5047p.c ****  *	Input devReachCheck allows to check if AS5047P is reachable on SPI line by
 466:Core/Src/as5047p.c ****  *	requesting DIAAGC register content which is always non-zero.
 467:Core/Src/as5047p.c ****  *
 468:Core/Src/as5047p.c ****  *	Generates error codes in range: [10-19]
 469:Core/Src/as5047p.c ****  *
 470:Core/Src/as5047p.c ****  ************************************************************************************/
 471:Core/Src/as5047p.c **** AS5047P_Result AS5047P_ReadRegister(AS5047P_Instance * instance, uint16_t regAddr, _Bool devReachCh
 472:Core/Src/as5047p.c **** {
 427              		.loc 1 472 1 is_stmt 1 view -0
 428              		.cfi_startproc
 429              		@ args = 0, pretend = 0, frame = 0
 430              		@ frame_needed = 0, uses_anonymous_args = 0
 431              		.loc 1 472 1 is_stmt 0 view .LVU107
 432 0000 70B5     		push	{r4, r5, r6, lr}
 433              	.LCFI6:
 434              		.cfi_def_cfa_offset 16
 435              		.cfi_offset 4, -16
 436              		.cfi_offset 5, -12
 437              		.cfi_offset 6, -8
 438              		.cfi_offset 14, -4
 439 0002 0446     		mov	r4, r0
 440 0004 1646     		mov	r6, r2
 473:Core/Src/as5047p.c **** 
 474:Core/Src/as5047p.c ****   AS5047P_Result cmdResponse;
 441              		.loc 1 474 3 is_stmt 1 view .LVU108
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 17


 475:Core/Src/as5047p.c ****   AS5047P_Result tmpResponse;
 442              		.loc 1 475 3 view .LVU109
 476:Core/Src/as5047p.c **** 
 477:Core/Src/as5047p.c ****   //--- Register with a given address doesn\'t exist
 478:Core/Src/as5047p.c ****   if(!( (regAddr == AS5047P_NOP ) || (regAddr == AS5047P_ERRFL )  || (regAddr == AS5047P_PROG ) || 
 443              		.loc 1 478 3 view .LVU110
 444              		.loc 1 478 5 is_stmt 0 view .LVU111
 445 0006 0129     		cmp	r1, #1
 446 0008 19D9     		bls	.L31
 447              		.loc 1 478 67 discriminator 1 view .LVU112
 448 000a 0329     		cmp	r1, #3
 449 000c 17D0     		beq	.L31
 450              		.loc 1 478 97 discriminator 2 view .LVU113
 451 000e 43F6FC73 		movw	r3, #16380
 452 0012 9942     		cmp	r1, r3
 453 0014 13D0     		beq	.L31
 454              		.loc 1 478 129 discriminator 3 view .LVU114
 455 0016 43F6FD73 		movw	r3, #16381
 456 001a 9942     		cmp	r1, r3
 457 001c 0FD0     		beq	.L31
 479:Core/Src/as5047p.c ****       || (regAddr == AS5047P_ANGLEUNC ) || (regAddr == AS5047P_ANGLECOM ) || (regAddr == AS5047P_ZP
 458              		.loc 1 479 7 view .LVU115
 459 001e 43F6FE73 		movw	r3, #16382
 460 0022 9942     		cmp	r1, r3
 461 0024 0BD0     		beq	.L31
 462              		.loc 1 479 41 discriminator 1 view .LVU116
 463 0026 43F6FF73 		movw	r3, #16383
 464 002a 9942     		cmp	r1, r3
 465 002c 07D0     		beq	.L31
 466              		.loc 1 479 75 discriminator 2 view .LVU117
 467 002e 1729     		cmp	r1, #23
 468 0030 05D0     		beq	.L31
 469              		.loc 1 479 106 discriminator 3 view .LVU118
 470 0032 1629     		cmp	r1, #22
 471 0034 03D0     		beq	.L31
 472              		.loc 1 479 137 discriminator 4 view .LVU119
 473 0036 1829     		cmp	r1, #24
 474 0038 01D0     		beq	.L31
 478:Core/Src/as5047p.c ****       || (regAddr == AS5047P_ANGLEUNC ) || (regAddr == AS5047P_ANGLECOM ) || (regAddr == AS5047P_ZP
 475              		.loc 1 478 6 view .LVU120
 476 003a 1929     		cmp	r1, #25
 477 003c 0FD1     		bne	.L36
 478              	.L31:
 480:Core/Src/as5047p.c ****       || (regAddr == AS5047P_SETTINGS2 )) )
 481:Core/Src/as5047p.c ****   {
 482:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,10);
 483:Core/Src/as5047p.c ****       return -1;
 484:Core/Src/as5047p.c ****   }
 485:Core/Src/as5047p.c **** 
 486:Core/Src/as5047p.c ****   /************************************************************************************
 487:Core/Src/as5047p.c ****    *
 488:Core/Src/as5047p.c ****    * STEP 1: Transmit COMMAND AND receive DUMMY RESPONSE.
 489:Core/Src/as5047p.c ****    * 	     Ignore response and framing errors.
 490:Core/Src/as5047p.c ****    *
 491:Core/Src/as5047p.c ****    ************************************************************************************/
 492:Core/Src/as5047p.c **** 
 493:Core/Src/as5047p.c ****   AS5047P_ReadWriteRaw(instance, regAddr, AS5047P_ACCESS_READ);
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 18


 479              		.loc 1 493 3 is_stmt 1 view .LVU121
 480 003e 0122     		movs	r2, #1
 481              	.LVL41:
 482              		.loc 1 493 3 is_stmt 0 view .LVU122
 483 0040 09B2     		sxth	r1, r1
 484              		.loc 1 493 3 view .LVU123
 485 0042 2046     		mov	r0, r4
 486              	.LVL42:
 487              		.loc 1 493 3 view .LVU124
 488 0044 FFF7FEFF 		bl	AS5047P_ReadWriteRaw
 489              	.LVL43:
 494:Core/Src/as5047p.c **** 
 495:Core/Src/as5047p.c ****   /************************************************************************************
 496:Core/Src/as5047p.c ****    *
 497:Core/Src/as5047p.c ****    * STEP 2: Transmit DIAAGC command AND receive COMMAND RESPONSE.
 498:Core/Src/as5047p.c ****    * 	     DIAAGC register chosen because it's always non-zero value.
 499:Core/Src/as5047p.c ****    * 	     Then check if no framing error occurred.
 500:Core/Src/as5047p.c ****    * 	     Then check parity.
 501:Core/Src/as5047p.c ****    *
 502:Core/Src/as5047p.c ****    ************************************************************************************/
 503:Core/Src/as5047p.c **** 
 504:Core/Src/as5047p.c ****   cmdResponse = AS5047P_ReadWriteRaw(instance, AS5047P_DIAAGC , AS5047P_ACCESS_READ);
 490              		.loc 1 504 3 is_stmt 1 view .LVU125
 491              		.loc 1 504 17 is_stmt 0 view .LVU126
 492 0048 0122     		movs	r2, #1
 493 004a 43F6FC71 		movw	r1, #16380
 494 004e 2046     		mov	r0, r4
 495 0050 FFF7FEFF 		bl	AS5047P_ReadWriteRaw
 496              	.LVL44:
 505:Core/Src/as5047p.c **** 
 506:Core/Src/as5047p.c ****   //--- Framing error occurred in Tx or Rx frame
 507:Core/Src/as5047p.c ****   if( cmdResponse < 0 )
 497              		.loc 1 507 3 is_stmt 1 view .LVU127
 498              		.loc 1 507 5 is_stmt 0 view .LVU128
 499 0054 051E     		subs	r5, r0, #0
 500 0056 18DB     		blt	.L33
 508:Core/Src/as5047p.c ****   {
 509:Core/Src/as5047p.c **** 
 510:Core/Src/as5047p.c ****       return -1;
 511:Core/Src/as5047p.c ****   }
 512:Core/Src/as5047p.c **** 
 513:Core/Src/as5047p.c ****   /************************************************************************************
 514:Core/Src/as5047p.c ****    * STEP IS EXECUTED ONLY IF CHECK IS ENABLED (input devReachCheck) !
 515:Core/Src/as5047p.c ****    * STEP 3: Transmit NOP command AND receive DIAAGC RESPONSE.
 516:Core/Src/as5047p.c ****    * 	     Then check if no framing error occurred.
 517:Core/Src/as5047p.c ****    * 	     Then check parity.
 518:Core/Src/as5047p.c ****    * 	     Then check if response is non-zero. If this is not the case - as5047p or SPI
 519:Core/Src/as5047p.c ****    * 	     is faulty.
 520:Core/Src/as5047p.c ****    *
 521:Core/Src/as5047p.c ****    ************************************************************************************/
 522:Core/Src/as5047p.c ****   if( devReachCheck )
 501              		.loc 1 522 3 is_stmt 1 view .LVU129
 502              		.loc 1 522 5 is_stmt 0 view .LVU130
 503 0058 3EB9     		cbnz	r6, .L37
 504              	.LVL45:
 505              	.L32:
 523:Core/Src/as5047p.c ****   {
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 19


 524:Core/Src/as5047p.c ****     tmpResponse = AS5047P_ReadWriteRaw(instance, AS5047P_NOP , AS5047P_ACCESS_READ);
 525:Core/Src/as5047p.c **** 
 526:Core/Src/as5047p.c ****     //--- Framing error occurred in Tx or Rx frame
 527:Core/Src/as5047p.c ****     if( tmpResponse < 0 )
 528:Core/Src/as5047p.c ****     {
 529:Core/Src/as5047p.c **** 
 530:Core/Src/as5047p.c **** 	return -1;
 531:Core/Src/as5047p.c ****     }
 532:Core/Src/as5047p.c **** 
 533:Core/Src/as5047p.c ****     //--- Device not accessible on SPI line
 534:Core/Src/as5047p.c ****     if( tmpResponse == 0 )
 535:Core/Src/as5047p.c ****     {
 536:Core/Src/as5047p.c **** 	AS5047P_HandleError(instance,11);
 537:Core/Src/as5047p.c **** 	return -1;
 538:Core/Src/as5047p.c ****     }
 539:Core/Src/as5047p.c ****   }
 540:Core/Src/as5047p.c **** 
 541:Core/Src/as5047p.c ****   return cmdResponse;
 542:Core/Src/as5047p.c **** }
 506              		.loc 1 542 1 view .LVU131
 507 005a 2846     		mov	r0, r5
 508 005c 70BD     		pop	{r4, r5, r6, pc}
 509              	.LVL46:
 510              	.L36:
 482:Core/Src/as5047p.c ****       return -1;
 511              		.loc 1 482 7 is_stmt 1 view .LVU132
 512 005e 0A21     		movs	r1, #10
 513              	.LVL47:
 482:Core/Src/as5047p.c ****       return -1;
 514              		.loc 1 482 7 is_stmt 0 view .LVU133
 515 0060 FFF7FEFF 		bl	AS5047P_HandleError
 516              	.LVL48:
 483:Core/Src/as5047p.c ****   }
 517              		.loc 1 483 7 is_stmt 1 view .LVU134
 483:Core/Src/as5047p.c ****   }
 518              		.loc 1 483 14 is_stmt 0 view .LVU135
 519 0064 4FF0FF35 		mov	r5, #-1
 520 0068 F7E7     		b	.L32
 521              	.LVL49:
 522              	.L37:
 524:Core/Src/as5047p.c **** 
 523              		.loc 1 524 5 is_stmt 1 view .LVU136
 524:Core/Src/as5047p.c **** 
 524              		.loc 1 524 19 is_stmt 0 view .LVU137
 525 006a 0122     		movs	r2, #1
 526 006c 0021     		movs	r1, #0
 527 006e 2046     		mov	r0, r4
 528              	.LVL50:
 524:Core/Src/as5047p.c **** 
 529              		.loc 1 524 19 view .LVU138
 530 0070 FFF7FEFF 		bl	AS5047P_ReadWriteRaw
 531              	.LVL51:
 527:Core/Src/as5047p.c ****     {
 532              		.loc 1 527 5 is_stmt 1 view .LVU139
 527:Core/Src/as5047p.c ****     {
 533              		.loc 1 527 7 is_stmt 0 view .LVU140
 534 0074 0028     		cmp	r0, #0
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 20


 535              	.LVL52:
 527:Core/Src/as5047p.c ****     {
 536              		.loc 1 527 7 view .LVU141
 537 0076 0BDB     		blt	.L34
 534:Core/Src/as5047p.c ****     {
 538              		.loc 1 534 5 is_stmt 1 view .LVU142
 534:Core/Src/as5047p.c ****     {
 539              		.loc 1 534 7 is_stmt 0 view .LVU143
 540 0078 0028     		cmp	r0, #0
 541 007a EED1     		bne	.L32
 536:Core/Src/as5047p.c **** 	return -1;
 542              		.loc 1 536 2 is_stmt 1 view .LVU144
 543 007c 0B21     		movs	r1, #11
 544 007e 2046     		mov	r0, r4
 545 0080 FFF7FEFF 		bl	AS5047P_HandleError
 546              	.LVL53:
 537:Core/Src/as5047p.c ****     }
 547              		.loc 1 537 2 view .LVU145
 537:Core/Src/as5047p.c ****     }
 548              		.loc 1 537 9 is_stmt 0 view .LVU146
 549 0084 4FF0FF35 		mov	r5, #-1
 550 0088 E7E7     		b	.L32
 551              	.LVL54:
 552              	.L33:
 510:Core/Src/as5047p.c ****   }
 553              		.loc 1 510 14 view .LVU147
 554 008a 4FF0FF35 		mov	r5, #-1
 555 008e E4E7     		b	.L32
 556              	.LVL55:
 557              	.L34:
 530:Core/Src/as5047p.c ****     }
 558              		.loc 1 530 9 view .LVU148
 559 0090 4FF0FF35 		mov	r5, #-1
 560 0094 E1E7     		b	.L32
 561              		.cfi_endproc
 562              	.LFE10:
 564              		.section	.text.AS5047P_WriteRegister,"ax",%progbits
 565              		.align	1
 566              		.global	AS5047P_WriteRegister
 567              		.syntax unified
 568              		.thumb
 569              		.thumb_func
 571              	AS5047P_WriteRegister:
 572              	.LVL56:
 573              	.LFB11:
 543:Core/Src/as5047p.c **** 
 544:Core/Src/as5047p.c **** /************************************************************************************
 545:Core/Src/as5047p.c ****  *
 546:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_WriteRegister(instance,regAddr,newRegContent,
 547:Core/Src/as5047p.c ****  * 					      writeVerif,devReachCheck)
 548:Core/Src/as5047p.c ****  * 	Access:		public
 549:Core/Src/as5047p.c ****  * 	Inputs:
 550:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 551:Core/Src/as5047p.c ****  * 		regAddr:	Register's address to be written.
 552:Core/Src/as5047p.c ****  * 		newRegContent:	The Content that is to be written do the register.
 553:Core/Src/as5047p.c ****  * 		writeVerif:	Write verification activation.
 554:Core/Src/as5047p.c ****  * 		devReachCheck:	Device reachability check activation.
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 21


 555:Core/Src/as5047p.c ****  *
 556:Core/Src/as5047p.c ****  * 	Returns:
 557:Core/Src/as5047p.c ****  *		-1 : Execution with errors.
 558:Core/Src/as5047p.c ****  *		 0 : Success.
 559:Core/Src/as5047p.c ****  *
 560:Core/Src/as5047p.c ****  * 	Description:
 561:Core/Src/as5047p.c ****  *	Function writes content given by newRegContent input to the register given
 562:Core/Src/as5047p.c ****  *	by regAddr address.
 563:Core/Src/as5047p.c ****  *	Normally, if writeVerif == false AND devReachCheck == false
 564:Core/Src/as5047p.c ****  *	only 2 Rx/Tx SPI transactions are needed. writeVerif == true as well as
 565:Core/Src/as5047p.c ****  *	devReachCheck == true each need one additional Rx/Tx SPI transaction.
 566:Core/Src/as5047p.c ****  *
 567:Core/Src/as5047p.c ****  *	Input devReachCheck allows to check if AS5047P is reachable on SPI line by
 568:Core/Src/as5047p.c ****  *	requesting DIAAGC register content which is always non-zero.
 569:Core/Src/as5047p.c ****  *
 570:Core/Src/as5047p.c ****  *	Input writeVerif causes that additional read request is performed allowing
 571:Core/Src/as5047p.c ****  *	content verification after write.
 572:Core/Src/as5047p.c ****  *
 573:Core/Src/as5047p.c ****  *	Generates error codes in range: [20-29]
 574:Core/Src/as5047p.c ****  *
 575:Core/Src/as5047p.c ****  ************************************************************************************/
 576:Core/Src/as5047p.c **** AS5047P_ErrCode AS5047P_WriteRegister(AS5047P_Instance * instance, uint16_t regAddr, AS5047P_Result
 577:Core/Src/as5047p.c **** {
 574              		.loc 1 577 1 is_stmt 1 view -0
 575              		.cfi_startproc
 576              		@ args = 4, pretend = 0, frame = 0
 577              		@ frame_needed = 0, uses_anonymous_args = 0
 578              		.loc 1 577 1 is_stmt 0 view .LVU150
 579 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 580              	.LCFI7:
 581              		.cfi_def_cfa_offset 24
 582              		.cfi_offset 4, -24
 583              		.cfi_offset 5, -20
 584              		.cfi_offset 6, -16
 585              		.cfi_offset 7, -12
 586              		.cfi_offset 8, -8
 587              		.cfi_offset 14, -4
 588 0004 0746     		mov	r7, r0
 589 0006 0C46     		mov	r4, r1
 590 0008 1546     		mov	r5, r2
 591 000a 1E46     		mov	r6, r3
 592 000c 9DF81880 		ldrb	r8, [sp, #24]	@ zero_extendqisi2
 578:Core/Src/as5047p.c ****     AS5047P_Result tmpResponse;
 593              		.loc 1 578 5 is_stmt 1 view .LVU151
 579:Core/Src/as5047p.c ****     AS5047P_Result curRegContent;
 594              		.loc 1 579 5 view .LVU152
 580:Core/Src/as5047p.c **** 
 581:Core/Src/as5047p.c ****     //--- Register with a given address doesn\'t have write access or doesn\'t exist
 582:Core/Src/as5047p.c ****     if(!( (regAddr == AS5047P_PROG ) || (regAddr == AS5047P_ZPOSL )  || (regAddr == AS5047P_ZPOSM )
 595              		.loc 1 582 5 view .LVU153
 596              		.loc 1 582 7 is_stmt 0 view .LVU154
 597 0010 0329     		cmp	r1, #3
 598 0012 07D0     		beq	.L39
 599              		.loc 1 582 38 discriminator 1 view .LVU155
 600 0014 1729     		cmp	r1, #23
 601 0016 05D0     		beq	.L39
 602              		.loc 1 582 70 discriminator 2 view .LVU156
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 22


 603 0018 1629     		cmp	r1, #22
 604 001a 03D0     		beq	.L39
 605              		.loc 1 582 101 discriminator 3 view .LVU157
 606 001c 1829     		cmp	r1, #24
 607 001e 01D0     		beq	.L39
 608              		.loc 1 582 8 discriminator 4 view .LVU158
 609 0020 1929     		cmp	r1, #25
 610 0022 12D1     		bne	.L49
 611              	.L39:
 583:Core/Src/as5047p.c ****     {
 584:Core/Src/as5047p.c **** 	AS5047P_HandleError(instance,20);
 585:Core/Src/as5047p.c **** 	return -1;
 586:Core/Src/as5047p.c ****     }
 587:Core/Src/as5047p.c **** 
 588:Core/Src/as5047p.c ****     /************************************************************************************
 589:Core/Src/as5047p.c ****     *
 590:Core/Src/as5047p.c ****     * STEP 1: Transmit COMMAND and receive DUMMY RESPONSE.
 591:Core/Src/as5047p.c ****     * 	     Ignore response and EF flag.
 592:Core/Src/as5047p.c ****     *
 593:Core/Src/as5047p.c ****     *
 594:Core/Src/as5047p.c ****     ************************************************************************************/
 595:Core/Src/as5047p.c **** 
 596:Core/Src/as5047p.c ****     AS5047P_ReadWriteRaw(instance, regAddr, AS5047P_ACCESS_WRITE);
 612              		.loc 1 596 5 is_stmt 1 view .LVU159
 613 0024 0022     		movs	r2, #0
 614              	.LVL57:
 615              		.loc 1 596 5 is_stmt 0 view .LVU160
 616 0026 21B2     		sxth	r1, r4
 617              	.LVL58:
 618              		.loc 1 596 5 view .LVU161
 619 0028 3846     		mov	r0, r7
 620              	.LVL59:
 621              		.loc 1 596 5 view .LVU162
 622 002a FFF7FEFF 		bl	AS5047P_ReadWriteRaw
 623              	.LVL60:
 597:Core/Src/as5047p.c **** 
 598:Core/Src/as5047p.c ****     /************************************************************************************
 599:Core/Src/as5047p.c ****     *
 600:Core/Src/as5047p.c ****     * STEP 2: Transmit NEW CONTENT and receive PREVIOUS REGISTER CONTENT.
 601:Core/Src/as5047p.c ****     * 	     Then check if no framing error occurred.
 602:Core/Src/as5047p.c ****     *
 603:Core/Src/as5047p.c ****     ************************************************************************************/
 604:Core/Src/as5047p.c **** 
 605:Core/Src/as5047p.c ****     tmpResponse = AS5047P_ReadWriteRaw(instance, newRegContent, AS5047P_ACCESS_WRITE);
 624              		.loc 1 605 5 is_stmt 1 view .LVU163
 625              		.loc 1 605 19 is_stmt 0 view .LVU164
 626 002e 0022     		movs	r2, #0
 627 0030 2946     		mov	r1, r5
 628 0032 3846     		mov	r0, r7
 629 0034 FFF7FEFF 		bl	AS5047P_ReadWriteRaw
 630              	.LVL61:
 606:Core/Src/as5047p.c **** 
 607:Core/Src/as5047p.c ****     //--- Framing error occurred in Tx or Rx frame
 608:Core/Src/as5047p.c ****     if( tmpResponse < 0 )
 631              		.loc 1 608 5 is_stmt 1 view .LVU165
 632              		.loc 1 608 7 is_stmt 0 view .LVU166
 633 0038 0028     		cmp	r0, #0
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 23


 634 003a 33DB     		blt	.L43
 609:Core/Src/as5047p.c ****     {
 610:Core/Src/as5047p.c **** 
 611:Core/Src/as5047p.c **** 	return -1;
 612:Core/Src/as5047p.c ****     }
 613:Core/Src/as5047p.c **** 
 614:Core/Src/as5047p.c ****     /************************************************************************************
 615:Core/Src/as5047p.c ****     * STEP IS EXECUTED ONLY IF CONTENT VERIFICATION IS REQUESTED (input writeVerif) !
 616:Core/Src/as5047p.c ****     *
 617:Core/Src/as5047p.c ****     * STEP 3: Transmit DIAAGC AND receive CURRENT REGISTER CONTENT.
 618:Core/Src/as5047p.c ****     * 	     Then check if no framing error occurred.
 619:Core/Src/as5047p.c ****     * 	     Then check parity.
 620:Core/Src/as5047p.c ****     * 	     Then check if current content == user requested content
 621:Core/Src/as5047p.c ****     *
 622:Core/Src/as5047p.c ****     ************************************************************************************/
 623:Core/Src/as5047p.c ****     if(writeVerif)
 635              		.loc 1 623 5 is_stmt 1 view .LVU167
 636              		.loc 1 623 7 is_stmt 0 view .LVU168
 637 003c 5EB9     		cbnz	r6, .L50
 638              	.LVL62:
 639              	.L41:
 624:Core/Src/as5047p.c ****     {
 625:Core/Src/as5047p.c **** 
 626:Core/Src/as5047p.c ****       curRegContent = AS5047P_ReadWriteRaw(instance, AS5047P_DIAAGC , AS5047P_ACCESS_READ);
 627:Core/Src/as5047p.c **** 
 628:Core/Src/as5047p.c ****       //--- Framing error occurred in Tx or Rx frame
 629:Core/Src/as5047p.c ****       if( curRegContent < 0 )
 630:Core/Src/as5047p.c ****       {
 631:Core/Src/as5047p.c **** 
 632:Core/Src/as5047p.c **** 	  return -1;
 633:Core/Src/as5047p.c ****       }
 634:Core/Src/as5047p.c **** 
 635:Core/Src/as5047p.c ****       //--- For SETTINGS1 register bit0 is factory programmed to 1 (see datasheet)
 636:Core/Src/as5047p.c ****       if(regAddr == AS5047P_SETTINGS1 )
 637:Core/Src/as5047p.c ****       {
 638:Core/Src/as5047p.c **** 	  //--- Set Bit0 to 1 (factory preprogrammed to 1)
 639:Core/Src/as5047p.c **** 	  newRegContent = newRegContent | 0x0001;
 640:Core/Src/as5047p.c ****       }
 641:Core/Src/as5047p.c **** 
 642:Core/Src/as5047p.c ****       //--- Register content verification failed after write operation
 643:Core/Src/as5047p.c ****       if ( curRegContent != newRegContent )
 644:Core/Src/as5047p.c ****       {
 645:Core/Src/as5047p.c **** 	  AS5047P_HandleError(instance,21);
 646:Core/Src/as5047p.c **** 	  return -1;
 647:Core/Src/as5047p.c ****       }
 648:Core/Src/as5047p.c **** 
 649:Core/Src/as5047p.c ****     }
 650:Core/Src/as5047p.c **** 
 651:Core/Src/as5047p.c ****     /************************************************************************************
 652:Core/Src/as5047p.c ****      * STEP IS EXECUTED ONLY IF CHECK IS ENABLED (input devReachCheck) !
 653:Core/Src/as5047p.c ****      * STEP 4: Transmit NOP command AND receive DIAAGC RESPONSE.
 654:Core/Src/as5047p.c ****      * 	     Then check if no framing error occurred.
 655:Core/Src/as5047p.c ****      * 	     Then check parity.
 656:Core/Src/as5047p.c ****      * 	     Then check if response is non-zero. If this is not the case - as5047p or SPI
 657:Core/Src/as5047p.c ****      * 	     is faulty.
 658:Core/Src/as5047p.c ****      *
 659:Core/Src/as5047p.c ****      ************************************************************************************/
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 24


 660:Core/Src/as5047p.c ****     if( devReachCheck )
 640              		.loc 1 660 5 is_stmt 1 view .LVU169
 641              		.loc 1 660 7 is_stmt 0 view .LVU170
 642 003e B8F1000F 		cmp	r8, #0
 643 0042 1ED1     		bne	.L51
 661:Core/Src/as5047p.c ****     {
 662:Core/Src/as5047p.c ****       tmpResponse = AS5047P_ReadWriteRaw(instance, AS5047P_NOP , AS5047P_ACCESS_READ);
 663:Core/Src/as5047p.c **** 
 664:Core/Src/as5047p.c ****       //--- Framing error occurred in Tx or Rx frame
 665:Core/Src/as5047p.c ****       if( tmpResponse < 0 )
 666:Core/Src/as5047p.c ****       {
 667:Core/Src/as5047p.c **** 
 668:Core/Src/as5047p.c **** 	  return -1;
 669:Core/Src/as5047p.c ****       }
 670:Core/Src/as5047p.c **** 
 671:Core/Src/as5047p.c ****       //--- Device not accessible on SPI line
 672:Core/Src/as5047p.c ****       if( tmpResponse == 0 )
 673:Core/Src/as5047p.c ****       {
 674:Core/Src/as5047p.c **** 	  AS5047P_HandleError(instance,22);
 675:Core/Src/as5047p.c **** 	  return -1;
 676:Core/Src/as5047p.c ****       }
 677:Core/Src/as5047p.c ****     }
 678:Core/Src/as5047p.c **** 
 679:Core/Src/as5047p.c ****     return 0;
 644              		.loc 1 679 12 view .LVU171
 645 0044 0020     		movs	r0, #0
 646              	.L40:
 680:Core/Src/as5047p.c **** }
 647              		.loc 1 680 1 view .LVU172
 648 0046 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 649              	.LVL63:
 650              	.L49:
 584:Core/Src/as5047p.c **** 	return -1;
 651              		.loc 1 584 2 is_stmt 1 view .LVU173
 652 004a 1421     		movs	r1, #20
 653              	.LVL64:
 584:Core/Src/as5047p.c **** 	return -1;
 654              		.loc 1 584 2 is_stmt 0 view .LVU174
 655 004c FFF7FEFF 		bl	AS5047P_HandleError
 656              	.LVL65:
 585:Core/Src/as5047p.c ****     }
 657              		.loc 1 585 2 is_stmt 1 view .LVU175
 585:Core/Src/as5047p.c ****     }
 658              		.loc 1 585 9 is_stmt 0 view .LVU176
 659 0050 4FF0FF30 		mov	r0, #-1
 660 0054 F7E7     		b	.L40
 661              	.LVL66:
 662              	.L50:
 626:Core/Src/as5047p.c **** 
 663              		.loc 1 626 7 is_stmt 1 view .LVU177
 626:Core/Src/as5047p.c **** 
 664              		.loc 1 626 23 is_stmt 0 view .LVU178
 665 0056 0122     		movs	r2, #1
 666 0058 43F6FC71 		movw	r1, #16380
 667 005c 3846     		mov	r0, r7
 668              	.LVL67:
 626:Core/Src/as5047p.c **** 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 25


 669              		.loc 1 626 23 view .LVU179
 670 005e FFF7FEFF 		bl	AS5047P_ReadWriteRaw
 671              	.LVL68:
 629:Core/Src/as5047p.c ****       {
 672              		.loc 1 629 7 is_stmt 1 view .LVU180
 629:Core/Src/as5047p.c ****       {
 673              		.loc 1 629 9 is_stmt 0 view .LVU181
 674 0062 0028     		cmp	r0, #0
 675              	.LVL69:
 629:Core/Src/as5047p.c ****       {
 676              		.loc 1 629 9 view .LVU182
 677 0064 21DB     		blt	.L44
 636:Core/Src/as5047p.c ****       {
 678              		.loc 1 636 7 is_stmt 1 view .LVU183
 636:Core/Src/as5047p.c ****       {
 679              		.loc 1 636 9 is_stmt 0 view .LVU184
 680 0066 182C     		cmp	r4, #24
 681 0068 08D0     		beq	.L52
 682              	.LVL70:
 683              	.L42:
 643:Core/Src/as5047p.c ****       {
 684              		.loc 1 643 7 is_stmt 1 view .LVU185
 643:Core/Src/as5047p.c ****       {
 685              		.loc 1 643 10 is_stmt 0 view .LVU186
 686 006a 8542     		cmp	r5, r0
 687 006c E7D0     		beq	.L41
 645:Core/Src/as5047p.c **** 	  return -1;
 688              		.loc 1 645 4 is_stmt 1 view .LVU187
 689 006e 1521     		movs	r1, #21
 690 0070 3846     		mov	r0, r7
 691 0072 FFF7FEFF 		bl	AS5047P_HandleError
 692              	.LVL71:
 646:Core/Src/as5047p.c ****       }
 693              		.loc 1 646 4 view .LVU188
 646:Core/Src/as5047p.c ****       }
 694              		.loc 1 646 11 is_stmt 0 view .LVU189
 695 0076 4FF0FF30 		mov	r0, #-1
 696 007a E4E7     		b	.L40
 697              	.LVL72:
 698              	.L52:
 639:Core/Src/as5047p.c ****       }
 699              		.loc 1 639 4 is_stmt 1 view .LVU190
 639:Core/Src/as5047p.c ****       }
 700              		.loc 1 639 18 is_stmt 0 view .LVU191
 701 007c 45F00105 		orr	r5, r5, #1
 702              	.LVL73:
 639:Core/Src/as5047p.c ****       }
 703              		.loc 1 639 18 view .LVU192
 704 0080 F3E7     		b	.L42
 705              	.LVL74:
 706              	.L51:
 662:Core/Src/as5047p.c **** 
 707              		.loc 1 662 7 is_stmt 1 view .LVU193
 662:Core/Src/as5047p.c **** 
 708              		.loc 1 662 21 is_stmt 0 view .LVU194
 709 0082 0122     		movs	r2, #1
 710 0084 0021     		movs	r1, #0
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 26


 711 0086 3846     		mov	r0, r7
 712 0088 FFF7FEFF 		bl	AS5047P_ReadWriteRaw
 713              	.LVL75:
 665:Core/Src/as5047p.c ****       {
 714              		.loc 1 665 7 is_stmt 1 view .LVU195
 665:Core/Src/as5047p.c ****       {
 715              		.loc 1 665 9 is_stmt 0 view .LVU196
 716 008c 0028     		cmp	r0, #0
 717              	.LVL76:
 665:Core/Src/as5047p.c ****       {
 718              		.loc 1 665 9 view .LVU197
 719 008e 0FDB     		blt	.L46
 672:Core/Src/as5047p.c ****       {
 720              		.loc 1 672 7 is_stmt 1 view .LVU198
 672:Core/Src/as5047p.c ****       {
 721              		.loc 1 672 9 is_stmt 0 view .LVU199
 722 0090 08B1     		cbz	r0, .L53
 679:Core/Src/as5047p.c **** }
 723              		.loc 1 679 12 view .LVU200
 724 0092 0020     		movs	r0, #0
 725 0094 D7E7     		b	.L40
 726              	.L53:
 674:Core/Src/as5047p.c **** 	  return -1;
 727              		.loc 1 674 4 is_stmt 1 view .LVU201
 728 0096 1621     		movs	r1, #22
 729 0098 3846     		mov	r0, r7
 730 009a FFF7FEFF 		bl	AS5047P_HandleError
 731              	.LVL77:
 675:Core/Src/as5047p.c ****       }
 732              		.loc 1 675 4 view .LVU202
 675:Core/Src/as5047p.c ****       }
 733              		.loc 1 675 11 is_stmt 0 view .LVU203
 734 009e 4FF0FF30 		mov	r0, #-1
 735 00a2 D0E7     		b	.L40
 736              	.LVL78:
 737              	.L43:
 611:Core/Src/as5047p.c ****     }
 738              		.loc 1 611 9 view .LVU204
 739 00a4 4FF0FF30 		mov	r0, #-1
 740              	.LVL79:
 611:Core/Src/as5047p.c ****     }
 741              		.loc 1 611 9 view .LVU205
 742 00a8 CDE7     		b	.L40
 743              	.L44:
 632:Core/Src/as5047p.c ****       }
 744              		.loc 1 632 11 view .LVU206
 745 00aa 4FF0FF30 		mov	r0, #-1
 746 00ae CAE7     		b	.L40
 747              	.LVL80:
 748              	.L46:
 668:Core/Src/as5047p.c ****       }
 749              		.loc 1 668 11 view .LVU207
 750 00b0 4FF0FF30 		mov	r0, #-1
 751 00b4 C7E7     		b	.L40
 752              		.cfi_endproc
 753              	.LFE11:
 755              		.section	.text.AS5047P_Init,"ax",%progbits
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 27


 756              		.align	1
 757              		.global	AS5047P_Init
 758              		.syntax unified
 759              		.thumb
 760              		.thumb_func
 762              	AS5047P_Init:
 763              	.LVL81:
 764              	.LFB12:
 681:Core/Src/as5047p.c **** 
 682:Core/Src/as5047p.c **** /************************************************************************************
 683:Core/Src/as5047p.c ****  *
 684:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_Init(instance)
 685:Core/Src/as5047p.c ****  * 	Access:		public
 686:Core/Src/as5047p.c ****  * 	Inputs:
 687:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 688:Core/Src/as5047p.c ****  *		id: ID number uniquely identifies an SPI's slave. Relation between
 689:Core/Src/as5047p.c ****  *		slave's id and physical CS line is defined in file as5047p_hal.c .
 690:Core/Src/as5047p.c ****  * 	Returns:
 691:Core/Src/as5047p.c ****  *		-1 : Execution with errors or ERRFL errors flush not possible
 692:Core/Src/as5047p.c ****  *		 0 : Success.
 693:Core/Src/as5047p.c ****  *
 694:Core/Src/as5047p.c ****  * 	Description:
 695:Core/Src/as5047p.c ****  *	Function initializes low level hardware, instance's structure, and clears all
 696:Core/Src/as5047p.c ****  *	pending errors in ERRFL register.
 697:Core/Src/as5047p.c ****  *
 698:Core/Src/as5047p.c ****  *	Generates error codes in range: [30-39]
 699:Core/Src/as5047p.c ****  *
 700:Core/Src/as5047p.c ****  ************************************************************************************/
 701:Core/Src/as5047p.c **** 
 702:Core/Src/as5047p.c **** AS5047P_ErrCode AS5047P_Init(AS5047P_Instance * instance, uint16_t id)
 703:Core/Src/as5047p.c **** {
 765              		.loc 1 703 1 is_stmt 1 view -0
 766              		.cfi_startproc
 767              		@ args = 0, pretend = 0, frame = 0
 768              		@ frame_needed = 0, uses_anonymous_args = 0
 769              		.loc 1 703 1 is_stmt 0 view .LVU209
 770 0000 38B5     		push	{r3, r4, r5, lr}
 771              	.LCFI8:
 772              		.cfi_def_cfa_offset 16
 773              		.cfi_offset 3, -16
 774              		.cfi_offset 4, -12
 775              		.cfi_offset 5, -8
 776              		.cfi_offset 14, -4
 777 0002 0446     		mov	r4, r0
 778 0004 0D46     		mov	r5, r1
 704:Core/Src/as5047p.c ****   AS5047P_Result readRegErrCode;
 779              		.loc 1 704 3 is_stmt 1 view .LVU210
 705:Core/Src/as5047p.c ****   AS5047P_Result halInitErrCode;
 780              		.loc 1 705 3 view .LVU211
 706:Core/Src/as5047p.c **** 
 707:Core/Src/as5047p.c ****   instance->zeroPosCalibrated = false;
 781              		.loc 1 707 3 view .LVU212
 782              		.loc 1 707 31 is_stmt 0 view .LVU213
 783 0006 0023     		movs	r3, #0
 784 0008 8371     		strb	r3, [r0, #6]
 708:Core/Src/as5047p.c ****   instance->initialized = true;
 785              		.loc 1 708 3 is_stmt 1 view .LVU214
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 28


 786              		.loc 1 708 25 is_stmt 0 view .LVU215
 787 000a 0123     		movs	r3, #1
 788 000c C371     		strb	r3, [r0, #7]
 709:Core/Src/as5047p.c ****   instance->id = id;
 789              		.loc 1 709 3 is_stmt 1 view .LVU216
 790              		.loc 1 709 16 is_stmt 0 view .LVU217
 791 000e 0180     		strh	r1, [r0]	@ movhi
 710:Core/Src/as5047p.c **** 
 711:Core/Src/as5047p.c ****   /************************************************************************************
 712:Core/Src/as5047p.c ****    *
 713:Core/Src/as5047p.c ****    *	AS5047P needs 10ms after power up to recover
 714:Core/Src/as5047p.c ****    *
 715:Core/Src/as5047p.c ****    ***********************************************************************************/
 716:Core/Src/as5047p.c ****   AS5047P_HAL_Delay_ms(10);
 792              		.loc 1 716 3 is_stmt 1 view .LVU218
 793 0010 0A20     		movs	r0, #10
 794              	.LVL82:
 795              		.loc 1 716 3 is_stmt 0 view .LVU219
 796 0012 FFF7FEFF 		bl	AS5047P_HAL_Delay_ms
 797              	.LVL83:
 717:Core/Src/as5047p.c **** 
 718:Core/Src/as5047p.c ****   //--- Init HAL functions (SPI, etc.)
 719:Core/Src/as5047p.c ****   halInitErrCode = AS5047P_HAL_Init(id);
 798              		.loc 1 719 3 is_stmt 1 view .LVU220
 799              		.loc 1 719 20 is_stmt 0 view .LVU221
 800 0016 2846     		mov	r0, r5
 801 0018 FFF7FEFF 		bl	AS5047P_HAL_Init
 802              	.LVL84:
 720:Core/Src/as5047p.c **** 
 721:Core/Src/as5047p.c ****   //--- Low level hardware (SPI) init failed
 722:Core/Src/as5047p.c ****   if( halInitErrCode != 0)
 803              		.loc 1 722 3 is_stmt 1 view .LVU222
 804              		.loc 1 722 5 is_stmt 0 view .LVU223
 805 001c 88B9     		cbnz	r0, .L60
 723:Core/Src/as5047p.c ****   {
 724:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,30);
 725:Core/Src/as5047p.c ****       return -1;
 726:Core/Src/as5047p.c ****   }
 727:Core/Src/as5047p.c **** 
 728:Core/Src/as5047p.c ****   //--- Flush error register
 729:Core/Src/as5047p.c ****   AS5047P_ReadRegister(instance, AS5047P_ERRFL ,AS5047P_OPT_ENABLED); // Clears errors
 806              		.loc 1 729 3 is_stmt 1 view .LVU224
 807 001e 0122     		movs	r2, #1
 808 0020 1146     		mov	r1, r2
 809 0022 2046     		mov	r0, r4
 810              	.LVL85:
 811              		.loc 1 729 3 is_stmt 0 view .LVU225
 812 0024 FFF7FEFF 		bl	AS5047P_ReadRegister
 813              	.LVL86:
 730:Core/Src/as5047p.c **** 
 731:Core/Src/as5047p.c ****   //--- Read error register value after clear. Must be zero.
 732:Core/Src/as5047p.c ****   readRegErrCode = AS5047P_ReadRegister(instance, AS5047P_ERRFL ,AS5047P_OPT_ENABLED);
 814              		.loc 1 732 3 is_stmt 1 view .LVU226
 815              		.loc 1 732 20 is_stmt 0 view .LVU227
 816 0028 0122     		movs	r2, #1
 817 002a 1146     		mov	r1, r2
 818 002c 2046     		mov	r0, r4
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 29


 819 002e FFF7FEFF 		bl	AS5047P_ReadRegister
 820              	.LVL87:
 733:Core/Src/as5047p.c **** 
 734:Core/Src/as5047p.c ****   //--- Error register read failed
 735:Core/Src/as5047p.c ****   if( readRegErrCode < 0)
 821              		.loc 1 735 3 is_stmt 1 view .LVU228
 822              		.loc 1 735 5 is_stmt 0 view .LVU229
 823 0032 0028     		cmp	r0, #0
 824              	.LVL88:
 825              		.loc 1 735 5 view .LVU230
 826 0034 13DB     		blt	.L58
 736:Core/Src/as5047p.c ****   {
 737:Core/Src/as5047p.c ****       return -1;
 738:Core/Src/as5047p.c ****   }
 739:Core/Src/as5047p.c **** 
 740:Core/Src/as5047p.c ****   //--- Cant acknowledge the error in ERRFL register in init routine
 741:Core/Src/as5047p.c ****   if( readRegErrCode > 0)
 827              		.loc 1 741 3 is_stmt 1 view .LVU231
 828              		.loc 1 741 5 is_stmt 0 view .LVU232
 829 0036 0BDC     		bgt	.L61
 742:Core/Src/as5047p.c ****   {
 743:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,31);
 744:Core/Src/as5047p.c ****       return -1;
 745:Core/Src/as5047p.c ****   }
 746:Core/Src/as5047p.c **** 
 747:Core/Src/as5047p.c ****   AS5047P_ClearError(instance);
 830              		.loc 1 747 3 is_stmt 1 view .LVU233
 831 0038 2046     		mov	r0, r4
 832 003a FFF7FEFF 		bl	AS5047P_ClearError
 833              	.LVL89:
 748:Core/Src/as5047p.c **** 
 749:Core/Src/as5047p.c **** 
 750:Core/Src/as5047p.c ****   return 0;
 834              		.loc 1 750 3 view .LVU234
 835              		.loc 1 750 10 is_stmt 0 view .LVU235
 836 003e 0020     		movs	r0, #0
 837              	.L56:
 751:Core/Src/as5047p.c **** }
 838              		.loc 1 751 1 view .LVU236
 839 0040 38BD     		pop	{r3, r4, r5, pc}
 840              	.LVL90:
 841              	.L60:
 724:Core/Src/as5047p.c ****       return -1;
 842              		.loc 1 724 7 is_stmt 1 view .LVU237
 843 0042 1E21     		movs	r1, #30
 844 0044 2046     		mov	r0, r4
 845              	.LVL91:
 724:Core/Src/as5047p.c ****       return -1;
 846              		.loc 1 724 7 is_stmt 0 view .LVU238
 847 0046 FFF7FEFF 		bl	AS5047P_HandleError
 848              	.LVL92:
 725:Core/Src/as5047p.c ****   }
 849              		.loc 1 725 7 is_stmt 1 view .LVU239
 725:Core/Src/as5047p.c ****   }
 850              		.loc 1 725 14 is_stmt 0 view .LVU240
 851 004a 4FF0FF30 		mov	r0, #-1
 852 004e F7E7     		b	.L56
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 30


 853              	.L61:
 743:Core/Src/as5047p.c ****       return -1;
 854              		.loc 1 743 7 is_stmt 1 view .LVU241
 855 0050 1F21     		movs	r1, #31
 856 0052 2046     		mov	r0, r4
 857 0054 FFF7FEFF 		bl	AS5047P_HandleError
 858              	.LVL93:
 744:Core/Src/as5047p.c ****   }
 859              		.loc 1 744 7 view .LVU242
 744:Core/Src/as5047p.c ****   }
 860              		.loc 1 744 14 is_stmt 0 view .LVU243
 861 0058 4FF0FF30 		mov	r0, #-1
 862 005c F0E7     		b	.L56
 863              	.L58:
 737:Core/Src/as5047p.c ****   }
 864              		.loc 1 737 14 view .LVU244
 865 005e 4FF0FF30 		mov	r0, #-1
 866 0062 EDE7     		b	.L56
 867              		.cfi_endproc
 868              	.LFE12:
 870              		.section	.text.AS5047P_SetFactorySettings,"ax",%progbits
 871              		.align	1
 872              		.global	AS5047P_SetFactorySettings
 873              		.syntax unified
 874              		.thumb
 875              		.thumb_func
 877              	AS5047P_SetFactorySettings:
 878              	.LVL94:
 879              	.LFB13:
 752:Core/Src/as5047p.c **** 
 753:Core/Src/as5047p.c **** /************************************************************************************
 754:Core/Src/as5047p.c ****  *
 755:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_SetFactorySettings(instance)
 756:Core/Src/as5047p.c ****  * 	Access:		public
 757:Core/Src/as5047p.c ****  * 	Inputs:
 758:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 759:Core/Src/as5047p.c ****  *
 760:Core/Src/as5047p.c ****  * 	Returns:
 761:Core/Src/as5047p.c ****  *		-1 : Execution with errors.
 762:Core/Src/as5047p.c ****  *		 0 : Success.
 763:Core/Src/as5047p.c ****  *
 764:Core/Src/as5047p.c ****  * 	Description:
 765:Core/Src/as5047p.c ****  *	Function sets SETTINGS1, SETTINGS2, ZPOSL, ZPOSM registers to their factory
 766:Core/Src/as5047p.c ****  *	values (before OTP burn).
 767:Core/Src/as5047p.c ****  *
 768:Core/Src/as5047p.c ****  *	Generates error codes in range: [40-49]
 769:Core/Src/as5047p.c ****  *
 770:Core/Src/as5047p.c ****  ************************************************************************************/
 771:Core/Src/as5047p.c **** AS5047P_ErrCode AS5047P_SetFactorySettings(AS5047P_Instance * instance)
 772:Core/Src/as5047p.c **** {
 880              		.loc 1 772 1 is_stmt 1 view -0
 881              		.cfi_startproc
 882              		@ args = 0, pretend = 0, frame = 0
 883              		@ frame_needed = 0, uses_anonymous_args = 0
 884              		.loc 1 772 1 is_stmt 0 view .LVU246
 885 0000 70B5     		push	{r4, r5, r6, lr}
 886              	.LCFI9:
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 31


 887              		.cfi_def_cfa_offset 16
 888              		.cfi_offset 4, -16
 889              		.cfi_offset 5, -12
 890              		.cfi_offset 6, -8
 891              		.cfi_offset 14, -4
 892 0002 82B0     		sub	sp, sp, #8
 893              	.LCFI10:
 894              		.cfi_def_cfa_offset 24
 895 0004 0646     		mov	r6, r0
 773:Core/Src/as5047p.c ****     AS5047P_ErrCode errCode = 0;
 896              		.loc 1 773 5 is_stmt 1 view .LVU247
 897              	.LVL95:
 774:Core/Src/as5047p.c **** 
 775:Core/Src/as5047p.c ****     if(instance->initialized)
 898              		.loc 1 775 5 view .LVU248
 899              		.loc 1 775 16 is_stmt 0 view .LVU249
 900 0006 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 901              		.loc 1 775 7 view .LVU250
 902 0008 2BB3     		cbz	r3, .L63
 776:Core/Src/as5047p.c ****     {
 777:Core/Src/as5047p.c **** 	errCode = AS5047P_WriteRegister(instance, AS5047P_SETTINGS1, 0x0001, AS5047P_OPT_ENABLED,AS5047P_O
 903              		.loc 1 777 2 is_stmt 1 view .LVU251
 904              		.loc 1 777 12 is_stmt 0 view .LVU252
 905 000a 0125     		movs	r5, #1
 906 000c 0095     		str	r5, [sp]
 907 000e 2B46     		mov	r3, r5
 908 0010 2A46     		mov	r2, r5
 909 0012 1821     		movs	r1, #24
 910 0014 FFF7FEFF 		bl	AS5047P_WriteRegister
 911              	.LVL96:
 912              		.loc 1 777 12 view .LVU253
 913 0018 0446     		mov	r4, r0
 914              	.LVL97:
 778:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_SETTINGS2, 0x000, AS5047P_OPT_ENABLED,AS5047P_O
 915              		.loc 1 778 2 is_stmt 1 view .LVU254
 916              		.loc 1 778 13 is_stmt 0 view .LVU255
 917 001a 0095     		str	r5, [sp]
 918 001c 2B46     		mov	r3, r5
 919 001e 0022     		movs	r2, #0
 920 0020 1921     		movs	r1, #25
 921 0022 3046     		mov	r0, r6
 922 0024 FFF7FEFF 		bl	AS5047P_WriteRegister
 923              	.LVL98:
 924              		.loc 1 778 10 view .LVU256
 925 0028 0443     		orrs	r4, r4, r0
 926              	.LVL99:
 927              		.loc 1 778 10 view .LVU257
 928 002a 24B2     		sxth	r4, r4
 929              	.LVL100:
 779:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_ZPOSL, 0x000, AS5047P_OPT_ENABLED,AS5047P_OPT_E
 930              		.loc 1 779 2 is_stmt 1 view .LVU258
 931              		.loc 1 779 13 is_stmt 0 view .LVU259
 932 002c 0095     		str	r5, [sp]
 933 002e 2B46     		mov	r3, r5
 934 0030 0022     		movs	r2, #0
 935 0032 1721     		movs	r1, #23
 936 0034 3046     		mov	r0, r6
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 32


 937 0036 FFF7FEFF 		bl	AS5047P_WriteRegister
 938              	.LVL101:
 939              		.loc 1 779 10 view .LVU260
 940 003a 0443     		orrs	r4, r4, r0
 941              	.LVL102:
 942              		.loc 1 779 10 view .LVU261
 943 003c 24B2     		sxth	r4, r4
 944              	.LVL103:
 780:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_ZPOSM, 0x000, AS5047P_OPT_ENABLED,AS5047P_OPT_E
 945              		.loc 1 780 2 is_stmt 1 view .LVU262
 946              		.loc 1 780 13 is_stmt 0 view .LVU263
 947 003e 0095     		str	r5, [sp]
 948 0040 2B46     		mov	r3, r5
 949 0042 0022     		movs	r2, #0
 950 0044 1621     		movs	r1, #22
 951 0046 3046     		mov	r0, r6
 952 0048 FFF7FEFF 		bl	AS5047P_WriteRegister
 953              	.LVL104:
 954              		.loc 1 780 10 view .LVU264
 955 004c 2043     		orrs	r0, r0, r4
 956 004e 00B2     		sxth	r0, r0
 957              	.LVL105:
 781:Core/Src/as5047p.c **** 
 782:Core/Src/as5047p.c ****         if( errCode != 0)
 958              		.loc 1 782 9 is_stmt 1 view .LVU265
 959              		.loc 1 782 11 is_stmt 0 view .LVU266
 960 0050 38B9     		cbnz	r0, .L67
 961              	.LVL106:
 962              	.L64:
 783:Core/Src/as5047p.c ****         {
 784:Core/Src/as5047p.c **** 
 785:Core/Src/as5047p.c ****   	  return -1;
 786:Core/Src/as5047p.c ****         }
 787:Core/Src/as5047p.c **** 
 788:Core/Src/as5047p.c ****     }
 789:Core/Src/as5047p.c ****     else
 790:Core/Src/as5047p.c ****     {
 791:Core/Src/as5047p.c ****         //--- Encoder not initialized while setting factory settings attempt
 792:Core/Src/as5047p.c ****         AS5047P_HandleError(instance,40);
 793:Core/Src/as5047p.c ****         return -1;
 794:Core/Src/as5047p.c ****     }
 795:Core/Src/as5047p.c **** 
 796:Core/Src/as5047p.c ****     return 0;
 797:Core/Src/as5047p.c **** }
 963              		.loc 1 797 1 view .LVU267
 964 0052 02B0     		add	sp, sp, #8
 965              	.LCFI11:
 966              		.cfi_remember_state
 967              		.cfi_def_cfa_offset 16
 968              		@ sp needed
 969 0054 70BD     		pop	{r4, r5, r6, pc}
 970              	.LVL107:
 971              	.L63:
 972              	.LCFI12:
 973              		.cfi_restore_state
 792:Core/Src/as5047p.c ****         return -1;
 974              		.loc 1 792 9 is_stmt 1 view .LVU268
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 33


 975 0056 2821     		movs	r1, #40
 976 0058 FFF7FEFF 		bl	AS5047P_HandleError
 977              	.LVL108:
 793:Core/Src/as5047p.c ****     }
 978              		.loc 1 793 9 view .LVU269
 793:Core/Src/as5047p.c ****     }
 979              		.loc 1 793 16 is_stmt 0 view .LVU270
 980 005c 4FF0FF30 		mov	r0, #-1
 981 0060 F7E7     		b	.L64
 982              	.LVL109:
 983              	.L67:
 785:Core/Src/as5047p.c ****         }
 984              		.loc 1 785 13 view .LVU271
 985 0062 4FF0FF30 		mov	r0, #-1
 986              	.LVL110:
 785:Core/Src/as5047p.c ****         }
 987              		.loc 1 785 13 view .LVU272
 988 0066 F4E7     		b	.L64
 989              		.cfi_endproc
 990              	.LFE13:
 992              		.section	.text.AS5047P_ErrorPending,"ax",%progbits
 993              		.align	1
 994              		.global	AS5047P_ErrorPending
 995              		.syntax unified
 996              		.thumb
 997              		.thumb_func
 999              	AS5047P_ErrorPending:
 1000              	.LVL111:
 1001              	.LFB14:
 798:Core/Src/as5047p.c **** 
 799:Core/Src/as5047p.c **** /************************************************************************************
 800:Core/Src/as5047p.c ****  *
 801:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_ErrorPending(instance)
 802:Core/Src/as5047p.c ****  * 	Access:		public
 803:Core/Src/as5047p.c ****  * 	Inputs:
 804:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 805:Core/Src/as5047p.c ****  *
 806:Core/Src/as5047p.c ****  * 	Returns:
 807:Core/Src/as5047p.c ****  *		true : Error is pending
 808:Core/Src/as5047p.c ****  *		false: No error.
 809:Core/Src/as5047p.c ****  *
 810:Core/Src/as5047p.c ****  * 	Description:
 811:Core/Src/as5047p.c ****  *	Function returns true if error is pending (wainting for acknowledge) or false
 812:Core/Src/as5047p.c ****  *	otherwise.
 813:Core/Src/as5047p.c ****  *
 814:Core/Src/as5047p.c ****  *	Generates no error.
 815:Core/Src/as5047p.c ****  *
 816:Core/Src/as5047p.c ****  ************************************************************************************/
 817:Core/Src/as5047p.c **** _Bool AS5047P_ErrorPending(AS5047P_Instance * instance)
 818:Core/Src/as5047p.c **** {
 1002              		.loc 1 818 1 is_stmt 1 view -0
 1003              		.cfi_startproc
 1004              		@ args = 0, pretend = 0, frame = 0
 1005              		@ frame_needed = 0, uses_anonymous_args = 0
 1006              		@ link register save eliminated.
 819:Core/Src/as5047p.c ****   return (instance->error).errorCode != 0 ? true : false;
 1007              		.loc 1 819 3 view .LVU274
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 34


 1008              		.loc 1 819 27 is_stmt 0 view .LVU275
 1009 0000 B0F90800 		ldrsh	r0, [r0, #8]
 1010              	.LVL112:
 820:Core/Src/as5047p.c **** }
 1011              		.loc 1 820 1 view .LVU276
 1012 0004 0038     		subs	r0, r0, #0
 1013 0006 18BF     		it	ne
 1014 0008 0120     		movne	r0, #1
 1015 000a 7047     		bx	lr
 1016              		.cfi_endproc
 1017              	.LFE14:
 1019              		.section	.text.AS5047P_GetError,"ax",%progbits
 1020              		.align	1
 1021              		.global	AS5047P_GetError
 1022              		.syntax unified
 1023              		.thumb
 1024              		.thumb_func
 1026              	AS5047P_GetError:
 1027              	.LVL113:
 1028              	.LFB15:
 821:Core/Src/as5047p.c **** 
 822:Core/Src/as5047p.c **** /************************************************************************************
 823:Core/Src/as5047p.c ****  *
 824:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_GetError(instance)
 825:Core/Src/as5047p.c ****  * 	Access:		public
 826:Core/Src/as5047p.c ****  * 	Inputs:
 827:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 828:Core/Src/as5047p.c ****  *
 829:Core/Src/as5047p.c ****  * 	Returns:
 830:Core/Src/as5047p.c ****  *		Error structure.
 831:Core/Src/as5047p.c ****  *
 832:Core/Src/as5047p.c ****  * 	Description:
 833:Core/Src/as5047p.c ****  *	Function returns private member 'error'.
 834:Core/Src/as5047p.c ****  *
 835:Core/Src/as5047p.c ****  *	Generates no error.
 836:Core/Src/as5047p.c ****  *
 837:Core/Src/as5047p.c ****  ************************************************************************************/
 838:Core/Src/as5047p.c **** AS5047P_Error AS5047P_GetError(AS5047P_Instance * instance)
 839:Core/Src/as5047p.c **** {
 1029              		.loc 1 839 1 is_stmt 1 view -0
 1030              		.cfi_startproc
 1031              		@ args = 0, pretend = 0, frame = 0
 1032              		@ frame_needed = 0, uses_anonymous_args = 0
 1033              		@ link register save eliminated.
 1034              		.loc 1 839 1 is_stmt 0 view .LVU278
 1035 0000 0346     		mov	r3, r0
 840:Core/Src/as5047p.c ****   return (instance->error);
 1036              		.loc 1 840 3 is_stmt 1 view .LVU279
 1037              		.loc 1 840 19 is_stmt 0 view .LVU280
 1038 0002 0831     		adds	r1, r1, #8
 1039              	.LVL114:
 1040              		.loc 1 840 19 view .LVU281
 1041 0004 03C9     		ldm	r1, {r0, r1}
 1042              	.LVL115:
 1043              		.loc 1 840 19 view .LVU282
 1044 0006 83E80300 		stm	r3, {r0, r1}
 841:Core/Src/as5047p.c **** }
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 35


 1045              		.loc 1 841 1 view .LVU283
 1046 000a 1846     		mov	r0, r3
 1047 000c 7047     		bx	lr
 1048              		.cfi_endproc
 1049              	.LFE15:
 1051              		.section	.text.AS5047P_ErrorAck,"ax",%progbits
 1052              		.align	1
 1053              		.global	AS5047P_ErrorAck
 1054              		.syntax unified
 1055              		.thumb
 1056              		.thumb_func
 1058              	AS5047P_ErrorAck:
 1059              	.LVL116:
 1060              	.LFB16:
 842:Core/Src/as5047p.c **** 
 843:Core/Src/as5047p.c **** /************************************************************************************
 844:Core/Src/as5047p.c ****  *
 845:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_ErrorAck(instance)
 846:Core/Src/as5047p.c ****  * 	Access:		public
 847:Core/Src/as5047p.c ****  * 	Inputs:
 848:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 849:Core/Src/as5047p.c ****  *
 850:Core/Src/as5047p.c ****  * 	Returns:
 851:Core/Src/as5047p.c ****  *		-1 : Execution with errors.
 852:Core/Src/as5047p.c ****  *		 0 : Success.
 853:Core/Src/as5047p.c ****  *
 854:Core/Src/as5047p.c ****  * 	Description:
 855:Core/Src/as5047p.c ****  *	Function acknowledges currently pending error.
 856:Core/Src/as5047p.c ****  *
 857:Core/Src/as5047p.c ****  *	Generates error codes in range: [50-59]
 858:Core/Src/as5047p.c ****  *
 859:Core/Src/as5047p.c ****  ************************************************************************************/
 860:Core/Src/as5047p.c **** AS5047P_ErrCode AS5047P_ErrorAck(AS5047P_Instance * instance)
 861:Core/Src/as5047p.c **** {
 1061              		.loc 1 861 1 is_stmt 1 view -0
 1062              		.cfi_startproc
 1063              		@ args = 0, pretend = 0, frame = 0
 1064              		@ frame_needed = 0, uses_anonymous_args = 0
 1065              		.loc 1 861 1 is_stmt 0 view .LVU285
 1066 0000 10B5     		push	{r4, lr}
 1067              	.LCFI13:
 1068              		.cfi_def_cfa_offset 8
 1069              		.cfi_offset 4, -8
 1070              		.cfi_offset 14, -4
 1071 0002 0446     		mov	r4, r0
 862:Core/Src/as5047p.c ****   AS5047P_Result readRegErrCode;
 1072              		.loc 1 862 3 is_stmt 1 view .LVU286
 863:Core/Src/as5047p.c **** 
 864:Core/Src/as5047p.c ****   if(instance->initialized)
 1073              		.loc 1 864 3 view .LVU287
 1074              		.loc 1 864 14 is_stmt 0 view .LVU288
 1075 0004 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 1076              		.loc 1 864 5 view .LVU289
 1077 0006 EBB1     		cbz	r3, .L71
 865:Core/Src/as5047p.c ****   {
 866:Core/Src/as5047p.c ****       if( AS5047P_ErrorPending(instance))
 1078              		.loc 1 866 7 is_stmt 1 view .LVU290
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 36


 1079              		.loc 1 866 11 is_stmt 0 view .LVU291
 1080 0008 FFF7FEFF 		bl	AS5047P_ErrorPending
 1081              	.LVL117:
 1082              		.loc 1 866 9 view .LVU292
 1083 000c 08B9     		cbnz	r0, .L77
 867:Core/Src/as5047p.c ****       {
 868:Core/Src/as5047p.c **** 	//--- Flush error register
 869:Core/Src/as5047p.c **** 	AS5047P_ReadRegister(instance, AS5047P_ERRFL ,AS5047P_OPT_ENABLED); // Clears errors
 870:Core/Src/as5047p.c **** 	readRegErrCode = AS5047P_ReadRegister(instance, AS5047P_ERRFL ,AS5047P_OPT_ENABLED); // Gets error
 871:Core/Src/as5047p.c **** 
 872:Core/Src/as5047p.c **** 	//--- AS5047P's error register flush failed
 873:Core/Src/as5047p.c **** 	if( readRegErrCode < 0)
 874:Core/Src/as5047p.c **** 	{
 875:Core/Src/as5047p.c **** 	    return -1;
 876:Core/Src/as5047p.c **** 	}
 877:Core/Src/as5047p.c **** 
 878:Core/Src/as5047p.c **** 	//--- Cant acknowledge the error in ERRFL register in reset routine
 879:Core/Src/as5047p.c **** 	if( readRegErrCode > 0)
 880:Core/Src/as5047p.c **** 	{
 881:Core/Src/as5047p.c **** 	    AS5047P_HandleError(instance,50);
 882:Core/Src/as5047p.c **** 	    return -1;
 883:Core/Src/as5047p.c **** 	}
 884:Core/Src/as5047p.c **** 
 885:Core/Src/as5047p.c **** 	AS5047P_ClearError(instance);
 886:Core/Src/as5047p.c ****       }
 887:Core/Src/as5047p.c **** 
 888:Core/Src/as5047p.c ****   }
 889:Core/Src/as5047p.c ****   else
 890:Core/Src/as5047p.c ****   {
 891:Core/Src/as5047p.c ****       //--- Encoder not initialized while reset attempt
 892:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,51);
 893:Core/Src/as5047p.c ****       return -1;
 894:Core/Src/as5047p.c ****   }
 895:Core/Src/as5047p.c **** 
 896:Core/Src/as5047p.c ****   return 0;
 1084              		.loc 1 896 10 view .LVU293
 1085 000e 0020     		movs	r0, #0
 1086              	.L72:
 897:Core/Src/as5047p.c **** }
 1087              		.loc 1 897 1 view .LVU294
 1088 0010 10BD     		pop	{r4, pc}
 1089              	.LVL118:
 1090              	.L77:
 869:Core/Src/as5047p.c **** 	readRegErrCode = AS5047P_ReadRegister(instance, AS5047P_ERRFL ,AS5047P_OPT_ENABLED); // Gets error
 1091              		.loc 1 869 2 is_stmt 1 view .LVU295
 1092 0012 0122     		movs	r2, #1
 1093 0014 1146     		mov	r1, r2
 1094 0016 2046     		mov	r0, r4
 1095 0018 FFF7FEFF 		bl	AS5047P_ReadRegister
 1096              	.LVL119:
 870:Core/Src/as5047p.c **** 
 1097              		.loc 1 870 2 view .LVU296
 870:Core/Src/as5047p.c **** 
 1098              		.loc 1 870 19 is_stmt 0 view .LVU297
 1099 001c 0122     		movs	r2, #1
 1100 001e 1146     		mov	r1, r2
 1101 0020 2046     		mov	r0, r4
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 37


 1102 0022 FFF7FEFF 		bl	AS5047P_ReadRegister
 1103              	.LVL120:
 873:Core/Src/as5047p.c **** 	{
 1104              		.loc 1 873 2 is_stmt 1 view .LVU298
 873:Core/Src/as5047p.c **** 	{
 1105              		.loc 1 873 4 is_stmt 0 view .LVU299
 1106 0026 0028     		cmp	r0, #0
 1107              	.LVL121:
 873:Core/Src/as5047p.c **** 	{
 1108              		.loc 1 873 4 view .LVU300
 1109 0028 12DB     		blt	.L75
 879:Core/Src/as5047p.c **** 	{
 1110              		.loc 1 879 2 is_stmt 1 view .LVU301
 879:Core/Src/as5047p.c **** 	{
 1111              		.loc 1 879 4 is_stmt 0 view .LVU302
 1112 002a 04DC     		bgt	.L78
 885:Core/Src/as5047p.c ****       }
 1113              		.loc 1 885 2 is_stmt 1 view .LVU303
 1114 002c 2046     		mov	r0, r4
 1115 002e FFF7FEFF 		bl	AS5047P_ClearError
 1116              	.LVL122:
 896:Core/Src/as5047p.c **** }
 1117              		.loc 1 896 10 is_stmt 0 view .LVU304
 1118 0032 0020     		movs	r0, #0
 1119 0034 ECE7     		b	.L72
 1120              	.L78:
 881:Core/Src/as5047p.c **** 	    return -1;
 1121              		.loc 1 881 6 is_stmt 1 view .LVU305
 1122 0036 3221     		movs	r1, #50
 1123 0038 2046     		mov	r0, r4
 1124 003a FFF7FEFF 		bl	AS5047P_HandleError
 1125              	.LVL123:
 882:Core/Src/as5047p.c **** 	}
 1126              		.loc 1 882 6 view .LVU306
 882:Core/Src/as5047p.c **** 	}
 1127              		.loc 1 882 13 is_stmt 0 view .LVU307
 1128 003e 4FF0FF30 		mov	r0, #-1
 1129 0042 E5E7     		b	.L72
 1130              	.LVL124:
 1131              	.L71:
 892:Core/Src/as5047p.c ****       return -1;
 1132              		.loc 1 892 7 is_stmt 1 view .LVU308
 1133 0044 3321     		movs	r1, #51
 1134 0046 FFF7FEFF 		bl	AS5047P_HandleError
 1135              	.LVL125:
 893:Core/Src/as5047p.c ****   }
 1136              		.loc 1 893 7 view .LVU309
 893:Core/Src/as5047p.c ****   }
 1137              		.loc 1 893 14 is_stmt 0 view .LVU310
 1138 004a 4FF0FF30 		mov	r0, #-1
 1139 004e DFE7     		b	.L72
 1140              	.L75:
 875:Core/Src/as5047p.c **** 	}
 1141              		.loc 1 875 13 view .LVU311
 1142 0050 4FF0FF30 		mov	r0, #-1
 1143 0054 DCE7     		b	.L72
 1144              		.cfi_endproc
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 38


 1145              	.LFE16:
 1147              		.section	.text.AS5047P_SetFieldInRegister,"ax",%progbits
 1148              		.align	1
 1149              		.global	AS5047P_SetFieldInRegister
 1150              		.syntax unified
 1151              		.thumb
 1152              		.thumb_func
 1154              	AS5047P_SetFieldInRegister:
 1155              	.LVL126:
 1156              	.LFB17:
 898:Core/Src/as5047p.c **** 
 899:Core/Src/as5047p.c **** /************************************************************************************
 900:Core/Src/as5047p.c ****  *
 901:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_SetFieldInRegister(instance,regAddr,fieldMask,fieldVal)
 902:Core/Src/as5047p.c ****  * 	Access:		public
 903:Core/Src/as5047p.c ****  * 	Inputs:
 904:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 905:Core/Src/as5047p.c ****  *
 906:Core/Src/as5047p.c ****  * 	Returns:
 907:Core/Src/as5047p.c ****  *		-1 : Execution with errors.
 908:Core/Src/as5047p.c ****  *		 0 : Success.
 909:Core/Src/as5047p.c ****  *
 910:Core/Src/as5047p.c ****  * 	Description:
 911:Core/Src/as5047p.c ****  *	Function sets SINGLE field in a register given by regAddr address. Field that
 912:Core/Src/as5047p.c ****  *	is to be set is given by its mask fieldMask, and value that is to be assigned
 913:Core/Src/as5047p.c ****  *	is given by fieldVal.
 914:Core/Src/as5047p.c ****  *
 915:Core/Src/as5047p.c ****  *
 916:Core/Src/as5047p.c ****  *	Generates error codes in range: [60-69]
 917:Core/Src/as5047p.c ****  *
 918:Core/Src/as5047p.c ****  ************************************************************************************/
 919:Core/Src/as5047p.c **** AS5047P_ErrCode AS5047P_SetFieldInRegister(AS5047P_Instance * instance, uint16_t regAddr, uint16_t 
 920:Core/Src/as5047p.c **** {
 1157              		.loc 1 920 1 is_stmt 1 view -0
 1158              		.cfi_startproc
 1159              		@ args = 0, pretend = 0, frame = 0
 1160              		@ frame_needed = 0, uses_anonymous_args = 0
 1161              		.loc 1 920 1 is_stmt 0 view .LVU313
 1162 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1163              	.LCFI14:
 1164              		.cfi_def_cfa_offset 24
 1165              		.cfi_offset 4, -24
 1166              		.cfi_offset 5, -20
 1167              		.cfi_offset 6, -16
 1168              		.cfi_offset 7, -12
 1169              		.cfi_offset 8, -8
 1170              		.cfi_offset 14, -4
 1171 0004 82B0     		sub	sp, sp, #8
 1172              	.LCFI15:
 1173              		.cfi_def_cfa_offset 32
 1174 0006 0546     		mov	r5, r0
 1175 0008 9846     		mov	r8, r3
 921:Core/Src/as5047p.c ****   AS5047P_Result regContent;
 1176              		.loc 1 921 3 is_stmt 1 view .LVU314
 922:Core/Src/as5047p.c ****   AS5047P_ErrCode errCode = 0;
 1177              		.loc 1 922 3 view .LVU315
 1178              	.LVL127:
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 39


 923:Core/Src/as5047p.c **** 
 924:Core/Src/as5047p.c ****   if(instance->initialized)
 1179              		.loc 1 924 3 view .LVU316
 1180              		.loc 1 924 14 is_stmt 0 view .LVU317
 1181 000a C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 1182              	.LVL128:
 1183              		.loc 1 924 5 view .LVU318
 1184 000c EBB1     		cbz	r3, .L80
 1185 000e 0E46     		mov	r6, r1
 1186 0010 1746     		mov	r7, r2
 925:Core/Src/as5047p.c ****   {
 926:Core/Src/as5047p.c ****      /************************************************************************************
 927:Core/Src/as5047p.c ****      *
 928:Core/Src/as5047p.c ****      * STEP 1:  Read current register content - need to keep N/A bits unchanged.
 929:Core/Src/as5047p.c ****      * 	 	Modify requested bits.
 930:Core/Src/as5047p.c ****      *
 931:Core/Src/as5047p.c ****      ************************************************************************************/
 932:Core/Src/as5047p.c **** 
 933:Core/Src/as5047p.c ****     regContent = AS5047P_ReadRegister(instance, regAddr,AS5047P_OPT_ENABLED);
 1187              		.loc 1 933 5 is_stmt 1 view .LVU319
 1188              		.loc 1 933 18 is_stmt 0 view .LVU320
 1189 0012 0122     		movs	r2, #1
 1190              	.LVL129:
 1191              		.loc 1 933 18 view .LVU321
 1192 0014 FFF7FEFF 		bl	AS5047P_ReadRegister
 1193              	.LVL130:
 934:Core/Src/as5047p.c **** 
 935:Core/Src/as5047p.c ****     if(regContent < 0 )
 1194              		.loc 1 935 5 is_stmt 1 view .LVU322
 1195              		.loc 1 935 7 is_stmt 0 view .LVU323
 1196 0018 B0F1000C 		subs	ip, r0, #0
 1197 001c 1BDB     		blt	.L82
 936:Core/Src/as5047p.c ****     {
 937:Core/Src/as5047p.c **** 
 938:Core/Src/as5047p.c **** 	return -1;
 939:Core/Src/as5047p.c ****     }
 940:Core/Src/as5047p.c **** 
 941:Core/Src/as5047p.c ****     regContent &= (~fieldMask); // Clear field bits
 1198              		.loc 1 941 5 is_stmt 1 view .LVU324
 1199              		.loc 1 941 16 is_stmt 0 view .LVU325
 1200 001e 2CEA070C 		bic	ip, ip, r7
 1201 0022 0FFA8CF4 		sxth	r4, ip
 1202              	.LVL131:
 942:Core/Src/as5047p.c ****     regContent |= AS5047P_SetBitsAndShiftAndMask(fieldMask, fieldVal); // Set relevant shifted and 
 1203              		.loc 1 942 5 is_stmt 1 view .LVU326
 1204              		.loc 1 942 19 is_stmt 0 view .LVU327
 1205 0026 4146     		mov	r1, r8
 1206 0028 3846     		mov	r0, r7
 1207 002a FFF7FEFF 		bl	AS5047P_SetBitsAndShiftAndMask
 1208              	.LVL132:
 1209 002e 02B2     		sxth	r2, r0
 1210              	.LVL133:
 943:Core/Src/as5047p.c **** 
 944:Core/Src/as5047p.c ****     /************************************************************************************
 945:Core/Src/as5047p.c ****     *
 946:Core/Src/as5047p.c ****     * STEP 2:  Write new register content.
 947:Core/Src/as5047p.c ****     *
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 40


 948:Core/Src/as5047p.c ****     ************************************************************************************/
 949:Core/Src/as5047p.c **** 
 950:Core/Src/as5047p.c ****     errCode = AS5047P_WriteRegister(instance, regAddr,regContent,AS5047P_OPT_ENABLED,AS5047P_OPT_EN
 1211              		.loc 1 950 5 is_stmt 1 view .LVU328
 1212              		.loc 1 950 15 is_stmt 0 view .LVU329
 1213 0030 0123     		movs	r3, #1
 1214 0032 0093     		str	r3, [sp]
 1215 0034 2243     		orrs	r2, r2, r4
 1216              	.LVL134:
 1217              		.loc 1 950 15 view .LVU330
 1218 0036 3146     		mov	r1, r6
 1219 0038 2846     		mov	r0, r5
 1220 003a FFF7FEFF 		bl	AS5047P_WriteRegister
 1221              	.LVL135:
 951:Core/Src/as5047p.c **** 
 952:Core/Src/as5047p.c ****     if(errCode < 0 )
 1222              		.loc 1 952 5 is_stmt 1 view .LVU331
 1223              		.loc 1 952 7 is_stmt 0 view .LVU332
 1224 003e 0028     		cmp	r0, #0
 1225 0040 0CDB     		blt	.L83
 953:Core/Src/as5047p.c ****     {
 954:Core/Src/as5047p.c **** 
 955:Core/Src/as5047p.c **** 	return -1;
 956:Core/Src/as5047p.c ****     }
 957:Core/Src/as5047p.c **** 
 958:Core/Src/as5047p.c ****   }
 959:Core/Src/as5047p.c ****   else
 960:Core/Src/as5047p.c ****   {
 961:Core/Src/as5047p.c ****       //--- Encoder not initialized while set field in register attempt
 962:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,60);
 963:Core/Src/as5047p.c ****       return -1;
 964:Core/Src/as5047p.c ****   }
 965:Core/Src/as5047p.c **** 
 966:Core/Src/as5047p.c ****   return 0;
 1226              		.loc 1 966 10 view .LVU333
 1227 0042 0020     		movs	r0, #0
 1228              	.LVL136:
 1229              	.L81:
 967:Core/Src/as5047p.c **** }
 1230              		.loc 1 967 1 view .LVU334
 1231 0044 02B0     		add	sp, sp, #8
 1232              	.LCFI16:
 1233              		.cfi_remember_state
 1234              		.cfi_def_cfa_offset 24
 1235              		@ sp needed
 1236 0046 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1237              	.LVL137:
 1238              	.L80:
 1239              	.LCFI17:
 1240              		.cfi_restore_state
 962:Core/Src/as5047p.c ****       return -1;
 1241              		.loc 1 962 7 is_stmt 1 view .LVU335
 1242 004a 3C21     		movs	r1, #60
 1243              	.LVL138:
 962:Core/Src/as5047p.c ****       return -1;
 1244              		.loc 1 962 7 is_stmt 0 view .LVU336
 1245 004c FFF7FEFF 		bl	AS5047P_HandleError
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 41


 1246              	.LVL139:
 963:Core/Src/as5047p.c ****   }
 1247              		.loc 1 963 7 is_stmt 1 view .LVU337
 963:Core/Src/as5047p.c ****   }
 1248              		.loc 1 963 14 is_stmt 0 view .LVU338
 1249 0050 4FF0FF30 		mov	r0, #-1
 1250 0054 F6E7     		b	.L81
 1251              	.LVL140:
 1252              	.L82:
 938:Core/Src/as5047p.c ****     }
 1253              		.loc 1 938 9 view .LVU339
 1254 0056 4FF0FF30 		mov	r0, #-1
 1255              	.LVL141:
 938:Core/Src/as5047p.c ****     }
 1256              		.loc 1 938 9 view .LVU340
 1257 005a F3E7     		b	.L81
 1258              	.LVL142:
 1259              	.L83:
 955:Core/Src/as5047p.c ****     }
 1260              		.loc 1 955 9 view .LVU341
 1261 005c 4FF0FF30 		mov	r0, #-1
 1262              	.LVL143:
 955:Core/Src/as5047p.c ****     }
 1263              		.loc 1 955 9 view .LVU342
 1264 0060 F0E7     		b	.L81
 1265              		.cfi_endproc
 1266              	.LFE17:
 1268              		.section	.text.AS5047P_ReadPosition,"ax",%progbits
 1269              		.align	1
 1270              		.global	AS5047P_ReadPosition
 1271              		.syntax unified
 1272              		.thumb
 1273              		.thumb_func
 1275              	AS5047P_ReadPosition:
 1276              	.LVL144:
 1277              	.LFB18:
 968:Core/Src/as5047p.c **** 
 969:Core/Src/as5047p.c **** /************************************************************************************
 970:Core/Src/as5047p.c ****  *
 971:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_ReadPosition(instance,devReachCheck)
 972:Core/Src/as5047p.c ****  * 	Access:		public
 973:Core/Src/as5047p.c ****  * 	Inputs:
 974:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
 975:Core/Src/as5047p.c ****  *		extendedDiag:	Extended diagnostics activation.
 976:Core/Src/as5047p.c ****  *
 977:Core/Src/as5047p.c ****  * 	Returns:
 978:Core/Src/as5047p.c ****  *		-1 : Execution with errors.
 979:Core/Src/as5047p.c ****  *		 0 : Success.
 980:Core/Src/as5047p.c ****  *
 981:Core/Src/as5047p.c ****  * 	Description:
 982:Core/Src/as5047p.c ****  *	Function reads current encoder's position from AS5047P_ANGLECOM register.
 983:Core/Src/as5047p.c ****  *	Normally, if extendedDiag == false only 2 Rx/Tx SPI transactions are
 984:Core/Src/as5047p.c ****  *	needed. if extendedDiag == true, 3 Rx/Tx SPI transactions are needed.
 985:Core/Src/as5047p.c ****  *	Before requesting position, encoder must be calibrated (zero position set)
 986:Core/Src/as5047p.c ****  *	calling AS5047P_SetZeroPosition() function.
 987:Core/Src/as5047p.c ****  *	Input 'extendedDiag' allows to check if AS5047P is reachable on SPI line by
 988:Core/Src/as5047p.c ****  *	requesting DIAAGC register content which is always non-zero and additional
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 42


 989:Core/Src/as5047p.c ****  *	errors related to magnetic field are checked.
 990:Core/Src/as5047p.c ****  *
 991:Core/Src/as5047p.c ****  *	Generates error codes in range: [70-79]
 992:Core/Src/as5047p.c ****  *
 993:Core/Src/as5047p.c ****  ************************************************************************************/
 994:Core/Src/as5047p.c **** AS5047P_Result AS5047P_ReadPosition(AS5047P_Instance * instance, _Bool extendedDiag)
 995:Core/Src/as5047p.c **** {
 1278              		.loc 1 995 1 is_stmt 1 view -0
 1279              		.cfi_startproc
 1280              		@ args = 0, pretend = 0, frame = 0
 1281              		@ frame_needed = 0, uses_anonymous_args = 0
 1282              		.loc 1 995 1 is_stmt 0 view .LVU344
 1283 0000 70B5     		push	{r4, r5, r6, lr}
 1284              	.LCFI18:
 1285              		.cfi_def_cfa_offset 16
 1286              		.cfi_offset 4, -16
 1287              		.cfi_offset 5, -12
 1288              		.cfi_offset 6, -8
 1289              		.cfi_offset 14, -4
 1290 0002 0446     		mov	r4, r0
 996:Core/Src/as5047p.c ****   AS5047P_Result currPos;
 1291              		.loc 1 996 3 is_stmt 1 view .LVU345
 997:Core/Src/as5047p.c ****   AS5047P_Result diagData;
 1292              		.loc 1 997 3 view .LVU346
 998:Core/Src/as5047p.c **** 
 999:Core/Src/as5047p.c ****   if(instance->initialized && instance->zeroPosCalibrated)
 1293              		.loc 1 999 3 view .LVU347
 1294              		.loc 1 999 14 is_stmt 0 view .LVU348
 1295 0004 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 1296              		.loc 1 999 5 view .LVU349
 1297 0006 13B1     		cbz	r3, .L86
 1298 0008 0D46     		mov	r5, r1
 1299              		.loc 1 999 39 discriminator 1 view .LVU350
 1300 000a 8279     		ldrb	r2, [r0, #6]	@ zero_extendqisi2
 1301              		.loc 1 999 28 discriminator 1 view .LVU351
 1302 000c 32B9     		cbnz	r2, .L96
 1303              	.L86:
1000:Core/Src/as5047p.c ****   {
1001:Core/Src/as5047p.c **** 
1002:Core/Src/as5047p.c ****       /************************************************************************************
1003:Core/Src/as5047p.c ****        *
1004:Core/Src/as5047p.c ****        * STEP 1: Transmit COMMAND AND receive DUMMY RESPONSE.
1005:Core/Src/as5047p.c ****        * 	 Ignore response and framing errors.
1006:Core/Src/as5047p.c ****        *
1007:Core/Src/as5047p.c ****        ************************************************************************************/
1008:Core/Src/as5047p.c **** 
1009:Core/Src/as5047p.c ****       AS5047P_ReadWriteRaw(instance, AS5047P_ANGLECOM, AS5047P_ACCESS_READ);
1010:Core/Src/as5047p.c **** 
1011:Core/Src/as5047p.c ****       /************************************************************************************
1012:Core/Src/as5047p.c ****        *
1013:Core/Src/as5047p.c ****        * STEP 2: Transmit DIAAGC command AND receive COMMAND RESPONSE.
1014:Core/Src/as5047p.c ****        * 	 DIAAGC register chosen because it's always non-zero value.
1015:Core/Src/as5047p.c ****        * 	 Then check if no framing error occurred.
1016:Core/Src/as5047p.c ****        * 	 Then check parity.
1017:Core/Src/as5047p.c ****        *
1018:Core/Src/as5047p.c ****        ************************************************************************************/
1019:Core/Src/as5047p.c **** 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 43


1020:Core/Src/as5047p.c ****       currPos = AS5047P_ReadWriteRaw(instance, AS5047P_DIAAGC , AS5047P_ACCESS_READ);
1021:Core/Src/as5047p.c **** 
1022:Core/Src/as5047p.c ****       //--- Framing error occurred in Tx or Rx frame
1023:Core/Src/as5047p.c ****       if( currPos < 0 )
1024:Core/Src/as5047p.c ****       {
1025:Core/Src/as5047p.c **** 	  return -1;
1026:Core/Src/as5047p.c ****       }
1027:Core/Src/as5047p.c **** 
1028:Core/Src/as5047p.c ****       if (extendedDiag)
1029:Core/Src/as5047p.c ****       {
1030:Core/Src/as5047p.c **** 	/************************************************************************************
1031:Core/Src/as5047p.c **** 	 *
1032:Core/Src/as5047p.c **** 	 * STEP 3:  Transmit NOP command AND receive DIAAGC RESPONSE.
1033:Core/Src/as5047p.c **** 	 * 	    Then check if no framing error occurred.
1034:Core/Src/as5047p.c **** 	 * 	    Then check if response is non-zero. If this is not the case - as5047p or SPI
1035:Core/Src/as5047p.c **** 	 * 	    is faulty (device reachability check).
1036:Core/Src/as5047p.c **** 	 * 	    Check errors related to magnetic field
1037:Core/Src/as5047p.c **** 	 *
1038:Core/Src/as5047p.c **** 	 ************************************************************************************/
1039:Core/Src/as5047p.c **** 
1040:Core/Src/as5047p.c **** 	diagData = AS5047P_ReadWriteRaw(instance, AS5047P_NOP , AS5047P_ACCESS_READ);
1041:Core/Src/as5047p.c **** 
1042:Core/Src/as5047p.c **** 	//--- Framing error or parity error occured
1043:Core/Src/as5047p.c **** 	if( diagData < 0 )
1044:Core/Src/as5047p.c **** 	{
1045:Core/Src/as5047p.c **** 	    return -1;
1046:Core/Src/as5047p.c **** 	}
1047:Core/Src/as5047p.c **** 
1048:Core/Src/as5047p.c **** 	//--- Device not accessible on SPI line
1049:Core/Src/as5047p.c **** 	if( diagData == 0 )
1050:Core/Src/as5047p.c **** 	{
1051:Core/Src/as5047p.c **** 	    AS5047P_HandleError(instance,70);
1052:Core/Src/as5047p.c **** 	    return -1;
1053:Core/Src/as5047p.c **** 	}
1054:Core/Src/as5047p.c **** 
1055:Core/Src/as5047p.c **** 	//--- Magnetic field strength too low
1056:Core/Src/as5047p.c **** 	if( diagData & AS5047P_DIAAGC_MAGL )
1057:Core/Src/as5047p.c **** 	{
1058:Core/Src/as5047p.c **** 	  AS5047P_HandleError(instance,71);
1059:Core/Src/as5047p.c **** 	  return -1;
1060:Core/Src/as5047p.c **** 	}
1061:Core/Src/as5047p.c **** 
1062:Core/Src/as5047p.c **** 	//--- Magnetic field strength too high
1063:Core/Src/as5047p.c **** 	if( diagData & AS5047P_DIAAGC_MAGH )
1064:Core/Src/as5047p.c **** 	{
1065:Core/Src/as5047p.c **** 	  AS5047P_HandleError(instance,72);
1066:Core/Src/as5047p.c **** 	  return -1;
1067:Core/Src/as5047p.c **** 	}
1068:Core/Src/as5047p.c **** 
1069:Core/Src/as5047p.c **** 	//--- CORDIC overflow
1070:Core/Src/as5047p.c **** 	if( diagData & AS5047P_DIAAGC_COF )
1071:Core/Src/as5047p.c **** 	{
1072:Core/Src/as5047p.c **** 	  AS5047P_HandleError(instance,73);
1073:Core/Src/as5047p.c **** 	  return -1;
1074:Core/Src/as5047p.c **** 	}
1075:Core/Src/as5047p.c **** 
1076:Core/Src/as5047p.c **** 	//--- Magnet offset compensation error
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 44


1077:Core/Src/as5047p.c **** 	if( ( diagData & AS5047P_DIAAGC_LF ) == 0 )
1078:Core/Src/as5047p.c **** 	{
1079:Core/Src/as5047p.c **** 	  AS5047P_HandleError(instance,74);
1080:Core/Src/as5047p.c **** 	  return -1;
1081:Core/Src/as5047p.c **** 	}
1082:Core/Src/as5047p.c ****       }
1083:Core/Src/as5047p.c **** 
1084:Core/Src/as5047p.c ****   }
1085:Core/Src/as5047p.c ****   else if( !instance->initialized )
 1304              		.loc 1 1085 8 is_stmt 1 view .LVU352
 1305              		.loc 1 1085 10 is_stmt 0 view .LVU353
 1306 000e 002B     		cmp	r3, #0
 1307 0010 4BD0     		beq	.L97
1086:Core/Src/as5047p.c ****   {
1087:Core/Src/as5047p.c ****       //--- Encoder not initialized while position read attempt
1088:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,75);
1089:Core/Src/as5047p.c ****       return -1;
1090:Core/Src/as5047p.c ****   }
1091:Core/Src/as5047p.c ****   else if( !instance->zeroPosCalibrated )
 1308              		.loc 1 1091 8 is_stmt 1 view .LVU354
 1309              		.loc 1 1091 21 is_stmt 0 view .LVU355
 1310 0012 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 1311              		.loc 1 1091 10 view .LVU356
 1312 0014 002B     		cmp	r3, #0
 1313 0016 4FD0     		beq	.L98
 1314              	.LVL145:
 1315              	.L87:
1092:Core/Src/as5047p.c ****   {
1093:Core/Src/as5047p.c ****       //--- Encoder not calibrated (zero pos not set) while position read attempt
1094:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,76);
1095:Core/Src/as5047p.c ****       return -1;
1096:Core/Src/as5047p.c ****   }
1097:Core/Src/as5047p.c **** 
1098:Core/Src/as5047p.c ****   return currPos;
1099:Core/Src/as5047p.c **** 
1100:Core/Src/as5047p.c **** }
 1316              		.loc 1 1100 1 view .LVU357
 1317 0018 3046     		mov	r0, r6
 1318 001a 70BD     		pop	{r4, r5, r6, pc}
 1319              	.LVL146:
 1320              	.L96:
1009:Core/Src/as5047p.c **** 
 1321              		.loc 1 1009 7 is_stmt 1 view .LVU358
 1322 001c 0122     		movs	r2, #1
 1323 001e 43F6FF71 		movw	r1, #16383
 1324              	.LVL147:
1009:Core/Src/as5047p.c **** 
 1325              		.loc 1 1009 7 is_stmt 0 view .LVU359
 1326 0022 FFF7FEFF 		bl	AS5047P_ReadWriteRaw
 1327              	.LVL148:
1020:Core/Src/as5047p.c **** 
 1328              		.loc 1 1020 7 is_stmt 1 view .LVU360
1020:Core/Src/as5047p.c **** 
 1329              		.loc 1 1020 17 is_stmt 0 view .LVU361
 1330 0026 0122     		movs	r2, #1
 1331 0028 43F6FC71 		movw	r1, #16380
 1332 002c 2046     		mov	r0, r4
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 45


 1333 002e FFF7FEFF 		bl	AS5047P_ReadWriteRaw
 1334              	.LVL149:
1023:Core/Src/as5047p.c ****       {
 1335              		.loc 1 1023 7 is_stmt 1 view .LVU362
1023:Core/Src/as5047p.c ****       {
 1336              		.loc 1 1023 9 is_stmt 0 view .LVU363
 1337 0032 061E     		subs	r6, r0, #0
 1338 0034 47DB     		blt	.L93
1028:Core/Src/as5047p.c ****       {
 1339              		.loc 1 1028 7 is_stmt 1 view .LVU364
1028:Core/Src/as5047p.c ****       {
 1340              		.loc 1 1028 10 is_stmt 0 view .LVU365
 1341 0036 002D     		cmp	r5, #0
 1342 0038 EED0     		beq	.L87
1040:Core/Src/as5047p.c **** 
 1343              		.loc 1 1040 2 is_stmt 1 view .LVU366
1040:Core/Src/as5047p.c **** 
 1344              		.loc 1 1040 13 is_stmt 0 view .LVU367
 1345 003a 0122     		movs	r2, #1
 1346 003c 0021     		movs	r1, #0
 1347 003e 2046     		mov	r0, r4
 1348              	.LVL150:
1040:Core/Src/as5047p.c **** 
 1349              		.loc 1 1040 13 view .LVU368
 1350 0040 FFF7FEFF 		bl	AS5047P_ReadWriteRaw
 1351              	.LVL151:
1043:Core/Src/as5047p.c **** 	{
 1352              		.loc 1 1043 2 is_stmt 1 view .LVU369
1043:Core/Src/as5047p.c **** 	{
 1353              		.loc 1 1043 4 is_stmt 0 view .LVU370
 1354 0044 0028     		cmp	r0, #0
 1355              	.LVL152:
1043:Core/Src/as5047p.c **** 	{
 1356              		.loc 1 1043 4 view .LVU371
 1357 0046 41DB     		blt	.L94
1049:Core/Src/as5047p.c **** 	{
 1358              		.loc 1 1049 2 is_stmt 1 view .LVU372
1049:Core/Src/as5047p.c **** 	{
 1359              		.loc 1 1049 4 is_stmt 0 view .LVU373
 1360 0048 98B1     		cbz	r0, .L99
1056:Core/Src/as5047p.c **** 	{
 1361              		.loc 1 1056 2 is_stmt 1 view .LVU374
1056:Core/Src/as5047p.c **** 	{
 1362              		.loc 1 1056 15 is_stmt 0 view .LVU375
 1363 004a 83B2     		uxth	r3, r0
1056:Core/Src/as5047p.c **** 	{
 1364              		.loc 1 1056 4 view .LVU376
 1365 004c 10F4006F 		tst	r0, #2048
 1366 0050 16D1     		bne	.L100
1063:Core/Src/as5047p.c **** 	{
 1367              		.loc 1 1063 2 is_stmt 1 view .LVU377
1063:Core/Src/as5047p.c **** 	{
 1368              		.loc 1 1063 4 is_stmt 0 view .LVU378
 1369 0052 13F4806F 		tst	r3, #1024
 1370 0056 1AD1     		bne	.L101
1070:Core/Src/as5047p.c **** 	{
 1371              		.loc 1 1070 2 is_stmt 1 view .LVU379
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 46


1070:Core/Src/as5047p.c **** 	{
 1372              		.loc 1 1070 4 is_stmt 0 view .LVU380
 1373 0058 13F4007F 		tst	r3, #512
 1374 005c 1ED1     		bne	.L102
1077:Core/Src/as5047p.c **** 	{
 1375              		.loc 1 1077 2 is_stmt 1 view .LVU381
1077:Core/Src/as5047p.c **** 	{
 1376              		.loc 1 1077 4 is_stmt 0 view .LVU382
 1377 005e 13F4807F 		tst	r3, #256
 1378 0062 D9D1     		bne	.L87
1079:Core/Src/as5047p.c **** 	  return -1;
 1379              		.loc 1 1079 4 is_stmt 1 view .LVU383
 1380 0064 4A21     		movs	r1, #74
 1381 0066 2046     		mov	r0, r4
 1382 0068 FFF7FEFF 		bl	AS5047P_HandleError
 1383              	.LVL153:
1080:Core/Src/as5047p.c **** 	}
 1384              		.loc 1 1080 4 view .LVU384
1080:Core/Src/as5047p.c **** 	}
 1385              		.loc 1 1080 11 is_stmt 0 view .LVU385
 1386 006c 4FF0FF36 		mov	r6, #-1
 1387 0070 D2E7     		b	.L87
 1388              	.L99:
1051:Core/Src/as5047p.c **** 	    return -1;
 1389              		.loc 1 1051 6 is_stmt 1 view .LVU386
 1390 0072 4621     		movs	r1, #70
 1391 0074 2046     		mov	r0, r4
 1392 0076 FFF7FEFF 		bl	AS5047P_HandleError
 1393              	.LVL154:
1052:Core/Src/as5047p.c **** 	}
 1394              		.loc 1 1052 6 view .LVU387
1052:Core/Src/as5047p.c **** 	}
 1395              		.loc 1 1052 13 is_stmt 0 view .LVU388
 1396 007a 4FF0FF36 		mov	r6, #-1
 1397 007e CBE7     		b	.L87
 1398              	.L100:
1058:Core/Src/as5047p.c **** 	  return -1;
 1399              		.loc 1 1058 4 is_stmt 1 view .LVU389
 1400 0080 4721     		movs	r1, #71
 1401 0082 2046     		mov	r0, r4
 1402 0084 FFF7FEFF 		bl	AS5047P_HandleError
 1403              	.LVL155:
1059:Core/Src/as5047p.c **** 	}
 1404              		.loc 1 1059 4 view .LVU390
1059:Core/Src/as5047p.c **** 	}
 1405              		.loc 1 1059 11 is_stmt 0 view .LVU391
 1406 0088 4FF0FF36 		mov	r6, #-1
 1407 008c C4E7     		b	.L87
 1408              	.L101:
1065:Core/Src/as5047p.c **** 	  return -1;
 1409              		.loc 1 1065 4 is_stmt 1 view .LVU392
 1410 008e 4821     		movs	r1, #72
 1411 0090 2046     		mov	r0, r4
 1412 0092 FFF7FEFF 		bl	AS5047P_HandleError
 1413              	.LVL156:
1066:Core/Src/as5047p.c **** 	}
 1414              		.loc 1 1066 4 view .LVU393
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 47


1066:Core/Src/as5047p.c **** 	}
 1415              		.loc 1 1066 11 is_stmt 0 view .LVU394
 1416 0096 4FF0FF36 		mov	r6, #-1
 1417 009a BDE7     		b	.L87
 1418              	.L102:
1072:Core/Src/as5047p.c **** 	  return -1;
 1419              		.loc 1 1072 4 is_stmt 1 view .LVU395
 1420 009c 4921     		movs	r1, #73
 1421 009e 2046     		mov	r0, r4
 1422 00a0 FFF7FEFF 		bl	AS5047P_HandleError
 1423              	.LVL157:
1073:Core/Src/as5047p.c **** 	}
 1424              		.loc 1 1073 4 view .LVU396
1073:Core/Src/as5047p.c **** 	}
 1425              		.loc 1 1073 11 is_stmt 0 view .LVU397
 1426 00a4 4FF0FF36 		mov	r6, #-1
 1427 00a8 B6E7     		b	.L87
 1428              	.LVL158:
 1429              	.L97:
1088:Core/Src/as5047p.c ****       return -1;
 1430              		.loc 1 1088 7 is_stmt 1 view .LVU398
 1431 00aa 4B21     		movs	r1, #75
 1432              	.LVL159:
1088:Core/Src/as5047p.c ****       return -1;
 1433              		.loc 1 1088 7 is_stmt 0 view .LVU399
 1434 00ac 2046     		mov	r0, r4
 1435              	.LVL160:
1088:Core/Src/as5047p.c ****       return -1;
 1436              		.loc 1 1088 7 view .LVU400
 1437 00ae FFF7FEFF 		bl	AS5047P_HandleError
 1438              	.LVL161:
1089:Core/Src/as5047p.c ****   }
 1439              		.loc 1 1089 7 is_stmt 1 view .LVU401
1089:Core/Src/as5047p.c ****   }
 1440              		.loc 1 1089 14 is_stmt 0 view .LVU402
 1441 00b2 4FF0FF36 		mov	r6, #-1
 1442 00b6 AFE7     		b	.L87
 1443              	.LVL162:
 1444              	.L98:
1094:Core/Src/as5047p.c ****       return -1;
 1445              		.loc 1 1094 7 is_stmt 1 view .LVU403
 1446 00b8 4C21     		movs	r1, #76
 1447              	.LVL163:
1094:Core/Src/as5047p.c ****       return -1;
 1448              		.loc 1 1094 7 is_stmt 0 view .LVU404
 1449 00ba 2046     		mov	r0, r4
 1450              	.LVL164:
1094:Core/Src/as5047p.c ****       return -1;
 1451              		.loc 1 1094 7 view .LVU405
 1452 00bc FFF7FEFF 		bl	AS5047P_HandleError
 1453              	.LVL165:
1095:Core/Src/as5047p.c ****   }
 1454              		.loc 1 1095 7 is_stmt 1 view .LVU406
1095:Core/Src/as5047p.c ****   }
 1455              		.loc 1 1095 14 is_stmt 0 view .LVU407
 1456 00c0 4FF0FF36 		mov	r6, #-1
 1457 00c4 A8E7     		b	.L87
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 48


 1458              	.LVL166:
 1459              	.L93:
1025:Core/Src/as5047p.c ****       }
 1460              		.loc 1 1025 11 view .LVU408
 1461 00c6 4FF0FF36 		mov	r6, #-1
 1462 00ca A5E7     		b	.L87
 1463              	.LVL167:
 1464              	.L94:
1045:Core/Src/as5047p.c **** 	}
 1465              		.loc 1 1045 13 view .LVU409
 1466 00cc 4FF0FF36 		mov	r6, #-1
 1467 00d0 A2E7     		b	.L87
 1468              		.cfi_endproc
 1469              	.LFE18:
 1471              		.section	.text.AS5047P_SetZeroPosition,"ax",%progbits
 1472              		.align	1
 1473              		.global	AS5047P_SetZeroPosition
 1474              		.syntax unified
 1475              		.thumb
 1476              		.thumb_func
 1478              	AS5047P_SetZeroPosition:
 1479              	.LVL168:
 1480              	.LFB19:
1101:Core/Src/as5047p.c **** 
1102:Core/Src/as5047p.c **** /************************************************************************************
1103:Core/Src/as5047p.c ****  *
1104:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_SetZeroPosition(instance)
1105:Core/Src/as5047p.c ****  * 	Access:		public
1106:Core/Src/as5047p.c ****  * 	Inputs:
1107:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
1108:Core/Src/as5047p.c ****  *
1109:Core/Src/as5047p.c ****  * 	Returns:
1110:Core/Src/as5047p.c ****  *		-1 : Execution with errors.
1111:Core/Src/as5047p.c ****  *		 0 : Success.
1112:Core/Src/as5047p.c ****  *
1113:Core/Src/as5047p.c ****  * 	Description:
1114:Core/Src/as5047p.c ****  *	Function clears current encoder's calibration (if any) from ZPOSL and
1115:Core/Src/as5047p.c ****  *	ZPOSM registers, reads current (not calibrated) position and writes back
1116:Core/Src/as5047p.c ****  *	calibration to ZPOSL and ZPOSM respectively. Other ZPOSL non-calibration
1117:Core/Src/as5047p.c ****  *	related bits are left unchanged.
1118:Core/Src/as5047p.c ****  *
1119:Core/Src/as5047p.c ****  *	Generates error codes in range: [80-89]
1120:Core/Src/as5047p.c ****  *
1121:Core/Src/as5047p.c ****  ************************************************************************************/
1122:Core/Src/as5047p.c **** AS5047P_ErrCode AS5047P_SetZeroPosition(AS5047P_Instance * instance)
1123:Core/Src/as5047p.c **** {
 1481              		.loc 1 1123 1 is_stmt 1 view -0
 1482              		.cfi_startproc
 1483              		@ args = 0, pretend = 0, frame = 0
 1484              		@ frame_needed = 0, uses_anonymous_args = 0
 1485              		.loc 1 1123 1 is_stmt 0 view .LVU411
 1486 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1487              	.LCFI19:
 1488              		.cfi_def_cfa_offset 20
 1489              		.cfi_offset 4, -20
 1490              		.cfi_offset 5, -16
 1491              		.cfi_offset 6, -12
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 49


 1492              		.cfi_offset 7, -8
 1493              		.cfi_offset 14, -4
 1494 0002 83B0     		sub	sp, sp, #12
 1495              	.LCFI20:
 1496              		.cfi_def_cfa_offset 32
 1497 0004 0446     		mov	r4, r0
1124:Core/Src/as5047p.c **** 
1125:Core/Src/as5047p.c ****   AS5047P_Result currPosition;
 1498              		.loc 1 1125 3 is_stmt 1 view .LVU412
1126:Core/Src/as5047p.c ****   AS5047P_Result currZPOSLContent;
 1499              		.loc 1 1126 3 view .LVU413
1127:Core/Src/as5047p.c ****   AS5047P_ErrCode errCode = 0;
 1500              		.loc 1 1127 3 view .LVU414
 1501              	.LVL169:
1128:Core/Src/as5047p.c ****   uint16_t newZPOSLContent;
 1502              		.loc 1 1128 3 view .LVU415
1129:Core/Src/as5047p.c ****   uint16_t newZPOSMContent;
 1503              		.loc 1 1129 3 view .LVU416
1130:Core/Src/as5047p.c **** 
1131:Core/Src/as5047p.c ****   if(instance->initialized)
 1504              		.loc 1 1131 3 view .LVU417
 1505              		.loc 1 1131 14 is_stmt 0 view .LVU418
 1506 0006 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 1507              		.loc 1 1131 5 view .LVU419
 1508 0008 002B     		cmp	r3, #0
 1509 000a 42D0     		beq	.L104
1132:Core/Src/as5047p.c ****   {
1133:Core/Src/as5047p.c ****       /************************************************************************************
1134:Core/Src/as5047p.c ****       *
1135:Core/Src/as5047p.c ****       * STEP 1:  Read current ZPOSL reg. content - need to keep comp_i_err_en and and
1136:Core/Src/as5047p.c ****       * 	 comp_h_err_en bits unchanged.
1137:Core/Src/as5047p.c ****       *
1138:Core/Src/as5047p.c ****       ************************************************************************************/
1139:Core/Src/as5047p.c **** 
1140:Core/Src/as5047p.c ****      currZPOSLContent = AS5047P_ReadRegister(instance, AS5047P_ZPOSL ,AS5047P_OPT_ENABLED);
 1510              		.loc 1 1140 6 is_stmt 1 view .LVU420
 1511              		.loc 1 1140 25 is_stmt 0 view .LVU421
 1512 000c 0122     		movs	r2, #1
 1513 000e 1721     		movs	r1, #23
 1514 0010 FFF7FEFF 		bl	AS5047P_ReadRegister
 1515              	.LVL170:
1141:Core/Src/as5047p.c **** 
1142:Core/Src/as5047p.c ****      if(currZPOSLContent < 0 )
 1516              		.loc 1 1142 6 is_stmt 1 view .LVU422
 1517              		.loc 1 1142 8 is_stmt 0 view .LVU423
 1518 0014 0028     		cmp	r0, #0
 1519              	.LVL171:
 1520              		.loc 1 1142 8 view .LVU424
 1521 0016 42DB     		blt	.L106
1143:Core/Src/as5047p.c ****      {
1144:Core/Src/as5047p.c **** 
1145:Core/Src/as5047p.c **** 	return -1;
1146:Core/Src/as5047p.c ****      }
1147:Core/Src/as5047p.c **** 
1148:Core/Src/as5047p.c ****      /************************************************************************************
1149:Core/Src/as5047p.c ****      *
1150:Core/Src/as5047p.c ****      * STEP 2:  Write 6 least significant bits of ZPOSL to default (0) value.
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 50


1151:Core/Src/as5047p.c ****      * 	 	Keep comp_i_err_en and comp_h_err_en bits unchanged.
1152:Core/Src/as5047p.c ****      * 	 	Write all bits of ZPOSM to default (0) value.
1153:Core/Src/as5047p.c ****      *
1154:Core/Src/as5047p.c ****      ************************************************************************************/
1155:Core/Src/as5047p.c **** 
1156:Core/Src/as5047p.c ****      //--- Keep comp_i_err_en and and comp_h_err_en bits unchanged. The rest set to 0
1157:Core/Src/as5047p.c ****      errCode = AS5047P_WriteRegister(instance, AS5047P_ZPOSL , currZPOSLContent & (AS5047P_ZPOSL_CO
 1522              		.loc 1 1157 6 is_stmt 1 view .LVU425
 1523              		.loc 1 1157 16 is_stmt 0 view .LVU426
 1524 0018 00F0C005 		and	r5, r0, #192
 1525 001c 0127     		movs	r7, #1
 1526 001e 0097     		str	r7, [sp]
 1527 0020 3B46     		mov	r3, r7
 1528 0022 2A46     		mov	r2, r5
 1529 0024 1721     		movs	r1, #23
 1530 0026 2046     		mov	r0, r4
 1531 0028 FFF7FEFF 		bl	AS5047P_WriteRegister
 1532              	.LVL172:
 1533 002c 0646     		mov	r6, r0
 1534              	.LVL173:
1158:Core/Src/as5047p.c ****      errCode |= AS5047P_WriteRegister(instance, AS5047P_ZPOSM , 0x0000,AS5047P_OPT_ENABLED,AS5047P_
 1535              		.loc 1 1158 6 is_stmt 1 view .LVU427
 1536              		.loc 1 1158 17 is_stmt 0 view .LVU428
 1537 002e 0097     		str	r7, [sp]
 1538 0030 3B46     		mov	r3, r7
 1539 0032 0022     		movs	r2, #0
 1540 0034 1621     		movs	r1, #22
 1541 0036 2046     		mov	r0, r4
 1542 0038 FFF7FEFF 		bl	AS5047P_WriteRegister
 1543              	.LVL174:
 1544              		.loc 1 1158 14 view .LVU429
 1545 003c 0643     		orrs	r6, r6, r0
 1546              	.LVL175:
 1547              		.loc 1 1158 14 view .LVU430
 1548 003e 36B2     		sxth	r6, r6
 1549              	.LVL176:
1159:Core/Src/as5047p.c **** 
1160:Core/Src/as5047p.c ****      if(errCode != 0 )
 1550              		.loc 1 1160 6 is_stmt 1 view .LVU431
 1551              		.loc 1 1160 8 is_stmt 0 view .LVU432
 1552 0040 86BB     		cbnz	r6, .L107
1161:Core/Src/as5047p.c ****      {
1162:Core/Src/as5047p.c **** 
1163:Core/Src/as5047p.c **** 	return -1;
1164:Core/Src/as5047p.c ****      }
1165:Core/Src/as5047p.c **** 
1166:Core/Src/as5047p.c ****      //--- This delay here is crucial before reading the position !!!!!!!!!!!!!!!!!!!!!!
1167:Core/Src/as5047p.c ****      AS5047P_HAL_Delay_ms(1);
 1553              		.loc 1 1167 6 is_stmt 1 view .LVU433
 1554 0042 3846     		mov	r0, r7
 1555 0044 FFF7FEFF 		bl	AS5047P_HAL_Delay_ms
 1556              	.LVL177:
1168:Core/Src/as5047p.c **** 
1169:Core/Src/as5047p.c ****     /************************************************************************************
1170:Core/Src/as5047p.c ****      *
1171:Core/Src/as5047p.c ****      * STEP 3: 	Read current encoder position.
1172:Core/Src/as5047p.c ****      *
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 51


1173:Core/Src/as5047p.c ****      ************************************************************************************/
1174:Core/Src/as5047p.c **** 
1175:Core/Src/as5047p.c ****     currPosition = AS5047P_ReadRegister(instance, AS5047P_ANGLECOM ,AS5047P_OPT_ENABLED);
 1557              		.loc 1 1175 5 view .LVU434
 1558              		.loc 1 1175 20 is_stmt 0 view .LVU435
 1559 0048 3A46     		mov	r2, r7
 1560 004a 43F6FF71 		movw	r1, #16383
 1561 004e 2046     		mov	r0, r4
 1562 0050 FFF7FEFF 		bl	AS5047P_ReadRegister
 1563              	.LVL178:
1176:Core/Src/as5047p.c **** 
1177:Core/Src/as5047p.c ****     //--- Position reading failed
1178:Core/Src/as5047p.c ****     if(currPosition < 0 )
 1564              		.loc 1 1178 5 is_stmt 1 view .LVU436
 1565              		.loc 1 1178 7 is_stmt 0 view .LVU437
 1566 0054 0028     		cmp	r0, #0
 1567              	.LVL179:
 1568              		.loc 1 1178 7 view .LVU438
 1569 0056 28DB     		blt	.L108
1179:Core/Src/as5047p.c ****     {
1180:Core/Src/as5047p.c **** 
1181:Core/Src/as5047p.c ****       return -1;
1182:Core/Src/as5047p.c ****     }
1183:Core/Src/as5047p.c **** 
1184:Core/Src/as5047p.c ****     /************************************************************************************
1185:Core/Src/as5047p.c ****      *
1186:Core/Src/as5047p.c ****      * STEP 4: 	Write 6 least significant bits of the current position to ZPOSL register.
1187:Core/Src/as5047p.c ****      * 	 	Keep comp_i_err_en and comp_h_err_en unchanged.
1188:Core/Src/as5047p.c ****      * 	 	Write 8 most significant bits of the current position to ZPOSM register.
1189:Core/Src/as5047p.c ****      *
1190:Core/Src/as5047p.c ****      ************************************************************************************/
1191:Core/Src/as5047p.c **** 
1192:Core/Src/as5047p.c ****     //--- Keep comp_i_err_en and and comp_h_err_en bits unchanged and take 6 (of 14) least signific
1193:Core/Src/as5047p.c ****     newZPOSLContent = (currZPOSLContent & (AS5047P_ZPOSL_COMP_I_ERR_EN | AS5047P_ZPOSL_COMP_H_ERR_E
 1570              		.loc 1 1193 5 is_stmt 1 view .LVU439
 1571              		.loc 1 1193 121 is_stmt 0 view .LVU440
 1572 0058 00F03F02 		and	r2, r0, #63
 1573              	.LVL180:
1194:Core/Src/as5047p.c ****     //--- Take 8 (of 14) most significant bits of currPosition (14 bits data).
1195:Core/Src/as5047p.c ****     newZPOSMContent = (currPosition >> 6 ) & AS5047P_ZPOSM_ZPOSM;
 1574              		.loc 1 1195 5 is_stmt 1 view .LVU441
 1575              		.loc 1 1195 21 is_stmt 0 view .LVU442
 1576 005c C0F38716 		ubfx	r6, r0, #6, #8
 1577              	.LVL181:
1196:Core/Src/as5047p.c **** 
1197:Core/Src/as5047p.c ****     errCode = AS5047P_WriteRegister(instance, AS5047P_ZPOSL , newZPOSLContent,AS5047P_OPT_ENABLED,A
 1578              		.loc 1 1197 5 is_stmt 1 view .LVU443
 1579              		.loc 1 1197 15 is_stmt 0 view .LVU444
 1580 0060 0097     		str	r7, [sp]
 1581 0062 3B46     		mov	r3, r7
 1582 0064 2A43     		orrs	r2, r2, r5
 1583              	.LVL182:
 1584              		.loc 1 1197 15 view .LVU445
 1585 0066 1721     		movs	r1, #23
 1586 0068 2046     		mov	r0, r4
 1587 006a FFF7FEFF 		bl	AS5047P_WriteRegister
 1588              	.LVL183:
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 52


 1589              		.loc 1 1197 15 view .LVU446
 1590 006e 0546     		mov	r5, r0
 1591              	.LVL184:
1198:Core/Src/as5047p.c ****     errCode |= AS5047P_WriteRegister(instance, AS5047P_ZPOSM , newZPOSMContent,AS5047P_OPT_ENABLED,
 1592              		.loc 1 1198 5 is_stmt 1 view .LVU447
 1593              		.loc 1 1198 16 is_stmt 0 view .LVU448
 1594 0070 0097     		str	r7, [sp]
 1595 0072 3B46     		mov	r3, r7
 1596 0074 3246     		mov	r2, r6
 1597 0076 1621     		movs	r1, #22
 1598 0078 2046     		mov	r0, r4
 1599 007a FFF7FEFF 		bl	AS5047P_WriteRegister
 1600              	.LVL185:
 1601              		.loc 1 1198 13 view .LVU449
 1602 007e 0543     		orrs	r5, r5, r0
 1603              	.LVL186:
 1604              		.loc 1 1198 13 view .LVU450
 1605 0080 2DB2     		sxth	r5, r5
 1606              	.LVL187:
1199:Core/Src/as5047p.c **** 
1200:Core/Src/as5047p.c ****     if(errCode != 0 )
 1607              		.loc 1 1200 5 is_stmt 1 view .LVU451
 1608              		.loc 1 1200 7 is_stmt 0 view .LVU452
 1609 0082 ADB9     		cbnz	r5, .L109
1201:Core/Src/as5047p.c ****     {
1202:Core/Src/as5047p.c **** 
1203:Core/Src/as5047p.c ****       return -1;
1204:Core/Src/as5047p.c ****     }
1205:Core/Src/as5047p.c **** 
1206:Core/Src/as5047p.c ****     instance->zeroPosCalibrated = true;
 1610              		.loc 1 1206 5 is_stmt 1 view .LVU453
 1611              		.loc 1 1206 33 is_stmt 0 view .LVU454
 1612 0084 3846     		mov	r0, r7
 1613 0086 A771     		strb	r7, [r4, #6]
1207:Core/Src/as5047p.c **** 
1208:Core/Src/as5047p.c ****     //--- This delay here is crucial before reading the position !!!!!!!!!!!!!!!!!!!!!!
1209:Core/Src/as5047p.c ****     AS5047P_HAL_Delay_ms(1);
 1614              		.loc 1 1209 5 is_stmt 1 view .LVU455
 1615 0088 FFF7FEFF 		bl	AS5047P_HAL_Delay_ms
 1616              	.LVL188:
1210:Core/Src/as5047p.c **** 
1211:Core/Src/as5047p.c ****   }
1212:Core/Src/as5047p.c ****   else
1213:Core/Src/as5047p.c ****   {
1214:Core/Src/as5047p.c ****       //--- Encoder not initialized while zero position set attempt
1215:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,80);
1216:Core/Src/as5047p.c ****       return -1;
1217:Core/Src/as5047p.c ****   }
1218:Core/Src/as5047p.c **** 
1219:Core/Src/as5047p.c ****   return 0;
 1617              		.loc 1 1219 3 view .LVU456
 1618              	.L105:
1220:Core/Src/as5047p.c **** 
1221:Core/Src/as5047p.c **** }
 1619              		.loc 1 1221 1 is_stmt 0 view .LVU457
 1620 008c 2846     		mov	r0, r5
 1621 008e 03B0     		add	sp, sp, #12
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 53


 1622              	.LCFI21:
 1623              		.cfi_remember_state
 1624              		.cfi_def_cfa_offset 20
 1625              		@ sp needed
 1626 0090 F0BD     		pop	{r4, r5, r6, r7, pc}
 1627              	.LVL189:
 1628              	.L104:
 1629              	.LCFI22:
 1630              		.cfi_restore_state
1215:Core/Src/as5047p.c ****       return -1;
 1631              		.loc 1 1215 7 is_stmt 1 view .LVU458
 1632 0092 5021     		movs	r1, #80
 1633 0094 FFF7FEFF 		bl	AS5047P_HandleError
 1634              	.LVL190:
1216:Core/Src/as5047p.c ****   }
 1635              		.loc 1 1216 7 view .LVU459
1216:Core/Src/as5047p.c ****   }
 1636              		.loc 1 1216 14 is_stmt 0 view .LVU460
 1637 0098 4FF0FF35 		mov	r5, #-1
 1638 009c F6E7     		b	.L105
 1639              	.L106:
1145:Core/Src/as5047p.c ****      }
 1640              		.loc 1 1145 9 view .LVU461
 1641 009e 4FF0FF35 		mov	r5, #-1
 1642 00a2 F3E7     		b	.L105
 1643              	.LVL191:
 1644              	.L107:
1163:Core/Src/as5047p.c ****      }
 1645              		.loc 1 1163 9 view .LVU462
 1646 00a4 4FF0FF35 		mov	r5, #-1
 1647 00a8 F0E7     		b	.L105
 1648              	.L108:
1181:Core/Src/as5047p.c ****     }
 1649              		.loc 1 1181 14 view .LVU463
 1650 00aa 4FF0FF35 		mov	r5, #-1
 1651 00ae EDE7     		b	.L105
 1652              	.LVL192:
 1653              	.L109:
1203:Core/Src/as5047p.c ****     }
 1654              		.loc 1 1203 14 view .LVU464
 1655 00b0 4FF0FF35 		mov	r5, #-1
 1656              	.LVL193:
1203:Core/Src/as5047p.c ****     }
 1657              		.loc 1 1203 14 view .LVU465
 1658 00b4 EAE7     		b	.L105
 1659              		.cfi_endproc
 1660              	.LFE19:
 1662              		.section	.text.AS5047P_SetABIResolution,"ax",%progbits
 1663              		.align	1
 1664              		.global	AS5047P_SetABIResolution
 1665              		.syntax unified
 1666              		.thumb
 1667              		.thumb_func
 1669              	AS5047P_SetABIResolution:
 1670              	.LVL194:
 1671              	.LFB20:
1222:Core/Src/as5047p.c **** 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 54


1223:Core/Src/as5047p.c **** /************************************************************************************
1224:Core/Src/as5047p.c ****  *
1225:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_SetABIResolution(instance,resolution)
1226:Core/Src/as5047p.c ****  * 	Access:		public
1227:Core/Src/as5047p.c ****  * 	Inputs:
1228:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
1229:Core/Src/as5047p.c ****  *		resolution:	Resolution to set. It accepts value of:
1230:Core/Src/as5047p.c ****  *		100/200/400/800/1200/1600/2000/4000/1024/2048/4096 steps per revolution.
1231:Core/Src/as5047p.c ****  * 	Returns:
1232:Core/Src/as5047p.c ****  *		-1 : Execution with errors.
1233:Core/Src/as5047p.c ****  *		 0 : Success.
1234:Core/Src/as5047p.c ****  *
1235:Core/Src/as5047p.c ****  * 	Description:
1236:Core/Src/as5047p.c ****  *	Function sets ABI resolution given by input 'resolution'. It operates on
1237:Core/Src/as5047p.c ****  *	ABIBIN (SETTINGS1) and ABIRES (SETTINGS2) fields.
1238:Core/Src/as5047p.c ****  *
1239:Core/Src/as5047p.c ****  *	Generates error codes in range: [90-99]
1240:Core/Src/as5047p.c ****  *
1241:Core/Src/as5047p.c ****  ************************************************************************************/
1242:Core/Src/as5047p.c **** AS5047P_ErrCode AS5047P_SetABIResolution(AS5047P_Instance * instance, uint16_t resolution)
1243:Core/Src/as5047p.c **** {
 1672              		.loc 1 1243 1 is_stmt 1 view -0
 1673              		.cfi_startproc
 1674              		@ args = 0, pretend = 0, frame = 0
 1675              		@ frame_needed = 0, uses_anonymous_args = 0
 1676              		.loc 1 1243 1 is_stmt 0 view .LVU467
 1677 0000 38B5     		push	{r3, r4, r5, lr}
 1678              	.LCFI23:
 1679              		.cfi_def_cfa_offset 16
 1680              		.cfi_offset 3, -16
 1681              		.cfi_offset 4, -12
 1682              		.cfi_offset 5, -8
 1683              		.cfi_offset 14, -4
 1684 0002 0546     		mov	r5, r0
1244:Core/Src/as5047p.c ****   AS5047P_ErrCode errCode = 0;
 1685              		.loc 1 1244 3 is_stmt 1 view .LVU468
 1686              	.LVL195:
1245:Core/Src/as5047p.c ****   uint16_t abibin;
 1687              		.loc 1 1245 3 view .LVU469
1246:Core/Src/as5047p.c ****   uint16_t abires;
 1688              		.loc 1 1246 3 view .LVU470
1247:Core/Src/as5047p.c **** 
1248:Core/Src/as5047p.c ****   //--- Check if resolution is on the list
1249:Core/Src/as5047p.c ****   switch (resolution)
 1689              		.loc 1 1249 3 view .LVU471
 1690 0004 B1F5966F 		cmp	r1, #1200
 1691 0008 4AD0     		beq	.L119
 1692 000a 0BD9     		bls	.L133
 1693 000c B1F5006F 		cmp	r1, #2048
 1694 0010 4ED0     		beq	.L125
 1695 0012 36D9     		bls	.L134
 1696 0014 B1F57A6F 		cmp	r1, #4000
 1697 0018 4ED0     		beq	.L128
 1698 001a B1F5805F 		cmp	r1, #4096
 1699 001e 38D1     		bne	.L115
1250:Core/Src/as5047p.c ****   {
1251:Core/Src/as5047p.c ****     case AS5047P_ABIRES_100:
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 55


1252:Core/Src/as5047p.c ****       abires = 7;
1253:Core/Src/as5047p.c ****       break;
1254:Core/Src/as5047p.c ****     case AS5047P_ABIRES_200:
1255:Core/Src/as5047p.c ****       abires = 6;
1256:Core/Src/as5047p.c ****       break;
1257:Core/Src/as5047p.c ****     case AS5047P_ABIRES_400:
1258:Core/Src/as5047p.c ****       abires = 5;
1259:Core/Src/as5047p.c ****       break;
1260:Core/Src/as5047p.c ****     case AS5047P_ABIRES_800:
1261:Core/Src/as5047p.c ****       abires = 4;
1262:Core/Src/as5047p.c ****       break;
1263:Core/Src/as5047p.c ****     case AS5047P_ABIRES_1200:
1264:Core/Src/as5047p.c ****       abires = 3;
1265:Core/Src/as5047p.c ****       break;
1266:Core/Src/as5047p.c ****     case AS5047P_ABIRES_1600:
1267:Core/Src/as5047p.c ****       abires = 2;
1268:Core/Src/as5047p.c ****       break;
1269:Core/Src/as5047p.c ****     case AS5047P_ABIRES_2000:
1270:Core/Src/as5047p.c ****       abires = 1;
1271:Core/Src/as5047p.c ****       break;
1272:Core/Src/as5047p.c ****     case AS5047P_ABIRES_4000:
1273:Core/Src/as5047p.c ****       abires = 0;
1274:Core/Src/as5047p.c ****       break;
1275:Core/Src/as5047p.c ****     case AS5047P_ABIRES_1024:
1276:Core/Src/as5047p.c ****       abires = 2;
1277:Core/Src/as5047p.c ****       break;
1278:Core/Src/as5047p.c ****     case AS5047P_ABIRES_2048:
1279:Core/Src/as5047p.c ****       abires = 1;
1280:Core/Src/as5047p.c ****       break;
1281:Core/Src/as5047p.c ****     case AS5047P_ABIRES_4096:
1282:Core/Src/as5047p.c ****       abires = 0;
 1700              		.loc 1 1282 14 is_stmt 0 view .LVU472
 1701 0020 0024     		movs	r4, #0
 1702 0022 10E0     		b	.L112
 1703              	.L133:
1249:Core/Src/as5047p.c ****   {
 1704              		.loc 1 1249 3 view .LVU473
 1705 0024 B1F5C87F 		cmp	r1, #400
 1706 0028 3CD0     		beq	.L120
 1707 002a 07D9     		bls	.L135
 1708 002c B1F5487F 		cmp	r1, #800
 1709 0030 3CD0     		beq	.L123
 1710 0032 B1F5806F 		cmp	r1, #1024
 1711 0036 2CD1     		bne	.L115
1276:Core/Src/as5047p.c ****       break;
 1712              		.loc 1 1276 14 view .LVU474
 1713 0038 0224     		movs	r4, #2
 1714 003a 04E0     		b	.L112
 1715              	.L135:
1249:Core/Src/as5047p.c ****   {
 1716              		.loc 1 1249 3 view .LVU475
 1717 003c 6429     		cmp	r1, #100
 1718 003e 33D0     		beq	.L121
 1719 0040 C829     		cmp	r1, #200
 1720 0042 26D1     		bne	.L115
1255:Core/Src/as5047p.c ****       break;
 1721              		.loc 1 1255 14 view .LVU476
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 56


 1722 0044 0624     		movs	r4, #6
 1723              	.L112:
 1724              	.LVL196:
1283:Core/Src/as5047p.c ****       break;
1284:Core/Src/as5047p.c **** 
1285:Core/Src/as5047p.c ****       //--- Chosen ABI resolution is not correct
1286:Core/Src/as5047p.c ****     default:
1287:Core/Src/as5047p.c **** 	AS5047P_HandleError(instance,90);
1288:Core/Src/as5047p.c ****       return -1;
1289:Core/Src/as5047p.c **** 
1290:Core/Src/as5047p.c ****   }
1291:Core/Src/as5047p.c **** 
1292:Core/Src/as5047p.c ****   //--- ABIBIN = 1 only when resolution 1024 or 2048 or 4096 SPR needed. Otherwise = 0.
1293:Core/Src/as5047p.c ****   abibin = (resolution % 100) ? 1 : 0;
 1725              		.loc 1 1293 3 is_stmt 1 view .LVU477
 1726              		.loc 1 1293 35 is_stmt 0 view .LVU478
 1727 0046 244B     		ldr	r3, .L136
 1728 0048 A3FB0123 		umull	r2, r3, r3, r1
 1729 004c 5B09     		lsrs	r3, r3, #5
 1730 004e 6422     		movs	r2, #100
 1731 0050 02FB1311 		mls	r1, r2, r3, r1
 1732              	.LVL197:
 1733              		.loc 1 1293 35 view .LVU479
 1734 0054 8BB2     		uxth	r3, r1
 1735              		.loc 1 1293 10 view .LVU480
 1736 0056 003B     		subs	r3, r3, #0
 1737 0058 18BF     		it	ne
 1738 005a 0123     		movne	r3, #1
 1739              	.LVL198:
1294:Core/Src/as5047p.c **** 
1295:Core/Src/as5047p.c ****   if(instance->initialized)
 1740              		.loc 1 1295 3 is_stmt 1 view .LVU481
 1741              		.loc 1 1295 14 is_stmt 0 view .LVU482
 1742 005c EA79     		ldrb	r2, [r5, #7]	@ zero_extendqisi2
 1743              		.loc 1 1295 5 view .LVU483
 1744 005e 6AB3     		cbz	r2, .L118
1296:Core/Src/as5047p.c ****   {
1297:Core/Src/as5047p.c **** 
1298:Core/Src/as5047p.c ****     /************************************************************************************
1299:Core/Src/as5047p.c ****     *
1300:Core/Src/as5047p.c ****     * STEP 1:  Set ABIBIN bit.
1301:Core/Src/as5047p.c ****     *
1302:Core/Src/as5047p.c ****     ************************************************************************************/
1303:Core/Src/as5047p.c ****     errCode = AS5047P_SetFieldInRegister(instance, AS5047P_SETTINGS1 , AS5047P_SETTINGS1_ABIBIN, ab
 1745              		.loc 1 1303 5 is_stmt 1 view .LVU484
 1746              		.loc 1 1303 15 is_stmt 0 view .LVU485
 1747 0060 2022     		movs	r2, #32
 1748 0062 1821     		movs	r1, #24
 1749 0064 2846     		mov	r0, r5
 1750              	.LVL199:
 1751              		.loc 1 1303 15 view .LVU486
 1752 0066 FFF7FEFF 		bl	AS5047P_SetFieldInRegister
 1753              	.LVL200:
1304:Core/Src/as5047p.c **** 
1305:Core/Src/as5047p.c ****      if(errCode < 0 )
 1754              		.loc 1 1305 6 is_stmt 1 view .LVU487
 1755              		.loc 1 1305 8 is_stmt 0 view .LVU488
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 57


 1756 006a 0028     		cmp	r0, #0
 1757 006c 2DDB     		blt	.L130
1306:Core/Src/as5047p.c ****      {
1307:Core/Src/as5047p.c **** 
1308:Core/Src/as5047p.c **** 	return -1;
1309:Core/Src/as5047p.c ****      }
1310:Core/Src/as5047p.c **** 
1311:Core/Src/as5047p.c ****     /************************************************************************************
1312:Core/Src/as5047p.c ****     *
1313:Core/Src/as5047p.c ****     * STEP 2:  Set ABIRES bits.
1314:Core/Src/as5047p.c ****     *
1315:Core/Src/as5047p.c ****     ************************************************************************************/
1316:Core/Src/as5047p.c **** 
1317:Core/Src/as5047p.c ****     errCode = AS5047P_SetFieldInRegister(instance, AS5047P_SETTINGS2 , AS5047P_SETTINGS2_ABIRES, ab
 1758              		.loc 1 1317 5 is_stmt 1 view .LVU489
 1759              		.loc 1 1317 15 is_stmt 0 view .LVU490
 1760 006e 2346     		mov	r3, r4
 1761 0070 E022     		movs	r2, #224
 1762 0072 1921     		movs	r1, #25
 1763 0074 2846     		mov	r0, r5
 1764              	.LVL201:
 1765              		.loc 1 1317 15 view .LVU491
 1766 0076 FFF7FEFF 		bl	AS5047P_SetFieldInRegister
 1767              	.LVL202:
1318:Core/Src/as5047p.c **** 
1319:Core/Src/as5047p.c ****     if(errCode < 0 )
 1768              		.loc 1 1319 5 is_stmt 1 view .LVU492
 1769              		.loc 1 1319 7 is_stmt 0 view .LVU493
 1770 007a 0028     		cmp	r0, #0
 1771 007c 28DB     		blt	.L131
1320:Core/Src/as5047p.c ****     {
1321:Core/Src/as5047p.c **** 
1322:Core/Src/as5047p.c **** 	return -1;
1323:Core/Src/as5047p.c ****     }
1324:Core/Src/as5047p.c ****   }
1325:Core/Src/as5047p.c ****   else
1326:Core/Src/as5047p.c ****   {
1327:Core/Src/as5047p.c ****       //--- Encoder not initialized while ABI resolution set attempt
1328:Core/Src/as5047p.c ****       AS5047P_HandleError(instance,91);
1329:Core/Src/as5047p.c ****       return -1;
1330:Core/Src/as5047p.c ****   }
1331:Core/Src/as5047p.c **** 
1332:Core/Src/as5047p.c ****   return 0;
 1772              		.loc 1 1332 10 view .LVU494
 1773 007e 0020     		movs	r0, #0
 1774              	.LVL203:
 1775              	.L117:
1333:Core/Src/as5047p.c **** 
1334:Core/Src/as5047p.c **** }
 1776              		.loc 1 1334 1 view .LVU495
 1777 0080 38BD     		pop	{r3, r4, r5, pc}
 1778              	.LVL204:
 1779              	.L134:
1249:Core/Src/as5047p.c ****   {
 1780              		.loc 1 1249 3 view .LVU496
 1781 0082 B1F5C86F 		cmp	r1, #1600
 1782 0086 15D0     		beq	.L126
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 58


 1783 0088 B1F5FA6F 		cmp	r1, #2000
 1784 008c 01D1     		bne	.L115
1270:Core/Src/as5047p.c ****       break;
 1785              		.loc 1 1270 14 view .LVU497
 1786 008e 0124     		movs	r4, #1
 1787 0090 D9E7     		b	.L112
 1788              	.L115:
1287:Core/Src/as5047p.c ****       return -1;
 1789              		.loc 1 1287 2 is_stmt 1 view .LVU498
 1790 0092 5A21     		movs	r1, #90
 1791              	.LVL205:
1287:Core/Src/as5047p.c ****       return -1;
 1792              		.loc 1 1287 2 is_stmt 0 view .LVU499
 1793 0094 2846     		mov	r0, r5
 1794              	.LVL206:
1287:Core/Src/as5047p.c ****       return -1;
 1795              		.loc 1 1287 2 view .LVU500
 1796 0096 FFF7FEFF 		bl	AS5047P_HandleError
 1797              	.LVL207:
1288:Core/Src/as5047p.c **** 
 1798              		.loc 1 1288 7 is_stmt 1 view .LVU501
1288:Core/Src/as5047p.c **** 
 1799              		.loc 1 1288 14 is_stmt 0 view .LVU502
 1800 009a 4FF0FF30 		mov	r0, #-1
 1801 009e EFE7     		b	.L117
 1802              	.LVL208:
 1803              	.L119:
1264:Core/Src/as5047p.c ****       break;
 1804              		.loc 1 1264 14 view .LVU503
 1805 00a0 0324     		movs	r4, #3
 1806 00a2 D0E7     		b	.L112
 1807              	.L120:
1258:Core/Src/as5047p.c ****       break;
 1808              		.loc 1 1258 14 view .LVU504
 1809 00a4 0524     		movs	r4, #5
 1810 00a6 CEE7     		b	.L112
 1811              	.L121:
1249:Core/Src/as5047p.c ****   {
 1812              		.loc 1 1249 3 view .LVU505
 1813 00a8 0724     		movs	r4, #7
 1814 00aa CCE7     		b	.L112
 1815              	.L123:
1261:Core/Src/as5047p.c ****       break;
 1816              		.loc 1 1261 14 view .LVU506
 1817 00ac 0424     		movs	r4, #4
 1818 00ae CAE7     		b	.L112
 1819              	.L125:
1279:Core/Src/as5047p.c ****       break;
 1820              		.loc 1 1279 14 view .LVU507
 1821 00b0 0124     		movs	r4, #1
 1822 00b2 C8E7     		b	.L112
 1823              	.L126:
1267:Core/Src/as5047p.c ****       break;
 1824              		.loc 1 1267 14 view .LVU508
 1825 00b4 0224     		movs	r4, #2
 1826 00b6 C6E7     		b	.L112
 1827              	.L128:
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 59


1273:Core/Src/as5047p.c ****       break;
 1828              		.loc 1 1273 14 view .LVU509
 1829 00b8 0024     		movs	r4, #0
 1830 00ba C4E7     		b	.L112
 1831              	.LVL209:
 1832              	.L118:
1328:Core/Src/as5047p.c ****       return -1;
 1833              		.loc 1 1328 7 is_stmt 1 view .LVU510
 1834 00bc 5B21     		movs	r1, #91
 1835 00be 2846     		mov	r0, r5
 1836              	.LVL210:
1328:Core/Src/as5047p.c ****       return -1;
 1837              		.loc 1 1328 7 is_stmt 0 view .LVU511
 1838 00c0 FFF7FEFF 		bl	AS5047P_HandleError
 1839              	.LVL211:
1329:Core/Src/as5047p.c ****   }
 1840              		.loc 1 1329 7 is_stmt 1 view .LVU512
1329:Core/Src/as5047p.c ****   }
 1841              		.loc 1 1329 14 is_stmt 0 view .LVU513
 1842 00c4 4FF0FF30 		mov	r0, #-1
 1843 00c8 DAE7     		b	.L117
 1844              	.LVL212:
 1845              	.L130:
1308:Core/Src/as5047p.c ****      }
 1846              		.loc 1 1308 9 view .LVU514
 1847 00ca 4FF0FF30 		mov	r0, #-1
 1848              	.LVL213:
1308:Core/Src/as5047p.c ****      }
 1849              		.loc 1 1308 9 view .LVU515
 1850 00ce D7E7     		b	.L117
 1851              	.LVL214:
 1852              	.L131:
1322:Core/Src/as5047p.c ****     }
 1853              		.loc 1 1322 9 view .LVU516
 1854 00d0 4FF0FF30 		mov	r0, #-1
 1855              	.LVL215:
1322:Core/Src/as5047p.c ****     }
 1856              		.loc 1 1322 9 view .LVU517
 1857 00d4 D4E7     		b	.L117
 1858              	.L137:
 1859 00d6 00BF     		.align	2
 1860              	.L136:
 1861 00d8 1F85EB51 		.word	1374389535
 1862              		.cfi_endproc
 1863              	.LFE20:
 1865              		.section	.text.AS5047P_BurnOTP,"ax",%progbits
 1866              		.align	1
 1867              		.global	AS5047P_BurnOTP
 1868              		.syntax unified
 1869              		.thumb
 1870              		.thumb_func
 1872              	AS5047P_BurnOTP:
 1873              	.LVL216:
 1874              	.LFB21:
1335:Core/Src/as5047p.c **** 
1336:Core/Src/as5047p.c **** /************************************************************************************
1337:Core/Src/as5047p.c ****  *
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 60


1338:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_BurnOTP(instance,yesImSure)
1339:Core/Src/as5047p.c ****  * 	Access:		public
1340:Core/Src/as5047p.c ****  * 	Inputs:
1341:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
1342:Core/Src/as5047p.c ****  *		yesImSure:	Confirmation that OTP burn is to take place.
1343:Core/Src/as5047p.c ****  *				Must be set to 666.
1344:Core/Src/as5047p.c ****  *
1345:Core/Src/as5047p.c ****  * 	Returns:
1346:Core/Src/as5047p.c ****  *		-1 : Execution with errors.
1347:Core/Src/as5047p.c ****  *		 0 : Success.
1348:Core/Src/as5047p.c ****  *
1349:Core/Src/as5047p.c ****  * 	Description:
1350:Core/Src/as5047p.c ****  *	Function writes permanently current content of four registers: SETTINGS1,
1351:Core/Src/as5047p.c ****  *	SETTINGS2, ZPOSL, ZPOSM. When OTP burn process is finished, registers are
1352:Core/Src/as5047p.c ****  *	filled with zeros and then refreshed with data written to non-volatile OTP
1353:Core/Src/as5047p.c ****  *	memory. After that comparison takes place to check if data (old and new) match.
1354:Core/Src/as5047p.c ****  *
1355:Core/Src/as5047p.c ****  *	Generates error codes in range: [100-109]
1356:Core/Src/as5047p.c ****  *
1357:Core/Src/as5047p.c ****  ************************************************************************************/
1358:Core/Src/as5047p.c **** /************************************************************************************
1359:Core/Src/as5047p.c **** *				IMPORTANT!
1360:Core/Src/as5047p.c **** *
1361:Core/Src/as5047p.c **** * 	 Remember to cycle the power and then check content of non-volatile registers.
1362:Core/Src/as5047p.c **** * 	 Only then you can be sure that OTP burn succeeded.
1363:Core/Src/as5047p.c **** *
1364:Core/Src/as5047p.c **** ************************************************************************************/
1365:Core/Src/as5047p.c **** AS5047P_ErrCode AS5047P_BurnOTP(AS5047P_Instance * instance, uint16_t yesImSure)
1366:Core/Src/as5047p.c **** {
 1875              		.loc 1 1366 1 is_stmt 1 view -0
 1876              		.cfi_startproc
 1877              		@ args = 0, pretend = 0, frame = 0
 1878              		@ frame_needed = 0, uses_anonymous_args = 0
1367:Core/Src/as5047p.c ****   AS5047P_ErrCode errCode = 0;
 1879              		.loc 1 1367 3 view .LVU519
1368:Core/Src/as5047p.c ****   AS5047P_Result response;
 1880              		.loc 1 1368 3 view .LVU520
1369:Core/Src/as5047p.c ****   AS5047P_Result oldZPOSM, oldZPOSL, oldSETTINGS1, oldSETTINGS2;
 1881              		.loc 1 1369 3 view .LVU521
1370:Core/Src/as5047p.c ****   AS5047P_Result newZPOSM, newZPOSL, newSETTINGS1, newSETTINGS2;
 1882              		.loc 1 1370 3 view .LVU522
1371:Core/Src/as5047p.c ****   uint16_t loopCntr = 0;
 1883              		.loc 1 1371 3 view .LVU523
1372:Core/Src/as5047p.c **** 
1373:Core/Src/as5047p.c ****   if( yesImSure == 666 )
 1884              		.loc 1 1373 3 view .LVU524
 1885              		.loc 1 1373 5 is_stmt 0 view .LVU525
 1886 0000 40F29A23 		movw	r3, #666
 1887 0004 9942     		cmp	r1, r3
 1888 0006 01D0     		beq	.L165
1374:Core/Src/as5047p.c ****   {
1375:Core/Src/as5047p.c ****     if(instance->initialized)
1376:Core/Src/as5047p.c ****     {
1377:Core/Src/as5047p.c **** 	/************************************************************************************
1378:Core/Src/as5047p.c **** 	*
1379:Core/Src/as5047p.c **** 	* STEP 1: Read current contents of ZPOS, ZPOSL, SETTINGS1 and SETTINGS2 registers
1380:Core/Src/as5047p.c **** 	* 	for verification later.
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 61


1381:Core/Src/as5047p.c **** 	*
1382:Core/Src/as5047p.c **** 	************************************************************************************/
1383:Core/Src/as5047p.c **** 	oldZPOSM = AS5047P_ReadRegister(instance, AS5047P_ZPOSM ,AS5047P_OPT_ENABLED);
1384:Core/Src/as5047p.c **** 	oldZPOSL = AS5047P_ReadRegister(instance, AS5047P_ZPOSL ,AS5047P_OPT_ENABLED);
1385:Core/Src/as5047p.c **** 	oldSETTINGS1 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS1 ,AS5047P_OPT_ENABLED);
1386:Core/Src/as5047p.c **** 	oldSETTINGS2 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS2 ,AS5047P_OPT_ENABLED);
1387:Core/Src/as5047p.c **** 
1388:Core/Src/as5047p.c **** 	//--- Registers reading failed
1389:Core/Src/as5047p.c **** 	if( (oldZPOSM < 0) || (oldZPOSL < 0) || (oldSETTINGS1 < 0) || (oldSETTINGS2 < 0) )
1390:Core/Src/as5047p.c **** 	{
1391:Core/Src/as5047p.c **** 
1392:Core/Src/as5047p.c **** 	    return -1;
1393:Core/Src/as5047p.c **** 	}
1394:Core/Src/as5047p.c **** 
1395:Core/Src/as5047p.c **** 	/************************************************************************************
1396:Core/Src/as5047p.c **** 	*
1397:Core/Src/as5047p.c **** 	* STEP 2: Set bit0 of SETTINGS1 to 0.
1398:Core/Src/as5047p.c **** 	* 	Datasheet:
1399:Core/Src/as5047p.c **** 	*  	For programming it's mandatory to clear bit0 (although it's read-only)
1400:Core/Src/as5047p.c **** 	*
1401:Core/Src/as5047p.c **** 	************************************************************************************/
1402:Core/Src/as5047p.c **** 
1403:Core/Src/as5047p.c **** 	errCode = AS5047P_WriteRegister(instance, AS5047P_SETTINGS1 , (~AS5047P_SETTINGS1_BIT0) & oldSETTI
1404:Core/Src/as5047p.c **** 
1405:Core/Src/as5047p.c **** 	if( errCode < 0)
1406:Core/Src/as5047p.c **** 	{
1407:Core/Src/as5047p.c **** 
1408:Core/Src/as5047p.c **** 	    return -1;
1409:Core/Src/as5047p.c **** 	}
1410:Core/Src/as5047p.c **** 
1411:Core/Src/as5047p.c **** 	/************************************************************************************
1412:Core/Src/as5047p.c **** 	*
1413:Core/Src/as5047p.c **** 	* STEP 3: Unlock OTParea for burning
1414:Core/Src/as5047p.c **** 	* 	(PROGEN=1)
1415:Core/Src/as5047p.c **** 	*
1416:Core/Src/as5047p.c **** 	************************************************************************************/
1417:Core/Src/as5047p.c **** 
1418:Core/Src/as5047p.c **** 	errCode = AS5047P_WriteRegister(instance, AS5047P_PROG , AS5047P_PROG_PROGEN, AS5047P_OPT_DISABLED
1419:Core/Src/as5047p.c **** 
1420:Core/Src/as5047p.c **** 	if( errCode < 0)
1421:Core/Src/as5047p.c **** 	{
1422:Core/Src/as5047p.c **** 
1423:Core/Src/as5047p.c **** 	    return -1;
1424:Core/Src/as5047p.c **** 	}
1425:Core/Src/as5047p.c **** 
1426:Core/Src/as5047p.c **** 	/************************************************************************************
1427:Core/Src/as5047p.c **** 	*
1428:Core/Src/as5047p.c **** 	* STEP 4: Start OTP burning procedure
1429:Core/Src/as5047p.c **** 	* 	(PROGOTP=1)
1430:Core/Src/as5047p.c **** 	*
1431:Core/Src/as5047p.c **** 	************************************************************************************/
1432:Core/Src/as5047p.c **** 
1433:Core/Src/as5047p.c **** 	errCode = AS5047P_WriteRegister(instance, AS5047P_PROG , AS5047P_PROG_PROGOTP, AS5047P_OPT_DISABLE
1434:Core/Src/as5047p.c **** 
1435:Core/Src/as5047p.c **** 	if( errCode < 0)
1436:Core/Src/as5047p.c **** 	{
1437:Core/Src/as5047p.c **** 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 62


1438:Core/Src/as5047p.c **** 	    return -1;
1439:Core/Src/as5047p.c **** 	}
1440:Core/Src/as5047p.c **** 
1441:Core/Src/as5047p.c **** 	/************************************************************************************
1442:Core/Src/as5047p.c **** 	*
1443:Core/Src/as5047p.c **** 	* STEP 5: Wait for OTP burning procedure complete.
1444:Core/Src/as5047p.c **** 	* 	Reg(0x0003) == 0x01
1445:Core/Src/as5047p.c **** 	*
1446:Core/Src/as5047p.c **** 	************************************************************************************/
1447:Core/Src/as5047p.c **** 	do{
1448:Core/Src/as5047p.c **** 
1449:Core/Src/as5047p.c **** 	    response = AS5047P_ReadRegister(instance, AS5047P_PROG , AS5047P_OPT_DISABLED);
1450:Core/Src/as5047p.c **** 
1451:Core/Src/as5047p.c **** 	    if( response < 0)
1452:Core/Src/as5047p.c **** 	    {
1453:Core/Src/as5047p.c **** 
1454:Core/Src/as5047p.c **** 		return -1;
1455:Core/Src/as5047p.c **** 	    }
1456:Core/Src/as5047p.c **** 
1457:Core/Src/as5047p.c **** 	    //--- OTP burn finished
1458:Core/Src/as5047p.c **** 	    if (response == 0x0001)
1459:Core/Src/as5047p.c **** 	    {
1460:Core/Src/as5047p.c **** 		break;
1461:Core/Src/as5047p.c **** 	    }
1462:Core/Src/as5047p.c **** 
1463:Core/Src/as5047p.c **** 	    //--- Wait for OTP burn finish
1464:Core/Src/as5047p.c **** 	    if (loopCntr < 2000)
1465:Core/Src/as5047p.c **** 	    {
1466:Core/Src/as5047p.c **** 		loopCntr++;
1467:Core/Src/as5047p.c **** 	    }
1468:Core/Src/as5047p.c **** 	    else //--- Timeout fired while waiting for OTP burn finish
1469:Core/Src/as5047p.c **** 	    {
1470:Core/Src/as5047p.c **** 		AS5047P_HandleError(instance,100);
1471:Core/Src/as5047p.c **** 		return -1;
1472:Core/Src/as5047p.c **** 	    }
1473:Core/Src/as5047p.c **** 
1474:Core/Src/as5047p.c **** 	    AS5047P_HAL_Delay_ms(1);
1475:Core/Src/as5047p.c **** 
1476:Core/Src/as5047p.c **** 	}while( 1 );
1477:Core/Src/as5047p.c **** 
1478:Core/Src/as5047p.c **** 	/************************************************************************************
1479:Core/Src/as5047p.c **** 	*
1480:Core/Src/as5047p.c **** 	* STEP 6: Fill ZPOS, ZPOSL, SETTINGS1 and SETTINGS2 registers with zeros.
1481:Core/Src/as5047p.c **** 	*
1482:Core/Src/as5047p.c **** 	************************************************************************************/
1483:Core/Src/as5047p.c **** 	errCode = AS5047P_WriteRegister(instance, AS5047P_ZPOSM , 0x0000, AS5047P_OPT_DISABLED, AS5047P_OP
1484:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_ZPOSL , 0x0000, AS5047P_OPT_DISABLED, AS5047P_O
1485:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_SETTINGS1 , 0x0000, AS5047P_OPT_DISABLED, AS504
1486:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_SETTINGS2 , 0x0000, AS5047P_OPT_DISABLED, AS504
1487:Core/Src/as5047p.c **** 
1488:Core/Src/as5047p.c **** 	//--- Registers writing failed
1489:Core/Src/as5047p.c **** 	if( errCode != 0 )
1490:Core/Src/as5047p.c **** 	{
1491:Core/Src/as5047p.c **** 
1492:Core/Src/as5047p.c **** 	    return -1;
1493:Core/Src/as5047p.c **** 	}
1494:Core/Src/as5047p.c **** 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 63


1495:Core/Src/as5047p.c **** 	/************************************************************************************
1496:Core/Src/as5047p.c **** 	*
1497:Core/Src/as5047p.c **** 	* STEP 7: Set Guardband
1498:Core/Src/as5047p.c **** 	*
1499:Core/Src/as5047p.c **** 	************************************************************************************/
1500:Core/Src/as5047p.c **** 
1501:Core/Src/as5047p.c **** 	errCode = AS5047P_WriteRegister(instance, AS5047P_PROG , AS5047P_PROG_PROGVER, AS5047P_OPT_DISABLE
1502:Core/Src/as5047p.c **** 
1503:Core/Src/as5047p.c **** 	if( errCode < 0)
1504:Core/Src/as5047p.c **** 	{
1505:Core/Src/as5047p.c **** 
1506:Core/Src/as5047p.c **** 	    return -1;
1507:Core/Src/as5047p.c **** 	}
1508:Core/Src/as5047p.c **** 
1509:Core/Src/as5047p.c **** 	/************************************************************************************
1510:Core/Src/as5047p.c **** 	*
1511:Core/Src/as5047p.c **** 	* STEP 8: Refresh non-volatile memory with OTP content
1512:Core/Src/as5047p.c **** 	*
1513:Core/Src/as5047p.c **** 	************************************************************************************/
1514:Core/Src/as5047p.c **** 
1515:Core/Src/as5047p.c **** 	errCode = AS5047P_WriteRegister(instance, AS5047P_PROG , AS5047P_PROG_OTPREF, AS5047P_OPT_DISABLED
1516:Core/Src/as5047p.c **** 
1517:Core/Src/as5047p.c **** 	if( errCode < 0)
1518:Core/Src/as5047p.c **** 	{
1519:Core/Src/as5047p.c **** 
1520:Core/Src/as5047p.c **** 	    return -1;
1521:Core/Src/as5047p.c **** 	}
1522:Core/Src/as5047p.c **** 
1523:Core/Src/as5047p.c **** 	AS5047P_HAL_Delay_ms(1);
1524:Core/Src/as5047p.c **** 
1525:Core/Src/as5047p.c **** 	/************************************************************************************
1526:Core/Src/as5047p.c **** 	*
1527:Core/Src/as5047p.c **** 	* STEP 9: Read current contents of ZPOS, ZPOSL, SETTINGS1 and SETTINGS2 registers
1528:Core/Src/as5047p.c **** 	*
1529:Core/Src/as5047p.c **** 	************************************************************************************/
1530:Core/Src/as5047p.c **** 	newZPOSM = AS5047P_ReadRegister(instance, AS5047P_ZPOSM , AS5047P_OPT_DISABLED);
1531:Core/Src/as5047p.c **** 	newZPOSL = AS5047P_ReadRegister(instance, AS5047P_ZPOSL , AS5047P_OPT_DISABLED);
1532:Core/Src/as5047p.c **** 	newSETTINGS1 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS1 , AS5047P_OPT_DISABLED);
1533:Core/Src/as5047p.c **** 	newSETTINGS2 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS2 , AS5047P_OPT_DISABLED);
1534:Core/Src/as5047p.c **** 
1535:Core/Src/as5047p.c **** 	//--- Registers reading failed
1536:Core/Src/as5047p.c **** 	if( (newZPOSM < 0) || (newZPOSL < 0) || (newSETTINGS1 < 0) || (newSETTINGS2 < 0) )
1537:Core/Src/as5047p.c **** 	{
1538:Core/Src/as5047p.c **** 
1539:Core/Src/as5047p.c **** 	    return -1;
1540:Core/Src/as5047p.c **** 	}
1541:Core/Src/as5047p.c **** 
1542:Core/Src/as5047p.c **** 	/************************************************************************************
1543:Core/Src/as5047p.c **** 	*
1544:Core/Src/as5047p.c **** 	* STEP 10: Final comparison: old to new.
1545:Core/Src/as5047p.c **** 	* 	 Mask out bit0 in register SETTINGS1.
1546:Core/Src/as5047p.c **** 	*
1547:Core/Src/as5047p.c **** 	************************************************************************************/
1548:Core/Src/as5047p.c **** 
1549:Core/Src/as5047p.c **** 	//--- Guardband test failed while OTP burn. Reprogramming not allowed
1550:Core/Src/as5047p.c **** 	if( (oldZPOSM != newZPOSM) || (oldZPOSL != newZPOSL) || ( ((~AS5047P_SETTINGS1_BIT0) & oldSETTINGS
1551:Core/Src/as5047p.c **** 	{
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 64


1552:Core/Src/as5047p.c **** 	    AS5047P_HandleError(instance,101);
1553:Core/Src/as5047p.c **** 	    return -1;
1554:Core/Src/as5047p.c **** 	}
1555:Core/Src/as5047p.c **** 
1556:Core/Src/as5047p.c ****     }
1557:Core/Src/as5047p.c ****     else
1558:Core/Src/as5047p.c ****     {
1559:Core/Src/as5047p.c **** 	//--- Encoder not initialized while OTP burn attempt
1560:Core/Src/as5047p.c **** 	AS5047P_HandleError(instance,102);
1561:Core/Src/as5047p.c **** 	return -1;
1562:Core/Src/as5047p.c ****     }
1563:Core/Src/as5047p.c ****   }
1564:Core/Src/as5047p.c **** 
1565:Core/Src/as5047p.c ****   return 0;
 1889              		.loc 1 1565 10 view .LVU526
 1890 0008 0020     		movs	r0, #0
 1891              	.LVL217:
1566:Core/Src/as5047p.c **** }
 1892              		.loc 1 1566 1 view .LVU527
 1893 000a 7047     		bx	lr
 1894              	.LVL218:
 1895              	.L165:
1366:Core/Src/as5047p.c ****   AS5047P_ErrCode errCode = 0;
 1896              		.loc 1 1366 1 view .LVU528
 1897 000c 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1898              	.LCFI24:
 1899              		.cfi_def_cfa_offset 36
 1900              		.cfi_offset 4, -36
 1901              		.cfi_offset 5, -32
 1902              		.cfi_offset 6, -28
 1903              		.cfi_offset 7, -24
 1904              		.cfi_offset 8, -20
 1905              		.cfi_offset 9, -16
 1906              		.cfi_offset 10, -12
 1907              		.cfi_offset 11, -8
 1908              		.cfi_offset 14, -4
 1909 0010 83B0     		sub	sp, sp, #12
 1910              	.LCFI25:
 1911              		.cfi_def_cfa_offset 48
 1912 0012 0546     		mov	r5, r0
1375:Core/Src/as5047p.c ****     {
 1913              		.loc 1 1375 5 is_stmt 1 view .LVU529
1375:Core/Src/as5047p.c ****     {
 1914              		.loc 1 1375 16 is_stmt 0 view .LVU530
 1915 0014 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
1375:Core/Src/as5047p.c ****     {
 1916              		.loc 1 1375 7 view .LVU531
 1917 0016 002B     		cmp	r3, #0
 1918 0018 00F0D680 		beq	.L140
1383:Core/Src/as5047p.c **** 	oldZPOSL = AS5047P_ReadRegister(instance, AS5047P_ZPOSL ,AS5047P_OPT_ENABLED);
 1919              		.loc 1 1383 2 is_stmt 1 view .LVU532
1383:Core/Src/as5047p.c **** 	oldZPOSL = AS5047P_ReadRegister(instance, AS5047P_ZPOSL ,AS5047P_OPT_ENABLED);
 1920              		.loc 1 1383 13 is_stmt 0 view .LVU533
 1921 001c 0122     		movs	r2, #1
 1922 001e 1621     		movs	r1, #22
 1923              	.LVL219:
1383:Core/Src/as5047p.c **** 	oldZPOSL = AS5047P_ReadRegister(instance, AS5047P_ZPOSL ,AS5047P_OPT_ENABLED);
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 65


 1924              		.loc 1 1383 13 view .LVU534
 1925 0020 FFF7FEFF 		bl	AS5047P_ReadRegister
 1926              	.LVL220:
1383:Core/Src/as5047p.c **** 	oldZPOSL = AS5047P_ReadRegister(instance, AS5047P_ZPOSL ,AS5047P_OPT_ENABLED);
 1927              		.loc 1 1383 13 view .LVU535
 1928 0024 0746     		mov	r7, r0
 1929              	.LVL221:
1384:Core/Src/as5047p.c **** 	oldSETTINGS1 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS1 ,AS5047P_OPT_ENABLED);
 1930              		.loc 1 1384 2 is_stmt 1 view .LVU536
1384:Core/Src/as5047p.c **** 	oldSETTINGS1 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS1 ,AS5047P_OPT_ENABLED);
 1931              		.loc 1 1384 13 is_stmt 0 view .LVU537
 1932 0026 0122     		movs	r2, #1
 1933 0028 1721     		movs	r1, #23
 1934 002a 2846     		mov	r0, r5
 1935 002c FFF7FEFF 		bl	AS5047P_ReadRegister
 1936              	.LVL222:
 1937 0030 8046     		mov	r8, r0
 1938              	.LVL223:
1385:Core/Src/as5047p.c **** 	oldSETTINGS2 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS2 ,AS5047P_OPT_ENABLED);
 1939              		.loc 1 1385 2 is_stmt 1 view .LVU538
1385:Core/Src/as5047p.c **** 	oldSETTINGS2 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS2 ,AS5047P_OPT_ENABLED);
 1940              		.loc 1 1385 17 is_stmt 0 view .LVU539
 1941 0032 0122     		movs	r2, #1
 1942 0034 1821     		movs	r1, #24
 1943 0036 2846     		mov	r0, r5
 1944 0038 FFF7FEFF 		bl	AS5047P_ReadRegister
 1945              	.LVL224:
 1946 003c 0646     		mov	r6, r0
 1947              	.LVL225:
1386:Core/Src/as5047p.c **** 
 1948              		.loc 1 1386 2 is_stmt 1 view .LVU540
1386:Core/Src/as5047p.c **** 
 1949              		.loc 1 1386 17 is_stmt 0 view .LVU541
 1950 003e 0122     		movs	r2, #1
 1951 0040 1921     		movs	r1, #25
 1952 0042 2846     		mov	r0, r5
 1953 0044 FFF7FEFF 		bl	AS5047P_ReadRegister
 1954              	.LVL226:
 1955 0048 8146     		mov	r9, r0
 1956              	.LVL227:
1389:Core/Src/as5047p.c **** 	{
 1957              		.loc 1 1389 2 is_stmt 1 view .LVU542
1389:Core/Src/as5047p.c **** 	{
 1958              		.loc 1 1389 4 is_stmt 0 view .LVU543
 1959 004a 002F     		cmp	r7, #0
 1960 004c C0F2C280 		blt	.L146
1389:Core/Src/as5047p.c **** 	{
 1961              		.loc 1 1389 21 discriminator 1 view .LVU544
 1962 0050 B8F1000F 		cmp	r8, #0
 1963 0054 C0F2C180 		blt	.L147
1389:Core/Src/as5047p.c **** 	{
 1964              		.loc 1 1389 39 discriminator 2 view .LVU545
 1965 0058 002E     		cmp	r6, #0
 1966 005a C0F2C180 		blt	.L148
1389:Core/Src/as5047p.c **** 	{
 1967              		.loc 1 1389 61 discriminator 3 view .LVU546
 1968 005e 0028     		cmp	r0, #0
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 66


 1969 0060 C0F2C180 		blt	.L149
1403:Core/Src/as5047p.c **** 
 1970              		.loc 1 1403 2 is_stmt 1 view .LVU547
1403:Core/Src/as5047p.c **** 
 1971              		.loc 1 1403 12 is_stmt 0 view .LVU548
 1972 0064 26F00102 		bic	r2, r6, #1
 1973 0068 0023     		movs	r3, #0
 1974 006a 0093     		str	r3, [sp]
 1975 006c 12B2     		sxth	r2, r2
 1976 006e 1821     		movs	r1, #24
 1977 0070 2846     		mov	r0, r5
 1978              	.LVL228:
1403:Core/Src/as5047p.c **** 
 1979              		.loc 1 1403 12 view .LVU549
 1980 0072 FFF7FEFF 		bl	AS5047P_WriteRegister
 1981              	.LVL229:
1405:Core/Src/as5047p.c **** 	{
 1982              		.loc 1 1405 2 is_stmt 1 view .LVU550
1405:Core/Src/as5047p.c **** 	{
 1983              		.loc 1 1405 4 is_stmt 0 view .LVU551
 1984 0076 0028     		cmp	r0, #0
 1985 0078 C0F2B880 		blt	.L150
1418:Core/Src/as5047p.c **** 
 1986              		.loc 1 1418 2 is_stmt 1 view .LVU552
1418:Core/Src/as5047p.c **** 
 1987              		.loc 1 1418 12 is_stmt 0 view .LVU553
 1988 007c 0023     		movs	r3, #0
 1989 007e 0093     		str	r3, [sp]
 1990 0080 0122     		movs	r2, #1
 1991 0082 0321     		movs	r1, #3
 1992 0084 2846     		mov	r0, r5
 1993              	.LVL230:
1418:Core/Src/as5047p.c **** 
 1994              		.loc 1 1418 12 view .LVU554
 1995 0086 FFF7FEFF 		bl	AS5047P_WriteRegister
 1996              	.LVL231:
1420:Core/Src/as5047p.c **** 	{
 1997              		.loc 1 1420 2 is_stmt 1 view .LVU555
1420:Core/Src/as5047p.c **** 	{
 1998              		.loc 1 1420 4 is_stmt 0 view .LVU556
 1999 008a 0028     		cmp	r0, #0
 2000 008c C0F2B180 		blt	.L151
1433:Core/Src/as5047p.c **** 
 2001              		.loc 1 1433 2 is_stmt 1 view .LVU557
1433:Core/Src/as5047p.c **** 
 2002              		.loc 1 1433 12 is_stmt 0 view .LVU558
 2003 0090 0023     		movs	r3, #0
 2004 0092 0093     		str	r3, [sp]
 2005 0094 0822     		movs	r2, #8
 2006 0096 0321     		movs	r1, #3
 2007 0098 2846     		mov	r0, r5
 2008              	.LVL232:
1433:Core/Src/as5047p.c **** 
 2009              		.loc 1 1433 12 view .LVU559
 2010 009a FFF7FEFF 		bl	AS5047P_WriteRegister
 2011              	.LVL233:
1435:Core/Src/as5047p.c **** 	{
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 67


 2012              		.loc 1 1435 2 is_stmt 1 view .LVU560
1435:Core/Src/as5047p.c **** 	{
 2013              		.loc 1 1435 4 is_stmt 0 view .LVU561
 2014 009e 0028     		cmp	r0, #0
 2015 00a0 C0F2AA80 		blt	.L152
1371:Core/Src/as5047p.c **** 
 2016              		.loc 1 1371 12 view .LVU562
 2017 00a4 0024     		movs	r4, #0
 2018              	.LVL234:
 2019              	.L143:
1447:Core/Src/as5047p.c **** 
 2020              		.loc 1 1447 2 is_stmt 1 view .LVU563
1449:Core/Src/as5047p.c **** 
 2021              		.loc 1 1449 6 view .LVU564
1449:Core/Src/as5047p.c **** 
 2022              		.loc 1 1449 17 is_stmt 0 view .LVU565
 2023 00a6 0022     		movs	r2, #0
 2024 00a8 0321     		movs	r1, #3
 2025 00aa 2846     		mov	r0, r5
 2026 00ac FFF7FEFF 		bl	AS5047P_ReadRegister
 2027              	.LVL235:
1451:Core/Src/as5047p.c **** 	    {
 2028              		.loc 1 1451 6 is_stmt 1 view .LVU566
1451:Core/Src/as5047p.c **** 	    {
 2029              		.loc 1 1451 8 is_stmt 0 view .LVU567
 2030 00b0 031E     		subs	r3, r0, #0
 2031 00b2 C0F2A480 		blt	.L153
1458:Core/Src/as5047p.c **** 	    {
 2032              		.loc 1 1458 6 is_stmt 1 view .LVU568
1458:Core/Src/as5047p.c **** 	    {
 2033              		.loc 1 1458 9 is_stmt 0 view .LVU569
 2034 00b6 012B     		cmp	r3, #1
 2035 00b8 0FD0     		beq	.L141
1464:Core/Src/as5047p.c **** 	    {
 2036              		.loc 1 1464 6 is_stmt 1 view .LVU570
1464:Core/Src/as5047p.c **** 	    {
 2037              		.loc 1 1464 9 is_stmt 0 view .LVU571
 2038 00ba B4F5FA6F 		cmp	r4, #2000
 2039 00be 05D2     		bcs	.L142
1466:Core/Src/as5047p.c **** 	    }
 2040              		.loc 1 1466 3 is_stmt 1 view .LVU572
1466:Core/Src/as5047p.c **** 	    }
 2041              		.loc 1 1466 11 is_stmt 0 view .LVU573
 2042 00c0 0134     		adds	r4, r4, #1
 2043              	.LVL236:
1466:Core/Src/as5047p.c **** 	    }
 2044              		.loc 1 1466 11 view .LVU574
 2045 00c2 A4B2     		uxth	r4, r4
 2046              	.LVL237:
1474:Core/Src/as5047p.c **** 
 2047              		.loc 1 1474 6 is_stmt 1 view .LVU575
 2048 00c4 0120     		movs	r0, #1
 2049              	.LVL238:
1474:Core/Src/as5047p.c **** 
 2050              		.loc 1 1474 6 is_stmt 0 view .LVU576
 2051 00c6 FFF7FEFF 		bl	AS5047P_HAL_Delay_ms
 2052              	.LVL239:
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 68


1476:Core/Src/as5047p.c **** 
 2053              		.loc 1 1476 8 is_stmt 1 view .LVU577
1449:Core/Src/as5047p.c **** 
 2054              		.loc 1 1449 15 is_stmt 0 view .LVU578
 2055 00ca ECE7     		b	.L143
 2056              	.LVL240:
 2057              	.L142:
1470:Core/Src/as5047p.c **** 		return -1;
 2058              		.loc 1 1470 3 is_stmt 1 view .LVU579
 2059 00cc 6421     		movs	r1, #100
 2060 00ce 2846     		mov	r0, r5
 2061              	.LVL241:
1470:Core/Src/as5047p.c **** 		return -1;
 2062              		.loc 1 1470 3 is_stmt 0 view .LVU580
 2063 00d0 FFF7FEFF 		bl	AS5047P_HandleError
 2064              	.LVL242:
1471:Core/Src/as5047p.c **** 	    }
 2065              		.loc 1 1471 3 is_stmt 1 view .LVU581
1471:Core/Src/as5047p.c **** 	    }
 2066              		.loc 1 1471 10 is_stmt 0 view .LVU582
 2067 00d4 4FF0FF30 		mov	r0, #-1
 2068 00d8 93E0     		b	.L139
 2069              	.LVL243:
 2070              	.L141:
1483:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_ZPOSL , 0x0000, AS5047P_OPT_DISABLED, AS5047P_O
 2071              		.loc 1 1483 2 is_stmt 1 view .LVU583
1483:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_ZPOSL , 0x0000, AS5047P_OPT_DISABLED, AS5047P_O
 2072              		.loc 1 1483 12 is_stmt 0 view .LVU584
 2073 00da 4FF0000A 		mov	r10, #0
 2074 00de CDF800A0 		str	r10, [sp]
 2075 00e2 5346     		mov	r3, r10
 2076 00e4 5246     		mov	r2, r10
 2077 00e6 1621     		movs	r1, #22
 2078 00e8 2846     		mov	r0, r5
 2079              	.LVL244:
1483:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_ZPOSL , 0x0000, AS5047P_OPT_DISABLED, AS5047P_O
 2080              		.loc 1 1483 12 view .LVU585
 2081 00ea FFF7FEFF 		bl	AS5047P_WriteRegister
 2082              	.LVL245:
 2083 00ee 0446     		mov	r4, r0
 2084              	.LVL246:
1484:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_SETTINGS1 , 0x0000, AS5047P_OPT_DISABLED, AS504
 2085              		.loc 1 1484 2 is_stmt 1 view .LVU586
1484:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_SETTINGS1 , 0x0000, AS5047P_OPT_DISABLED, AS504
 2086              		.loc 1 1484 13 is_stmt 0 view .LVU587
 2087 00f0 CDF800A0 		str	r10, [sp]
 2088 00f4 5346     		mov	r3, r10
 2089 00f6 5246     		mov	r2, r10
 2090 00f8 1721     		movs	r1, #23
 2091 00fa 2846     		mov	r0, r5
 2092 00fc FFF7FEFF 		bl	AS5047P_WriteRegister
 2093              	.LVL247:
1484:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_SETTINGS1 , 0x0000, AS5047P_OPT_DISABLED, AS504
 2094              		.loc 1 1484 10 view .LVU588
 2095 0100 0443     		orrs	r4, r4, r0
 2096              	.LVL248:
1484:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_SETTINGS1 , 0x0000, AS5047P_OPT_DISABLED, AS504
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 69


 2097              		.loc 1 1484 10 view .LVU589
 2098 0102 24B2     		sxth	r4, r4
 2099              	.LVL249:
1485:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_SETTINGS2 , 0x0000, AS5047P_OPT_DISABLED, AS504
 2100              		.loc 1 1485 2 is_stmt 1 view .LVU590
1485:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_SETTINGS2 , 0x0000, AS5047P_OPT_DISABLED, AS504
 2101              		.loc 1 1485 13 is_stmt 0 view .LVU591
 2102 0104 CDF800A0 		str	r10, [sp]
 2103 0108 5346     		mov	r3, r10
 2104 010a 5246     		mov	r2, r10
 2105 010c 1821     		movs	r1, #24
 2106 010e 2846     		mov	r0, r5
 2107 0110 FFF7FEFF 		bl	AS5047P_WriteRegister
 2108              	.LVL250:
1485:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_SETTINGS2 , 0x0000, AS5047P_OPT_DISABLED, AS504
 2109              		.loc 1 1485 10 view .LVU592
 2110 0114 0443     		orrs	r4, r4, r0
 2111              	.LVL251:
1485:Core/Src/as5047p.c **** 	errCode |= AS5047P_WriteRegister(instance, AS5047P_SETTINGS2 , 0x0000, AS5047P_OPT_DISABLED, AS504
 2112              		.loc 1 1485 10 view .LVU593
 2113 0116 24B2     		sxth	r4, r4
 2114              	.LVL252:
1486:Core/Src/as5047p.c **** 
 2115              		.loc 1 1486 2 is_stmt 1 view .LVU594
1486:Core/Src/as5047p.c **** 
 2116              		.loc 1 1486 13 is_stmt 0 view .LVU595
 2117 0118 CDF800A0 		str	r10, [sp]
 2118 011c 5346     		mov	r3, r10
 2119 011e 5246     		mov	r2, r10
 2120 0120 1921     		movs	r1, #25
 2121 0122 2846     		mov	r0, r5
 2122 0124 FFF7FEFF 		bl	AS5047P_WriteRegister
 2123              	.LVL253:
1486:Core/Src/as5047p.c **** 
 2124              		.loc 1 1486 10 view .LVU596
 2125 0128 0443     		orrs	r4, r4, r0
 2126              	.LVL254:
1486:Core/Src/as5047p.c **** 
 2127              		.loc 1 1486 10 view .LVU597
 2128 012a 24B2     		sxth	r4, r4
 2129              	.LVL255:
1489:Core/Src/as5047p.c **** 	{
 2130              		.loc 1 1489 2 is_stmt 1 view .LVU598
1489:Core/Src/as5047p.c **** 	{
 2131              		.loc 1 1489 4 is_stmt 0 view .LVU599
 2132 012c 002C     		cmp	r4, #0
 2133 012e 6BD1     		bne	.L154
1501:Core/Src/as5047p.c **** 
 2134              		.loc 1 1501 2 is_stmt 1 view .LVU600
1501:Core/Src/as5047p.c **** 
 2135              		.loc 1 1501 12 is_stmt 0 view .LVU601
 2136 0130 5346     		mov	r3, r10
 2137 0132 CDF800A0 		str	r10, [sp]
 2138 0136 4022     		movs	r2, #64
 2139 0138 0321     		movs	r1, #3
 2140 013a 2846     		mov	r0, r5
 2141 013c FFF7FEFF 		bl	AS5047P_WriteRegister
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 70


 2142              	.LVL256:
1503:Core/Src/as5047p.c **** 	{
 2143              		.loc 1 1503 2 is_stmt 1 view .LVU602
1503:Core/Src/as5047p.c **** 	{
 2144              		.loc 1 1503 4 is_stmt 0 view .LVU603
 2145 0140 5045     		cmp	r0, r10
 2146 0142 64DB     		blt	.L155
1515:Core/Src/as5047p.c **** 
 2147              		.loc 1 1515 2 is_stmt 1 view .LVU604
1515:Core/Src/as5047p.c **** 
 2148              		.loc 1 1515 12 is_stmt 0 view .LVU605
 2149 0144 5346     		mov	r3, r10
 2150 0146 CDF800A0 		str	r10, [sp]
 2151 014a 0422     		movs	r2, #4
 2152 014c 0321     		movs	r1, #3
 2153 014e 2846     		mov	r0, r5
 2154              	.LVL257:
1515:Core/Src/as5047p.c **** 
 2155              		.loc 1 1515 12 view .LVU606
 2156 0150 FFF7FEFF 		bl	AS5047P_WriteRegister
 2157              	.LVL258:
1517:Core/Src/as5047p.c **** 	{
 2158              		.loc 1 1517 2 is_stmt 1 view .LVU607
1517:Core/Src/as5047p.c **** 	{
 2159              		.loc 1 1517 4 is_stmt 0 view .LVU608
 2160 0154 5045     		cmp	r0, r10
 2161 0156 5DDB     		blt	.L156
1523:Core/Src/as5047p.c **** 
 2162              		.loc 1 1523 2 is_stmt 1 view .LVU609
 2163 0158 0120     		movs	r0, #1
 2164              	.LVL259:
1523:Core/Src/as5047p.c **** 
 2165              		.loc 1 1523 2 is_stmt 0 view .LVU610
 2166 015a FFF7FEFF 		bl	AS5047P_HAL_Delay_ms
 2167              	.LVL260:
1530:Core/Src/as5047p.c **** 	newZPOSL = AS5047P_ReadRegister(instance, AS5047P_ZPOSL , AS5047P_OPT_DISABLED);
 2168              		.loc 1 1530 2 is_stmt 1 view .LVU611
1530:Core/Src/as5047p.c **** 	newZPOSL = AS5047P_ReadRegister(instance, AS5047P_ZPOSL , AS5047P_OPT_DISABLED);
 2169              		.loc 1 1530 13 is_stmt 0 view .LVU612
 2170 015e 5246     		mov	r2, r10
 2171 0160 1621     		movs	r1, #22
 2172 0162 2846     		mov	r0, r5
 2173 0164 FFF7FEFF 		bl	AS5047P_ReadRegister
 2174              	.LVL261:
 2175 0168 8246     		mov	r10, r0
 2176              	.LVL262:
1531:Core/Src/as5047p.c **** 	newSETTINGS1 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS1 , AS5047P_OPT_DISABLED);
 2177              		.loc 1 1531 2 is_stmt 1 view .LVU613
1531:Core/Src/as5047p.c **** 	newSETTINGS1 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS1 , AS5047P_OPT_DISABLED);
 2178              		.loc 1 1531 13 is_stmt 0 view .LVU614
 2179 016a 0022     		movs	r2, #0
 2180 016c 1721     		movs	r1, #23
 2181 016e 2846     		mov	r0, r5
 2182 0170 FFF7FEFF 		bl	AS5047P_ReadRegister
 2183              	.LVL263:
 2184 0174 0446     		mov	r4, r0
 2185              	.LVL264:
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 71


1532:Core/Src/as5047p.c **** 	newSETTINGS2 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS2 , AS5047P_OPT_DISABLED);
 2186              		.loc 1 1532 2 is_stmt 1 view .LVU615
1532:Core/Src/as5047p.c **** 	newSETTINGS2 = AS5047P_ReadRegister(instance, AS5047P_SETTINGS2 , AS5047P_OPT_DISABLED);
 2187              		.loc 1 1532 17 is_stmt 0 view .LVU616
 2188 0176 0022     		movs	r2, #0
 2189 0178 1821     		movs	r1, #24
 2190 017a 2846     		mov	r0, r5
 2191 017c FFF7FEFF 		bl	AS5047P_ReadRegister
 2192              	.LVL265:
 2193 0180 8346     		mov	fp, r0
 2194              	.LVL266:
1533:Core/Src/as5047p.c **** 
 2195              		.loc 1 1533 2 is_stmt 1 view .LVU617
1533:Core/Src/as5047p.c **** 
 2196              		.loc 1 1533 17 is_stmt 0 view .LVU618
 2197 0182 0022     		movs	r2, #0
 2198 0184 1921     		movs	r1, #25
 2199 0186 2846     		mov	r0, r5
 2200 0188 FFF7FEFF 		bl	AS5047P_ReadRegister
 2201              	.LVL267:
 2202 018c 0346     		mov	r3, r0
 2203              	.LVL268:
1536:Core/Src/as5047p.c **** 	{
 2204              		.loc 1 1536 2 is_stmt 1 view .LVU619
1536:Core/Src/as5047p.c **** 	{
 2205              		.loc 1 1536 4 is_stmt 0 view .LVU620
 2206 018e BAF1000F 		cmp	r10, #0
 2207 0192 42DB     		blt	.L157
1536:Core/Src/as5047p.c **** 	{
 2208              		.loc 1 1536 21 discriminator 1 view .LVU621
 2209 0194 002C     		cmp	r4, #0
 2210 0196 43DB     		blt	.L158
1536:Core/Src/as5047p.c **** 	{
 2211              		.loc 1 1536 39 discriminator 2 view .LVU622
 2212 0198 BBF1000F 		cmp	fp, #0
 2213 019c 43DB     		blt	.L159
1536:Core/Src/as5047p.c **** 	{
 2214              		.loc 1 1536 61 discriminator 3 view .LVU623
 2215 019e 0028     		cmp	r0, #0
 2216 01a0 44DB     		blt	.L160
1550:Core/Src/as5047p.c **** 	{
 2217              		.loc 1 1550 2 is_stmt 1 view .LVU624
1550:Core/Src/as5047p.c **** 	{
 2218              		.loc 1 1550 4 is_stmt 0 view .LVU625
 2219 01a2 5745     		cmp	r7, r10
 2220 01a4 09D1     		bne	.L144
1550:Core/Src/as5047p.c **** 	{
 2221              		.loc 1 1550 29 discriminator 1 view .LVU626
 2222 01a6 A045     		cmp	r8, r4
 2223 01a8 07D1     		bne	.L144
1550:Core/Src/as5047p.c **** 	{
 2224              		.loc 1 1550 103 discriminator 2 view .LVU627
 2225 01aa 86EA0B06 		eor	r6, r6, fp
 2226              	.LVL269:
1550:Core/Src/as5047p.c **** 	{
 2227              		.loc 1 1550 103 discriminator 2 view .LVU628
 2228 01ae 26F00106 		bic	r6, r6, #1
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 72


 2229 01b2 30B2     		sxth	r0, r6
 2230              	.LVL270:
1550:Core/Src/as5047p.c **** 	{
 2231              		.loc 1 1550 55 discriminator 2 view .LVU629
 2232 01b4 08B9     		cbnz	r0, .L144
1550:Core/Src/as5047p.c **** 	{
 2233              		.loc 1 1550 151 discriminator 3 view .LVU630
 2234 01b6 9945     		cmp	r9, r3
 2235 01b8 23D0     		beq	.L139
 2236              	.L144:
1552:Core/Src/as5047p.c **** 	    return -1;
 2237              		.loc 1 1552 6 is_stmt 1 view .LVU631
 2238 01ba 6521     		movs	r1, #101
 2239 01bc 2846     		mov	r0, r5
 2240 01be FFF7FEFF 		bl	AS5047P_HandleError
 2241              	.LVL271:
1553:Core/Src/as5047p.c **** 	}
 2242              		.loc 1 1553 6 view .LVU632
1553:Core/Src/as5047p.c **** 	}
 2243              		.loc 1 1553 13 is_stmt 0 view .LVU633
 2244 01c2 4FF0FF30 		mov	r0, #-1
 2245 01c6 1CE0     		b	.L139
 2246              	.LVL272:
 2247              	.L140:
1560:Core/Src/as5047p.c **** 	return -1;
 2248              		.loc 1 1560 2 is_stmt 1 view .LVU634
 2249 01c8 6621     		movs	r1, #102
 2250              	.LVL273:
1560:Core/Src/as5047p.c **** 	return -1;
 2251              		.loc 1 1560 2 is_stmt 0 view .LVU635
 2252 01ca FFF7FEFF 		bl	AS5047P_HandleError
 2253              	.LVL274:
1561:Core/Src/as5047p.c ****     }
 2254              		.loc 1 1561 2 is_stmt 1 view .LVU636
1561:Core/Src/as5047p.c ****     }
 2255              		.loc 1 1561 9 is_stmt 0 view .LVU637
 2256 01ce 4FF0FF30 		mov	r0, #-1
 2257 01d2 16E0     		b	.L139
 2258              	.LVL275:
 2259              	.L146:
1392:Core/Src/as5047p.c **** 	}
 2260              		.loc 1 1392 13 view .LVU638
 2261 01d4 4FF0FF30 		mov	r0, #-1
 2262              	.LVL276:
1392:Core/Src/as5047p.c **** 	}
 2263              		.loc 1 1392 13 view .LVU639
 2264 01d8 13E0     		b	.L139
 2265              	.LVL277:
 2266              	.L147:
1392:Core/Src/as5047p.c **** 	}
 2267              		.loc 1 1392 13 view .LVU640
 2268 01da 4FF0FF30 		mov	r0, #-1
 2269              	.LVL278:
1392:Core/Src/as5047p.c **** 	}
 2270              		.loc 1 1392 13 view .LVU641
 2271 01de 10E0     		b	.L139
 2272              	.LVL279:
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 73


 2273              	.L148:
1392:Core/Src/as5047p.c **** 	}
 2274              		.loc 1 1392 13 view .LVU642
 2275 01e0 4FF0FF30 		mov	r0, #-1
 2276              	.LVL280:
1392:Core/Src/as5047p.c **** 	}
 2277              		.loc 1 1392 13 view .LVU643
 2278 01e4 0DE0     		b	.L139
 2279              	.LVL281:
 2280              	.L149:
1392:Core/Src/as5047p.c **** 	}
 2281              		.loc 1 1392 13 view .LVU644
 2282 01e6 4FF0FF30 		mov	r0, #-1
 2283              	.LVL282:
1392:Core/Src/as5047p.c **** 	}
 2284              		.loc 1 1392 13 view .LVU645
 2285 01ea 0AE0     		b	.L139
 2286              	.LVL283:
 2287              	.L150:
1408:Core/Src/as5047p.c **** 	}
 2288              		.loc 1 1408 13 view .LVU646
 2289 01ec 4FF0FF30 		mov	r0, #-1
 2290              	.LVL284:
1408:Core/Src/as5047p.c **** 	}
 2291              		.loc 1 1408 13 view .LVU647
 2292 01f0 07E0     		b	.L139
 2293              	.LVL285:
 2294              	.L151:
1423:Core/Src/as5047p.c **** 	}
 2295              		.loc 1 1423 13 view .LVU648
 2296 01f2 4FF0FF30 		mov	r0, #-1
 2297              	.LVL286:
1423:Core/Src/as5047p.c **** 	}
 2298              		.loc 1 1423 13 view .LVU649
 2299 01f6 04E0     		b	.L139
 2300              	.LVL287:
 2301              	.L152:
1438:Core/Src/as5047p.c **** 	}
 2302              		.loc 1 1438 13 view .LVU650
 2303 01f8 4FF0FF30 		mov	r0, #-1
 2304              	.LVL288:
1438:Core/Src/as5047p.c **** 	}
 2305              		.loc 1 1438 13 view .LVU651
 2306 01fc 01E0     		b	.L139
 2307              	.LVL289:
 2308              	.L153:
1454:Core/Src/as5047p.c **** 	    }
 2309              		.loc 1 1454 10 view .LVU652
 2310 01fe 4FF0FF30 		mov	r0, #-1
 2311              	.LVL290:
 2312              	.L139:
 2313              		.loc 1 1566 1 view .LVU653
 2314 0202 03B0     		add	sp, sp, #12
 2315              	.LCFI26:
 2316              		.cfi_remember_state
 2317              		.cfi_def_cfa_offset 36
 2318              		@ sp needed
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 74


 2319 0204 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2320              	.LVL291:
 2321              	.L154:
 2322              	.LCFI27:
 2323              		.cfi_restore_state
1492:Core/Src/as5047p.c **** 	}
 2324              		.loc 1 1492 13 view .LVU654
 2325 0208 4FF0FF30 		mov	r0, #-1
 2326 020c F9E7     		b	.L139
 2327              	.LVL292:
 2328              	.L155:
1506:Core/Src/as5047p.c **** 	}
 2329              		.loc 1 1506 13 view .LVU655
 2330 020e 4FF0FF30 		mov	r0, #-1
 2331              	.LVL293:
1506:Core/Src/as5047p.c **** 	}
 2332              		.loc 1 1506 13 view .LVU656
 2333 0212 F6E7     		b	.L139
 2334              	.LVL294:
 2335              	.L156:
1520:Core/Src/as5047p.c **** 	}
 2336              		.loc 1 1520 13 view .LVU657
 2337 0214 4FF0FF30 		mov	r0, #-1
 2338              	.LVL295:
1520:Core/Src/as5047p.c **** 	}
 2339              		.loc 1 1520 13 view .LVU658
 2340 0218 F3E7     		b	.L139
 2341              	.LVL296:
 2342              	.L157:
1539:Core/Src/as5047p.c **** 	}
 2343              		.loc 1 1539 13 view .LVU659
 2344 021a 4FF0FF30 		mov	r0, #-1
 2345              	.LVL297:
1539:Core/Src/as5047p.c **** 	}
 2346              		.loc 1 1539 13 view .LVU660
 2347 021e F0E7     		b	.L139
 2348              	.LVL298:
 2349              	.L158:
1539:Core/Src/as5047p.c **** 	}
 2350              		.loc 1 1539 13 view .LVU661
 2351 0220 4FF0FF30 		mov	r0, #-1
 2352              	.LVL299:
1539:Core/Src/as5047p.c **** 	}
 2353              		.loc 1 1539 13 view .LVU662
 2354 0224 EDE7     		b	.L139
 2355              	.LVL300:
 2356              	.L159:
1539:Core/Src/as5047p.c **** 	}
 2357              		.loc 1 1539 13 view .LVU663
 2358 0226 4FF0FF30 		mov	r0, #-1
 2359              	.LVL301:
1539:Core/Src/as5047p.c **** 	}
 2360              		.loc 1 1539 13 view .LVU664
 2361 022a EAE7     		b	.L139
 2362              	.LVL302:
 2363              	.L160:
1539:Core/Src/as5047p.c **** 	}
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 75


 2364              		.loc 1 1539 13 view .LVU665
 2365 022c 4FF0FF30 		mov	r0, #-1
 2366              	.LVL303:
1539:Core/Src/as5047p.c **** 	}
 2367              		.loc 1 1539 13 view .LVU666
 2368 0230 E7E7     		b	.L139
 2369              		.cfi_endproc
 2370              	.LFE21:
 2372              		.section	.text.AS5047P_GetID,"ax",%progbits
 2373              		.align	1
 2374              		.global	AS5047P_GetID
 2375              		.syntax unified
 2376              		.thumb
 2377              		.thumb_func
 2379              	AS5047P_GetID:
 2380              	.LVL304:
 2381              	.LFB22:
1567:Core/Src/as5047p.c **** 
1568:Core/Src/as5047p.c **** /************************************************************************************
1569:Core/Src/as5047p.c ****  *
1570:Core/Src/as5047p.c ****  * 	Function: 	AS5047P_GetID(instance)
1571:Core/Src/as5047p.c ****  * 	Access:		public
1572:Core/Src/as5047p.c ****  * 	Inputs:
1573:Core/Src/as5047p.c ****  * 		instance:	Pointer to the encoder's instance.
1574:Core/Src/as5047p.c ****  *
1575:Core/Src/as5047p.c ****  * 	Returns:
1576:Core/Src/as5047p.c ****  *		ID number of the instance given by 'instance' input.
1577:Core/Src/as5047p.c ****  *
1578:Core/Src/as5047p.c ****  * 	Description:
1579:Core/Src/as5047p.c ****  *	Function return an ID number of the instance given by 'instance' input.
1580:Core/Src/as5047p.c ****  *
1581:Core/Src/as5047p.c ****  ************************************************************************************/
1582:Core/Src/as5047p.c **** uint16_t AS5047P_GetID(AS5047P_Instance * instance)
1583:Core/Src/as5047p.c **** {
 2382              		.loc 1 1583 1 is_stmt 1 view -0
 2383              		.cfi_startproc
 2384              		@ args = 0, pretend = 0, frame = 0
 2385              		@ frame_needed = 0, uses_anonymous_args = 0
 2386              		@ link register save eliminated.
1584:Core/Src/as5047p.c ****   return instance->id;
 2387              		.loc 1 1584 3 view .LVU668
1585:Core/Src/as5047p.c **** }
 2388              		.loc 1 1585 1 is_stmt 0 view .LVU669
 2389 0000 0088     		ldrh	r0, [r0]
 2390              	.LVL305:
 2391              		.loc 1 1585 1 view .LVU670
 2392 0002 7047     		bx	lr
 2393              		.cfi_endproc
 2394              	.LFE22:
 2396              		.section	.rodata
 2397              		.align	2
 2398              		.set	.LANCHOR0,. + 0
 2399              	.LC0:
 2400 0000 20000000 		.word	32
 2401 0004 00000000 		.word	0
 2402 0008 01000000 		.word	1
 2403 000c 1A000000 		.word	26
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 76


 2404 0010 02000000 		.word	2
 2405 0014 17000000 		.word	23
 2406 0018 1B000000 		.word	27
 2407 001c 00000000 		.word	0
 2408 0020 03000000 		.word	3
 2409 0024 10000000 		.word	16
 2410 0028 18000000 		.word	24
 2411 002c 1E000000 		.word	30
 2412 0030 1C000000 		.word	28
 2413 0034 0B000000 		.word	11
 2414 0038 00000000 		.word	0
 2415 003c 0D000000 		.word	13
 2416 0040 04000000 		.word	4
 2417 0044 07000000 		.word	7
 2418 0048 11000000 		.word	17
 2419 004c 00000000 		.word	0
 2420 0050 19000000 		.word	25
 2421 0054 16000000 		.word	22
 2422 0058 1F000000 		.word	31
 2423 005c 0F000000 		.word	15
 2424 0060 1D000000 		.word	29
 2425 0064 0A000000 		.word	10
 2426 0068 0C000000 		.word	12
 2427 006c 06000000 		.word	6
 2428 0070 00000000 		.word	0
 2429 0074 15000000 		.word	21
 2430 0078 0E000000 		.word	14
 2431 007c 09000000 		.word	9
 2432 0080 05000000 		.word	5
 2433 0084 14000000 		.word	20
 2434 0088 08000000 		.word	8
 2435 008c 13000000 		.word	19
 2436 0090 12000000 		.word	18
 2437              		.section	.data.errMesage,"aw"
 2438              		.align	2
 2441              	errMesage:
 2442 0000 4E6F2065 		.ascii	"No error pending\000"
 2442      72726F72 
 2442      2070656E 
 2442      64696E67 
 2442      00
 2443 0011 00000000 		.space	63
 2443      00000000 
 2443      00000000 
 2443      00000000 
 2443      00000000 
 2444 0050 4C6F7720 		.ascii	"Low level SPI access returned error\000"
 2444      6C657665 
 2444      6C205350 
 2444      49206163 
 2444      63657373 
 2445 0074 00000000 		.space	44
 2445      00000000 
 2445      00000000 
 2445      00000000 
 2445      00000000 
 2446 00a0 4672616D 		.ascii	"Framing error occurred in last Tx frame\000"
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 77


 2446      696E6720 
 2446      6572726F 
 2446      72206F63 
 2446      63757272 
 2447 00c8 00000000 		.space	40
 2447      00000000 
 2447      00000000 
 2447      00000000 
 2447      00000000 
 2448 00f0 50617269 		.ascii	"Parity bit error occurred in Rx frame\000"
 2448      74792062 
 2448      69742065 
 2448      72726F72 
 2448      206F6363 
 2449 0116 00000000 		.space	42
 2449      00000000 
 2449      00000000 
 2449      00000000 
 2449      00000000 
 2450 0140 00       		.ascii	"\000"
 2451 0141 00000000 		.space	79
 2451      00000000 
 2451      00000000 
 2451      00000000 
 2451      00000000 
 2452 0190 00       		.ascii	"\000"
 2453 0191 00000000 		.space	79
 2453      00000000 
 2453      00000000 
 2453      00000000 
 2453      00000000 
 2454 01e0 00       		.ascii	"\000"
 2455 01e1 00000000 		.space	79
 2455      00000000 
 2455      00000000 
 2455      00000000 
 2455      00000000 
 2456 0230 00       		.ascii	"\000"
 2457 0231 00000000 		.space	79
 2457      00000000 
 2457      00000000 
 2457      00000000 
 2457      00000000 
 2458 0280 00       		.ascii	"\000"
 2459 0281 00000000 		.space	79
 2459      00000000 
 2459      00000000 
 2459      00000000 
 2459      00000000 
 2460 02d0 00       		.ascii	"\000"
 2461 02d1 00000000 		.space	79
 2461      00000000 
 2461      00000000 
 2461      00000000 
 2461      00000000 
 2462 0320 52656769 		.ascii	"Register with a given address doesn't exist\000"
 2462      73746572 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 78


 2462      20776974 
 2462      68206120 
 2462      67697665 
 2463 034c 00000000 		.space	36
 2463      00000000 
 2463      00000000 
 2463      00000000 
 2463      00000000 
 2464 0370 44657669 		.ascii	"Device not accessible on SPI line\000"
 2464      6365206E 
 2464      6F742061 
 2464      63636573 
 2464      7369626C 
 2465 0392 00000000 		.space	46
 2465      00000000 
 2465      00000000 
 2465      00000000 
 2465      00000000 
 2466 03c0 00       		.ascii	"\000"
 2467 03c1 00000000 		.space	79
 2467      00000000 
 2467      00000000 
 2467      00000000 
 2467      00000000 
 2468 0410 00       		.ascii	"\000"
 2469 0411 00000000 		.space	79
 2469      00000000 
 2469      00000000 
 2469      00000000 
 2469      00000000 
 2470 0460 00       		.ascii	"\000"
 2471 0461 00000000 		.space	79
 2471      00000000 
 2471      00000000 
 2471      00000000 
 2471      00000000 
 2472 04b0 00       		.ascii	"\000"
 2473 04b1 00000000 		.space	79
 2473      00000000 
 2473      00000000 
 2473      00000000 
 2473      00000000 
 2474 0500 00       		.ascii	"\000"
 2475 0501 00000000 		.space	79
 2475      00000000 
 2475      00000000 
 2475      00000000 
 2475      00000000 
 2476 0550 00       		.ascii	"\000"
 2477 0551 00000000 		.space	79
 2477      00000000 
 2477      00000000 
 2477      00000000 
 2477      00000000 
 2478 05a0 00       		.ascii	"\000"
 2479 05a1 00000000 		.space	79
 2479      00000000 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 79


 2479      00000000 
 2479      00000000 
 2479      00000000 
 2480 05f0 00       		.ascii	"\000"
 2481 05f1 00000000 		.space	79
 2481      00000000 
 2481      00000000 
 2481      00000000 
 2481      00000000 
 2482 0640 52656769 		.ascii	"Register with a given address doesn't have write ac"
 2482      73746572 
 2482      20776974 
 2482      68206120 
 2482      67697665 
 2483 0673 63657373 		.ascii	"cess or doesn't exist\000"
 2483      206F7220 
 2483      646F6573 
 2483      6E277420 
 2483      65786973 
 2484 0689 00000000 		.space	7
 2484      000000
 2485 0690 52656769 		.ascii	"Register content verification failed after write op"
 2485      73746572 
 2485      20636F6E 
 2485      74656E74 
 2485      20766572 
 2486 06c3 65726174 		.ascii	"eration\000"
 2486      696F6E00 
 2487 06cb 00000000 		.space	21
 2487      00000000 
 2487      00000000 
 2487      00000000 
 2487      00000000 
 2488 06e0 44657669 		.ascii	"Device not accessible on SPI line\000"
 2488      6365206E 
 2488      6F742061 
 2488      63636573 
 2488      7369626C 
 2489 0702 00000000 		.space	46
 2489      00000000 
 2489      00000000 
 2489      00000000 
 2489      00000000 
 2490 0730 00       		.ascii	"\000"
 2491 0731 00000000 		.space	79
 2491      00000000 
 2491      00000000 
 2491      00000000 
 2491      00000000 
 2492 0780 00       		.ascii	"\000"
 2493 0781 00000000 		.space	79
 2493      00000000 
 2493      00000000 
 2493      00000000 
 2493      00000000 
 2494 07d0 00       		.ascii	"\000"
 2495 07d1 00000000 		.space	79
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 80


 2495      00000000 
 2495      00000000 
 2495      00000000 
 2495      00000000 
 2496 0820 00       		.ascii	"\000"
 2497 0821 00000000 		.space	79
 2497      00000000 
 2497      00000000 
 2497      00000000 
 2497      00000000 
 2498 0870 00       		.ascii	"\000"
 2499 0871 00000000 		.space	79
 2499      00000000 
 2499      00000000 
 2499      00000000 
 2499      00000000 
 2500 08c0 00       		.ascii	"\000"
 2501 08c1 00000000 		.space	79
 2501      00000000 
 2501      00000000 
 2501      00000000 
 2501      00000000 
 2502 0910 00       		.ascii	"\000"
 2503 0911 00000000 		.space	79
 2503      00000000 
 2503      00000000 
 2503      00000000 
 2503      00000000 
 2504 0960 4C6F7720 		.ascii	"Low level hardware (SPI) init failed\000"
 2504      6C657665 
 2504      6C206861 
 2504      72647761 
 2504      72652028 
 2505 0985 00000000 		.space	43
 2505      00000000 
 2505      00000000 
 2505      00000000 
 2505      00000000 
 2506 09b0 43616E74 		.ascii	"Cant acknowledge the error in ERRFL register in ini"
 2506      2061636B 
 2506      6E6F776C 
 2506      65646765 
 2506      20746865 
 2507 09e3 7420726F 		.ascii	"t routine\000"
 2507      7574696E 
 2507      6500
 2508 09ed 00000000 		.space	19
 2508      00000000 
 2508      00000000 
 2508      00000000 
 2508      000000
 2509 0a00 00       		.ascii	"\000"
 2510 0a01 00000000 		.space	79
 2510      00000000 
 2510      00000000 
 2510      00000000 
 2510      00000000 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 81


 2511 0a50 00       		.ascii	"\000"
 2512 0a51 00000000 		.space	79
 2512      00000000 
 2512      00000000 
 2512      00000000 
 2512      00000000 
 2513 0aa0 00       		.ascii	"\000"
 2514 0aa1 00000000 		.space	79
 2514      00000000 
 2514      00000000 
 2514      00000000 
 2514      00000000 
 2515 0af0 00       		.ascii	"\000"
 2516 0af1 00000000 		.space	79
 2516      00000000 
 2516      00000000 
 2516      00000000 
 2516      00000000 
 2517 0b40 00       		.ascii	"\000"
 2518 0b41 00000000 		.space	79
 2518      00000000 
 2518      00000000 
 2518      00000000 
 2518      00000000 
 2519 0b90 00       		.ascii	"\000"
 2520 0b91 00000000 		.space	79
 2520      00000000 
 2520      00000000 
 2520      00000000 
 2520      00000000 
 2521 0be0 00       		.ascii	"\000"
 2522 0be1 00000000 		.space	79
 2522      00000000 
 2522      00000000 
 2522      00000000 
 2522      00000000 
 2523 0c30 00       		.ascii	"\000"
 2524 0c31 00000000 		.space	79
 2524      00000000 
 2524      00000000 
 2524      00000000 
 2524      00000000 
 2525 0c80 456E636F 		.ascii	"Encoder not initialized while setting factory setti"
 2525      64657220 
 2525      6E6F7420 
 2525      696E6974 
 2525      69616C69 
 2526 0cb3 6E677320 		.ascii	"ngs attempt\000"
 2526      61747465 
 2526      6D707400 
 2527 0cbf 00000000 		.space	17
 2527      00000000 
 2527      00000000 
 2527      00000000 
 2527      00
 2528 0cd0 00       		.ascii	"\000"
 2529 0cd1 00000000 		.space	79
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 82


 2529      00000000 
 2529      00000000 
 2529      00000000 
 2529      00000000 
 2530 0d20 00       		.ascii	"\000"
 2531 0d21 00000000 		.space	79
 2531      00000000 
 2531      00000000 
 2531      00000000 
 2531      00000000 
 2532 0d70 00       		.ascii	"\000"
 2533 0d71 00000000 		.space	79
 2533      00000000 
 2533      00000000 
 2533      00000000 
 2533      00000000 
 2534 0dc0 00       		.ascii	"\000"
 2535 0dc1 00000000 		.space	79
 2535      00000000 
 2535      00000000 
 2535      00000000 
 2535      00000000 
 2536 0e10 00       		.ascii	"\000"
 2537 0e11 00000000 		.space	79
 2537      00000000 
 2537      00000000 
 2537      00000000 
 2537      00000000 
 2538 0e60 00       		.ascii	"\000"
 2539 0e61 00000000 		.space	79
 2539      00000000 
 2539      00000000 
 2539      00000000 
 2539      00000000 
 2540 0eb0 00       		.ascii	"\000"
 2541 0eb1 00000000 		.space	79
 2541      00000000 
 2541      00000000 
 2541      00000000 
 2541      00000000 
 2542 0f00 00       		.ascii	"\000"
 2543 0f01 00000000 		.space	79
 2543      00000000 
 2543      00000000 
 2543      00000000 
 2543      00000000 
 2544 0f50 00       		.ascii	"\000"
 2545 0f51 00000000 		.space	79
 2545      00000000 
 2545      00000000 
 2545      00000000 
 2545      00000000 
 2546 0fa0 43616E74 		.ascii	"Cant acknowledge the error in ERRFL register in res"
 2546      2061636B 
 2546      6E6F776C 
 2546      65646765 
 2546      20746865 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 83


 2547 0fd3 65742072 		.ascii	"et routine\000"
 2547      6F757469 
 2547      6E6500
 2548 0fde 00000000 		.space	18
 2548      00000000 
 2548      00000000 
 2548      00000000 
 2548      0000
 2549 0ff0 456E636F 		.ascii	"Encoder not initialized while reset attempt\000"
 2549      64657220 
 2549      6E6F7420 
 2549      696E6974 
 2549      69616C69 
 2550 101c 00000000 		.space	36
 2550      00000000 
 2550      00000000 
 2550      00000000 
 2550      00000000 
 2551 1040 00       		.ascii	"\000"
 2552 1041 00000000 		.space	79
 2552      00000000 
 2552      00000000 
 2552      00000000 
 2552      00000000 
 2553 1090 00       		.ascii	"\000"
 2554 1091 00000000 		.space	79
 2554      00000000 
 2554      00000000 
 2554      00000000 
 2554      00000000 
 2555 10e0 00       		.ascii	"\000"
 2556 10e1 00000000 		.space	79
 2556      00000000 
 2556      00000000 
 2556      00000000 
 2556      00000000 
 2557 1130 00       		.ascii	"\000"
 2558 1131 00000000 		.space	79
 2558      00000000 
 2558      00000000 
 2558      00000000 
 2558      00000000 
 2559 1180 00       		.ascii	"\000"
 2560 1181 00000000 		.space	79
 2560      00000000 
 2560      00000000 
 2560      00000000 
 2560      00000000 
 2561 11d0 00       		.ascii	"\000"
 2562 11d1 00000000 		.space	79
 2562      00000000 
 2562      00000000 
 2562      00000000 
 2562      00000000 
 2563 1220 00       		.ascii	"\000"
 2564 1221 00000000 		.space	79
 2564      00000000 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 84


 2564      00000000 
 2564      00000000 
 2564      00000000 
 2565 1270 00       		.ascii	"\000"
 2566 1271 00000000 		.space	79
 2566      00000000 
 2566      00000000 
 2566      00000000 
 2566      00000000 
 2567 12c0 456E636F 		.ascii	"Encoder not initialized while set field in register"
 2567      64657220 
 2567      6E6F7420 
 2567      696E6974 
 2567      69616C69 
 2568 12f3 20617474 		.ascii	" attempt\000"
 2568      656D7074 
 2568      00
 2569 12fc 00000000 		.space	20
 2569      00000000 
 2569      00000000 
 2569      00000000 
 2569      00000000 
 2570 1310 00       		.ascii	"\000"
 2571 1311 00000000 		.space	79
 2571      00000000 
 2571      00000000 
 2571      00000000 
 2571      00000000 
 2572 1360 00       		.ascii	"\000"
 2573 1361 00000000 		.space	79
 2573      00000000 
 2573      00000000 
 2573      00000000 
 2573      00000000 
 2574 13b0 00       		.ascii	"\000"
 2575 13b1 00000000 		.space	79
 2575      00000000 
 2575      00000000 
 2575      00000000 
 2575      00000000 
 2576 1400 00       		.ascii	"\000"
 2577 1401 00000000 		.space	79
 2577      00000000 
 2577      00000000 
 2577      00000000 
 2577      00000000 
 2578 1450 00       		.ascii	"\000"
 2579 1451 00000000 		.space	79
 2579      00000000 
 2579      00000000 
 2579      00000000 
 2579      00000000 
 2580 14a0 00       		.ascii	"\000"
 2581 14a1 00000000 		.space	79
 2581      00000000 
 2581      00000000 
 2581      00000000 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 85


 2581      00000000 
 2582 14f0 00       		.ascii	"\000"
 2583 14f1 00000000 		.space	79
 2583      00000000 
 2583      00000000 
 2583      00000000 
 2583      00000000 
 2584 1540 00       		.ascii	"\000"
 2585 1541 00000000 		.space	79
 2585      00000000 
 2585      00000000 
 2585      00000000 
 2585      00000000 
 2586 1590 00       		.ascii	"\000"
 2587 1591 00000000 		.space	79
 2587      00000000 
 2587      00000000 
 2587      00000000 
 2587      00000000 
 2588 15e0 44657669 		.ascii	"Device not accessible on SPI line\000"
 2588      6365206E 
 2588      6F742061 
 2588      63636573 
 2588      7369626C 
 2589 1602 00000000 		.space	46
 2589      00000000 
 2589      00000000 
 2589      00000000 
 2589      00000000 
 2590 1630 4D61676E 		.ascii	"Magnetic field strength too low\000"
 2590      65746963 
 2590      20666965 
 2590      6C642073 
 2590      7472656E 
 2591 1650 00000000 		.space	48
 2591      00000000 
 2591      00000000 
 2591      00000000 
 2591      00000000 
 2592 1680 4D61676E 		.ascii	"Magnetic field strength too high\000"
 2592      65746963 
 2592      20666965 
 2592      6C642073 
 2592      7472656E 
 2593 16a1 00000000 		.space	47
 2593      00000000 
 2593      00000000 
 2593      00000000 
 2593      00000000 
 2594 16d0 434F5244 		.ascii	"CORDIC overflow\000"
 2594      4943206F 
 2594      76657266 
 2594      6C6F7700 
 2595 16e0 00000000 		.space	64
 2595      00000000 
 2595      00000000 
 2595      00000000 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 86


 2595      00000000 
 2596 1720 4D61676E 		.ascii	"Magnet offset compensation error\000"
 2596      6574206F 
 2596      66667365 
 2596      7420636F 
 2596      6D70656E 
 2597 1741 00000000 		.space	47
 2597      00000000 
 2597      00000000 
 2597      00000000 
 2597      00000000 
 2598 1770 456E636F 		.ascii	"Encoder not initialized while position read attempt"
 2598      64657220 
 2598      6E6F7420 
 2598      696E6974 
 2598      69616C69 
 2599 17a3 00       		.ascii	"\000"
 2600 17a4 00000000 		.space	28
 2600      00000000 
 2600      00000000 
 2600      00000000 
 2600      00000000 
 2601 17c0 456E636F 		.ascii	"Encoder not calibrated (zero pos not set) while pos"
 2601      64657220 
 2601      6E6F7420 
 2601      63616C69 
 2601      62726174 
 2602 17f3 6974696F 		.ascii	"ition read attempt\000"
 2602      6E207265 
 2602      61642061 
 2602      7474656D 
 2602      707400
 2603 1806 00000000 		.space	10
 2603      00000000 
 2603      0000
 2604 1810 00       		.ascii	"\000"
 2605 1811 00000000 		.space	79
 2605      00000000 
 2605      00000000 
 2605      00000000 
 2605      00000000 
 2606 1860 00       		.ascii	"\000"
 2607 1861 00000000 		.space	79
 2607      00000000 
 2607      00000000 
 2607      00000000 
 2607      00000000 
 2608 18b0 00       		.ascii	"\000"
 2609 18b1 00000000 		.space	79
 2609      00000000 
 2609      00000000 
 2609      00000000 
 2609      00000000 
 2610 1900 456E636F 		.ascii	"Encoder not initialized while zero position set att"
 2610      64657220 
 2610      6E6F7420 
 2610      696E6974 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 87


 2610      69616C69 
 2611 1933 656D7074 		.ascii	"empt\000"
 2611      00
 2612 1938 00000000 		.space	24
 2612      00000000 
 2612      00000000 
 2612      00000000 
 2612      00000000 
 2613 1950 00       		.ascii	"\000"
 2614 1951 00000000 		.space	79
 2614      00000000 
 2614      00000000 
 2614      00000000 
 2614      00000000 
 2615 19a0 00       		.ascii	"\000"
 2616 19a1 00000000 		.space	79
 2616      00000000 
 2616      00000000 
 2616      00000000 
 2616      00000000 
 2617 19f0 00       		.ascii	"\000"
 2618 19f1 00000000 		.space	79
 2618      00000000 
 2618      00000000 
 2618      00000000 
 2618      00000000 
 2619 1a40 00       		.ascii	"\000"
 2620 1a41 00000000 		.space	79
 2620      00000000 
 2620      00000000 
 2620      00000000 
 2620      00000000 
 2621 1a90 00       		.ascii	"\000"
 2622 1a91 00000000 		.space	79
 2622      00000000 
 2622      00000000 
 2622      00000000 
 2622      00000000 
 2623 1ae0 00       		.ascii	"\000"
 2624 1ae1 00000000 		.space	79
 2624      00000000 
 2624      00000000 
 2624      00000000 
 2624      00000000 
 2625 1b30 00       		.ascii	"\000"
 2626 1b31 00000000 		.space	79
 2626      00000000 
 2626      00000000 
 2626      00000000 
 2626      00000000 
 2627 1b80 00       		.ascii	"\000"
 2628 1b81 00000000 		.space	79
 2628      00000000 
 2628      00000000 
 2628      00000000 
 2628      00000000 
 2629 1bd0 00       		.ascii	"\000"
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 88


 2630 1bd1 00000000 		.space	79
 2630      00000000 
 2630      00000000 
 2630      00000000 
 2630      00000000 
 2631 1c20 43686F73 		.ascii	"Chosen ABI resolution is not correct\000"
 2631      656E2041 
 2631      42492072 
 2631      65736F6C 
 2631      7574696F 
 2632 1c45 00000000 		.space	43
 2632      00000000 
 2632      00000000 
 2632      00000000 
 2632      00000000 
 2633 1c70 456E636F 		.ascii	"Encoder not initialized while ABI resolution set at"
 2633      64657220 
 2633      6E6F7420 
 2633      696E6974 
 2633      69616C69 
 2634 1ca3 74656D70 		.ascii	"tempt\000"
 2634      7400
 2635 1ca9 00000000 		.space	23
 2635      00000000 
 2635      00000000 
 2635      00000000 
 2635      00000000 
 2636 1cc0 00       		.ascii	"\000"
 2637 1cc1 00000000 		.space	79
 2637      00000000 
 2637      00000000 
 2637      00000000 
 2637      00000000 
 2638 1d10 00       		.ascii	"\000"
 2639 1d11 00000000 		.space	79
 2639      00000000 
 2639      00000000 
 2639      00000000 
 2639      00000000 
 2640 1d60 00       		.ascii	"\000"
 2641 1d61 00000000 		.space	79
 2641      00000000 
 2641      00000000 
 2641      00000000 
 2641      00000000 
 2642 1db0 00       		.ascii	"\000"
 2643 1db1 00000000 		.space	79
 2643      00000000 
 2643      00000000 
 2643      00000000 
 2643      00000000 
 2644 1e00 00       		.ascii	"\000"
 2645 1e01 00000000 		.space	79
 2645      00000000 
 2645      00000000 
 2645      00000000 
 2645      00000000 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 89


 2646 1e50 00       		.ascii	"\000"
 2647 1e51 00000000 		.space	79
 2647      00000000 
 2647      00000000 
 2647      00000000 
 2647      00000000 
 2648 1ea0 00       		.ascii	"\000"
 2649 1ea1 00000000 		.space	79
 2649      00000000 
 2649      00000000 
 2649      00000000 
 2649      00000000 
 2650 1ef0 00       		.ascii	"\000"
 2651 1ef1 00000000 		.space	79
 2651      00000000 
 2651      00000000 
 2651      00000000 
 2651      00000000 
 2652 1f40 54696D65 		.ascii	"Timeout fired while waiting for OTP burn finish\000"
 2652      6F757420 
 2652      66697265 
 2652      64207768 
 2652      696C6520 
 2653 1f70 00000000 		.space	32
 2653      00000000 
 2653      00000000 
 2653      00000000 
 2653      00000000 
 2654 1f90 47756172 		.ascii	"Guardband test failed while OTP burn. Reprogramming"
 2654      6462616E 
 2654      64207465 
 2654      73742066 
 2654      61696C65 
 2655 1fc3 206E6F74 		.ascii	" not allowed\000"
 2655      20616C6C 
 2655      6F776564 
 2655      00
 2656 1fd0 00000000 		.space	16
 2656      00000000 
 2656      00000000 
 2656      00000000 
 2657 1fe0 456E636F 		.ascii	"Encoder not initialized while OTP burn attempt\000"
 2657      64657220 
 2657      6E6F7420 
 2657      696E6974 
 2657      69616C69 
 2658 200f 00000000 		.space	33
 2658      00000000 
 2658      00000000 
 2658      00000000 
 2658      00000000 
 2659 2030 00       		.ascii	"\000"
 2660 2031 00000000 		.space	79
 2660      00000000 
 2660      00000000 
 2660      00000000 
 2660      00000000 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 90


 2661 2080 00       		.ascii	"\000"
 2662 2081 00000000 		.space	79
 2662      00000000 
 2662      00000000 
 2662      00000000 
 2662      00000000 
 2663 20d0 00       		.ascii	"\000"
 2664 20d1 00000000 		.space	79
 2664      00000000 
 2664      00000000 
 2664      00000000 
 2664      00000000 
 2665 2120 00       		.ascii	"\000"
 2666 2121 00000000 		.space	79
 2666      00000000 
 2666      00000000 
 2666      00000000 
 2666      00000000 
 2667 2170 00       		.ascii	"\000"
 2668 2171 00000000 		.space	79
 2668      00000000 
 2668      00000000 
 2668      00000000 
 2668      00000000 
 2669 21c0 00       		.ascii	"\000"
 2670 21c1 00000000 		.space	79
 2670      00000000 
 2670      00000000 
 2670      00000000 
 2670      00000000 
 2671 2210 00       		.ascii	"\000"
 2672 2211 00000000 		.space	79
 2672      00000000 
 2672      00000000 
 2672      00000000 
 2672      00000000 
 2673 2260 00       		.ascii	"\000"
 2674 2261 00000000 		.space	79
 2674      00000000 
 2674      00000000 
 2674      00000000 
 2674      00000000 
 2675 22b0 00       		.ascii	"\000"
 2676 22b1 00000000 		.space	79
 2676      00000000 
 2676      00000000 
 2676      00000000 
 2676      00000000 
 2677 2300 00       		.ascii	"\000"
 2678 2301 00000000 		.space	79
 2678      00000000 
 2678      00000000 
 2678      00000000 
 2678      00000000 
 2679 2350 00       		.ascii	"\000"
 2680 2351 00000000 		.space	79
 2680      00000000 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 91


 2680      00000000 
 2680      00000000 
 2680      00000000 
 2681 23a0 00       		.ascii	"\000"
 2682 23a1 00000000 		.space	79
 2682      00000000 
 2682      00000000 
 2682      00000000 
 2682      00000000 
 2683 23f0 00       		.ascii	"\000"
 2684 23f1 00000000 		.space	79
 2684      00000000 
 2684      00000000 
 2684      00000000 
 2684      00000000 
 2685 2440 00       		.ascii	"\000"
 2686 2441 00000000 		.space	79
 2686      00000000 
 2686      00000000 
 2686      00000000 
 2686      00000000 
 2687 2490 00       		.ascii	"\000"
 2688 2491 00000000 		.space	79
 2688      00000000 
 2688      00000000 
 2688      00000000 
 2688      00000000 
 2689 24e0 00       		.ascii	"\000"
 2690 24e1 00000000 		.space	79
 2690      00000000 
 2690      00000000 
 2690      00000000 
 2690      00000000 
 2691 2530 00       		.ascii	"\000"
 2692 2531 00000000 		.space	79
 2692      00000000 
 2692      00000000 
 2692      00000000 
 2692      00000000 
 2693 2580 00       		.ascii	"\000"
 2694 2581 00000000 		.space	79
 2694      00000000 
 2694      00000000 
 2694      00000000 
 2694      00000000 
 2695 25d0 00       		.ascii	"\000"
 2696 25d1 00000000 		.space	79
 2696      00000000 
 2696      00000000 
 2696      00000000 
 2696      00000000 
 2697 2620 00       		.ascii	"\000"
 2698 2621 00000000 		.space	79
 2698      00000000 
 2698      00000000 
 2698      00000000 
 2698      00000000 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 92


 2699 2670 00       		.ascii	"\000"
 2700 2671 00000000 		.space	79
 2700      00000000 
 2700      00000000 
 2700      00000000 
 2700      00000000 
 2701 26c0 00       		.ascii	"\000"
 2702 26c1 00000000 		.space	79
 2702      00000000 
 2702      00000000 
 2702      00000000 
 2702      00000000 
 2703 2710 00       		.ascii	"\000"
 2704 2711 00000000 		.space	79
 2704      00000000 
 2704      00000000 
 2704      00000000 
 2704      00000000 
 2705 2760 00       		.ascii	"\000"
 2706 2761 00000000 		.space	79
 2706      00000000 
 2706      00000000 
 2706      00000000 
 2706      00000000 
 2707 27b0 00       		.ascii	"\000"
 2708 27b1 00000000 		.space	79
 2708      00000000 
 2708      00000000 
 2708      00000000 
 2708      00000000 
 2709 2800 00       		.ascii	"\000"
 2710 2801 00000000 		.space	79
 2710      00000000 
 2710      00000000 
 2710      00000000 
 2710      00000000 
 2711 2850 00       		.ascii	"\000"
 2712 2851 00000000 		.space	79
 2712      00000000 
 2712      00000000 
 2712      00000000 
 2712      00000000 
 2713 28a0 00       		.ascii	"\000"
 2714 28a1 00000000 		.space	79
 2714      00000000 
 2714      00000000 
 2714      00000000 
 2714      00000000 
 2715 28f0 00       		.ascii	"\000"
 2716 28f1 00000000 		.space	79
 2716      00000000 
 2716      00000000 
 2716      00000000 
 2716      00000000 
 2717 2940 00       		.ascii	"\000"
 2718 2941 00000000 		.space	79
 2718      00000000 
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 93


 2718      00000000 
 2718      00000000 
 2718      00000000 
 2719 2990 00       		.ascii	"\000"
 2720 2991 00000000 		.space	79
 2720      00000000 
 2720      00000000 
 2720      00000000 
 2720      00000000 
 2721 29e0 00       		.ascii	"\000"
 2722 29e1 00000000 		.space	79
 2722      00000000 
 2722      00000000 
 2722      00000000 
 2722      00000000 
 2723 2a30 00       		.ascii	"\000"
 2724 2a31 00000000 		.space	79
 2724      00000000 
 2724      00000000 
 2724      00000000 
 2724      00000000 
 2725 2a80 00       		.ascii	"\000"
 2726 2a81 00000000 		.space	79
 2726      00000000 
 2726      00000000 
 2726      00000000 
 2726      00000000 
 2727 2ad0 00       		.ascii	"\000"
 2728 2ad1 00000000 		.space	79
 2728      00000000 
 2728      00000000 
 2728      00000000 
 2728      00000000 
 2729 2b20 00       		.ascii	"\000"
 2730 2b21 00000000 		.space	79
 2730      00000000 
 2730      00000000 
 2730      00000000 
 2730      00000000 
 2731 2b70 00       		.ascii	"\000"
 2732 2b71 00000000 		.space	79
 2732      00000000 
 2732      00000000 
 2732      00000000 
 2732      00000000 
 2733              		.text
 2734              	.Letext0:
 2735              		.file 2 "c:\\tools\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_default_type
 2736              		.file 3 "c:\\tools\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 2737              		.file 4 "Core/Inc/as5047p.h"
 2738              		.file 5 "Core/Inc/as5047p_hal.h"
 2739              		.file 6 "<built-in>"
ARM GAS  C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s 			page 94


DEFINED SYMBOLS
                            *ABS*:00000000 as5047p.c
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:20     .text.AS5047P_CalcParity:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:25     .text.AS5047P_CalcParity:00000000 AS5047P_CalcParity
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:60     .text.AS5047P_CountTrailZeros:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:65     .text.AS5047P_CountTrailZeros:00000000 AS5047P_CountTrailZeros
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:120    .text.AS5047P_CountTrailZeros:0000003c $d
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:126    .text.AS5047P_SetBitsAndShiftAndMask:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:131    .text.AS5047P_SetBitsAndShiftAndMask:00000000 AS5047P_SetBitsAndShiftAndMask
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:161    .text.AS5047P_IsParityOk:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:166    .text.AS5047P_IsParityOk:00000000 AS5047P_IsParityOk
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:213    .text.AS5047P_HandleError:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:218    .text.AS5047P_HandleError:00000000 AS5047P_HandleError
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:262    .text.AS5047P_HandleError:00000024 $d
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:2441   .data.errMesage:00000000 errMesage
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:267    .text.AS5047P_ClearError:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:272    .text.AS5047P_ClearError:00000000 AS5047P_ClearError
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:293    .text.AS5047P_ClearError:0000000c $d
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:298    .text.AS5047P_ReadWriteRaw:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:304    .text.AS5047P_ReadWriteRaw:00000000 AS5047P_ReadWriteRaw
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:418    .text.AS5047P_ReadRegister:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:424    .text.AS5047P_ReadRegister:00000000 AS5047P_ReadRegister
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:565    .text.AS5047P_WriteRegister:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:571    .text.AS5047P_WriteRegister:00000000 AS5047P_WriteRegister
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:756    .text.AS5047P_Init:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:762    .text.AS5047P_Init:00000000 AS5047P_Init
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:871    .text.AS5047P_SetFactorySettings:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:877    .text.AS5047P_SetFactorySettings:00000000 AS5047P_SetFactorySettings
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:993    .text.AS5047P_ErrorPending:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:999    .text.AS5047P_ErrorPending:00000000 AS5047P_ErrorPending
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1020   .text.AS5047P_GetError:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1026   .text.AS5047P_GetError:00000000 AS5047P_GetError
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1052   .text.AS5047P_ErrorAck:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1058   .text.AS5047P_ErrorAck:00000000 AS5047P_ErrorAck
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1148   .text.AS5047P_SetFieldInRegister:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1154   .text.AS5047P_SetFieldInRegister:00000000 AS5047P_SetFieldInRegister
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1269   .text.AS5047P_ReadPosition:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1275   .text.AS5047P_ReadPosition:00000000 AS5047P_ReadPosition
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1472   .text.AS5047P_SetZeroPosition:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1478   .text.AS5047P_SetZeroPosition:00000000 AS5047P_SetZeroPosition
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1663   .text.AS5047P_SetABIResolution:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1669   .text.AS5047P_SetABIResolution:00000000 AS5047P_SetABIResolution
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1861   .text.AS5047P_SetABIResolution:000000d8 $d
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1866   .text.AS5047P_BurnOTP:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:1872   .text.AS5047P_BurnOTP:00000000 AS5047P_BurnOTP
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:2373   .text.AS5047P_GetID:00000000 $t
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:2379   .text.AS5047P_GetID:00000000 AS5047P_GetID
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:2397   .rodata:00000000 $d
C:\Users\neko2\AppData\Local\Temp\cc7UFKph.s:2438   .data.errMesage:00000000 $d

UNDEFINED SYMBOLS
memcpy
AS5047P_HAL_SPI_Transaction
AS5047P_HAL_Delay_ms
AS5047P_HAL_Init
